(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function jT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sh={exports:{}},ta={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function WS(){if(d_)return ta;d_=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(o,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:n,type:o,key:c,ref:r!==void 0?r:null,props:a}}return ta.Fragment=t,ta.jsx=e,ta.jsxs=e,ta}var h_;function ZS(){return h_||(h_=1,sh.exports=WS()),sh.exports}var ut=ZS(),rh={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function jS(){if(p_)return Ct;p_=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function I(q){return q===null||typeof q!="object"?null:(q=A&&q[A]||q["@@iterator"],typeof q=="function"?q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,U={};function Q(q,W,st){this.props=q,this.context=W,this.refs=U,this.updater=st||x}Q.prototype.isReactComponent={},Q.prototype.setState=function(q,W){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,W,"setState")},Q.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function nt(){}nt.prototype=Q.prototype;function Z(q,W,st){this.props=q,this.context=W,this.refs=U,this.updater=st||x}var it=Z.prototype=new nt;it.constructor=Z,O(it,Q.prototype),it.isPureReactComponent=!0;var ct=Array.isArray;function rt(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(q,W,st){var pt=st.ref;return{$$typeof:n,type:q,key:W,ref:pt!==void 0?pt:null,props:st}}function P(q,W){return N(q.type,W,q.props)}function L(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function G(q){var W={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(st){return W[st]})}var b=/\/+/g;function Kt(q,W){return typeof q=="object"&&q!==null&&q.key!=null?G(""+q.key):W.toString(36)}function _e(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(rt,rt):(q.status="pending",q.then(function(W){q.status==="pending"&&(q.status="fulfilled",q.value=W)},function(W){q.status==="pending"&&(q.status="rejected",q.reason=W)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,W,st,pt,Et){var Mt=typeof q;(Mt==="undefined"||Mt==="boolean")&&(q=null);var Lt=!1;if(q===null)Lt=!0;else switch(Mt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(q.$$typeof){case n:case t:Lt=!0;break;case v:return Lt=q._init,X(Lt(q._payload),W,st,pt,Et)}}if(Lt)return Et=Et(q),Lt=pt===""?"."+Kt(q,0):pt,ct(Et)?(st="",Lt!=null&&(st=Lt.replace(b,"$&/")+"/"),X(Et,W,st,"",function(ni){return ni})):Et!=null&&(L(Et)&&(Et=P(Et,st+(Et.key==null||q&&q.key===Et.key?"":(""+Et.key).replace(b,"$&/")+"/")+Lt)),W.push(Et)),1;Lt=0;var ke=pt===""?".":pt+":";if(ct(q))for(var ae=0;ae<q.length;ae++)pt=q[ae],Mt=ke+Kt(pt,ae),Lt+=X(pt,W,st,Mt,Et);else if(ae=I(q),typeof ae=="function")for(q=ae.call(q),ae=0;!(pt=q.next()).done;)pt=pt.value,Mt=ke+Kt(pt,ae++),Lt+=X(pt,W,st,Mt,Et);else if(Mt==="object"){if(typeof q.then=="function")return X(_e(q),W,st,pt,Et);throw W=String(q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function lt(q,W,st){if(q==null)return q;var pt=[],Et=0;return X(q,pt,"","",function(Mt){return W.call(st,Mt,Et++)}),pt}function _t(q){if(q._status===-1){var W=q._result;W=W(),W.then(function(st){(q._status===0||q._status===-1)&&(q._status=1,q._result=st)},function(st){(q._status===0||q._status===-1)&&(q._status=2,q._result=st)}),q._status===-1&&(q._status=0,q._result=W)}if(q._status===1)return q._result.default;throw q._result}var Gt=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Qt={map:lt,forEach:function(q,W,st){lt(q,function(){W.apply(this,arguments)},st)},count:function(q){var W=0;return lt(q,function(){W++}),W},toArray:function(q){return lt(q,function(W){return W})||[]},only:function(q){if(!L(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ct.Activity=E,Ct.Children=Qt,Ct.Component=Q,Ct.Fragment=e,Ct.Profiler=r,Ct.PureComponent=Z,Ct.StrictMode=o,Ct.Suspense=y,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(q){return D.H.useMemoCache(q)}},Ct.cache=function(q){return function(){return q.apply(null,arguments)}},Ct.cacheSignal=function(){return null},Ct.cloneElement=function(q,W,st){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var pt=O({},q.props),Et=q.key;if(W!=null)for(Mt in W.key!==void 0&&(Et=""+W.key),W)!M.call(W,Mt)||Mt==="key"||Mt==="__self"||Mt==="__source"||Mt==="ref"&&W.ref===void 0||(pt[Mt]=W[Mt]);var Mt=arguments.length-2;if(Mt===1)pt.children=st;else if(1<Mt){for(var Lt=Array(Mt),ke=0;ke<Mt;ke++)Lt[ke]=arguments[ke+2];pt.children=Lt}return N(q.type,Et,pt)},Ct.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Ct.createElement=function(q,W,st){var pt,Et={},Mt=null;if(W!=null)for(pt in W.key!==void 0&&(Mt=""+W.key),W)M.call(W,pt)&&pt!=="key"&&pt!=="__self"&&pt!=="__source"&&(Et[pt]=W[pt]);var Lt=arguments.length-2;if(Lt===1)Et.children=st;else if(1<Lt){for(var ke=Array(Lt),ae=0;ae<Lt;ae++)ke[ae]=arguments[ae+2];Et.children=ke}if(q&&q.defaultProps)for(pt in Lt=q.defaultProps,Lt)Et[pt]===void 0&&(Et[pt]=Lt[pt]);return N(q,Mt,Et)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(q){return{$$typeof:d,render:q}},Ct.isValidElement=L,Ct.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:_t}},Ct.memo=function(q,W){return{$$typeof:m,type:q,compare:W===void 0?null:W}},Ct.startTransition=function(q){var W=D.T,st={};D.T=st;try{var pt=q(),Et=D.S;Et!==null&&Et(st,pt),typeof pt=="object"&&pt!==null&&typeof pt.then=="function"&&pt.then(rt,Gt)}catch(Mt){Gt(Mt)}finally{W!==null&&st.types!==null&&(W.types=st.types),D.T=W}},Ct.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ct.use=function(q){return D.H.use(q)},Ct.useActionState=function(q,W,st){return D.H.useActionState(q,W,st)},Ct.useCallback=function(q,W){return D.H.useCallback(q,W)},Ct.useContext=function(q){return D.H.useContext(q)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(q,W){return D.H.useDeferredValue(q,W)},Ct.useEffect=function(q,W){return D.H.useEffect(q,W)},Ct.useEffectEvent=function(q){return D.H.useEffectEvent(q)},Ct.useId=function(){return D.H.useId()},Ct.useImperativeHandle=function(q,W,st){return D.H.useImperativeHandle(q,W,st)},Ct.useInsertionEffect=function(q,W){return D.H.useInsertionEffect(q,W)},Ct.useLayoutEffect=function(q,W){return D.H.useLayoutEffect(q,W)},Ct.useMemo=function(q,W){return D.H.useMemo(q,W)},Ct.useOptimistic=function(q,W){return D.H.useOptimistic(q,W)},Ct.useReducer=function(q,W,st){return D.H.useReducer(q,W,st)},Ct.useRef=function(q){return D.H.useRef(q)},Ct.useState=function(q){return D.H.useState(q)},Ct.useSyncExternalStore=function(q,W,st){return D.H.useSyncExternalStore(q,W,st)},Ct.useTransition=function(){return D.H.useTransition()},Ct.version="19.2.3",Ct}var m_;function np(){return m_||(m_=1,rh.exports=jS()),rh.exports}var cn=np();const tC=jT(cn);var lh={exports:{}},ea={},ah={exports:{}},uh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function eC(){return g_||(g_=1,(function(n){function t(X,lt){var _t=X.length;X.push(lt);t:for(;0<_t;){var Gt=_t-1>>>1,Qt=X[Gt];if(0<r(Qt,lt))X[Gt]=lt,X[_t]=Qt,_t=Gt;else break t}}function e(X){return X.length===0?null:X[0]}function o(X){if(X.length===0)return null;var lt=X[0],_t=X.pop();if(_t!==lt){X[0]=_t;t:for(var Gt=0,Qt=X.length,q=Qt>>>1;Gt<q;){var W=2*(Gt+1)-1,st=X[W],pt=W+1,Et=X[pt];if(0>r(st,_t))pt<Qt&&0>r(Et,st)?(X[Gt]=Et,X[pt]=_t,Gt=pt):(X[Gt]=st,X[W]=_t,Gt=W);else if(pt<Qt&&0>r(Et,_t))X[Gt]=Et,X[pt]=_t,Gt=pt;else break t}}return lt}function r(X,lt){var _t=X.sortIndex-lt.sortIndex;return _t!==0?_t:X.id-lt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var y=[],m=[],v=1,E=null,A=3,I=!1,x=!1,O=!1,U=!1,Q=typeof setTimeout=="function"?setTimeout:null,nt=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function it(X){for(var lt=e(m);lt!==null;){if(lt.callback===null)o(m);else if(lt.startTime<=X)o(m),lt.sortIndex=lt.expirationTime,t(y,lt);else break;lt=e(m)}}function ct(X){if(O=!1,it(X),!x)if(e(y)!==null)x=!0,rt||(rt=!0,G());else{var lt=e(m);lt!==null&&_e(ct,lt.startTime-X)}}var rt=!1,D=-1,M=5,N=-1;function P(){return U?!0:!(n.unstable_now()-N<M)}function L(){if(U=!1,rt){var X=n.unstable_now();N=X;var lt=!0;try{t:{x=!1,O&&(O=!1,nt(D),D=-1),I=!0;var _t=A;try{e:{for(it(X),E=e(y);E!==null&&!(E.expirationTime>X&&P());){var Gt=E.callback;if(typeof Gt=="function"){E.callback=null,A=E.priorityLevel;var Qt=Gt(E.expirationTime<=X);if(X=n.unstable_now(),typeof Qt=="function"){E.callback=Qt,it(X),lt=!0;break e}E===e(y)&&o(y),it(X)}else o(y);E=e(y)}if(E!==null)lt=!0;else{var q=e(m);q!==null&&_e(ct,q.startTime-X),lt=!1}}break t}finally{E=null,A=_t,I=!1}lt=void 0}}finally{lt?G():rt=!1}}}var G;if(typeof Z=="function")G=function(){Z(L)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,Kt=b.port2;b.port1.onmessage=L,G=function(){Kt.postMessage(null)}}else G=function(){Q(L,0)};function _e(X,lt){D=Q(function(){X(n.unstable_now())},lt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(X){switch(A){case 1:case 2:case 3:var lt=3;break;default:lt=A}var _t=A;A=lt;try{return X()}finally{A=_t}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(X,lt){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _t=A;A=X;try{return lt()}finally{A=_t}},n.unstable_scheduleCallback=function(X,lt,_t){var Gt=n.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?Gt+_t:Gt):_t=Gt,X){case 1:var Qt=-1;break;case 2:Qt=250;break;case 5:Qt=1073741823;break;case 4:Qt=1e4;break;default:Qt=5e3}return Qt=_t+Qt,X={id:v++,callback:lt,priorityLevel:X,startTime:_t,expirationTime:Qt,sortIndex:-1},_t>Gt?(X.sortIndex=_t,t(m,X),e(y)===null&&X===e(m)&&(O?(nt(D),D=-1):O=!0,_e(ct,_t-Gt))):(X.sortIndex=Qt,t(y,X),x||I||(x=!0,rt||(rt=!0,G()))),X},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(X){var lt=A;return function(){var _t=A;A=lt;try{return X.apply(this,arguments)}finally{A=_t}}}})(uh)),uh}var y_;function nC(){return y_||(y_=1,ah.exports=eC()),ah.exports}var ch={exports:{}},We={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function iC(){if(__)return We;__=1;var n=np();function t(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var o={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(y,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return We.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,We.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return a(y,m,null,v)},We.flushSync=function(y){var m=c.T,v=o.p;try{if(c.T=null,o.p=2,y)return y()}finally{c.T=m,o.p=v,o.d.f()}},We.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(y,m))},We.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},We.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:I}):v==="script"&&o.d.X(y,{crossOrigin:E,integrity:A,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},We.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);o.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(y)},We.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);o.d.L(y,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},We.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=d(m.as,m.crossOrigin);o.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(y)},We.requestFormReset=function(y){o.d.r(y)},We.unstable_batchedUpdates=function(y,m){return y(m)},We.useFormState=function(y,m,v){return c.H.useFormState(y,m,v)},We.useFormStatus=function(){return c.H.useHostTransitionStatus()},We.version="19.2.3",We}var v_;function oC(){if(v_)return ch.exports;v_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ch.exports=iC(),ch.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function sC(){if(T_)return ea;T_=1;var n=nC(),t=np(),e=oC();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function y(i){if(a(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=a(i),s===null)throw Error(o(188));return s!==i?null:i}for(var l=i,u=s;;){var g=l.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===l)return y(g),i;if(_===u)return y(g),s;_=_.sibling}throw Error(o(188))}if(l.return!==u.return)l=g,u=_;else{for(var S=!1,R=g.child;R;){if(R===l){S=!0,l=g,u=_;break}if(R===u){S=!0,u=g,l=_;break}R=R.sibling}if(!S){for(R=_.child;R;){if(R===l){S=!0,l=_,u=g;break}if(R===u){S=!0,u=_,l=g;break}R=R.sibling}if(!S)throw Error(o(189))}}if(l.alternate!==u)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),nt=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var b=Symbol.for("react.client.reference");function Kt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===b?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case Q:return"Profiler";case U:return"StrictMode";case ct:return"Suspense";case rt:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case Z:return i.displayName||"Context";case nt:return(i._context.displayName||"Context")+".Consumer";case it:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:Kt(i.type)||"Memo";case M:s=i._payload,i=i._init;try{return Kt(i(s))}catch{}}return null}var _e=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t={pending:!1,data:null,method:null,action:null},Gt=[],Qt=-1;function q(i){return{current:i}}function W(i){0>Qt||(i.current=Gt[Qt],Gt[Qt]=null,Qt--)}function st(i,s){Qt++,Gt[Qt]=i.current,i.current=s}var pt=q(null),Et=q(null),Mt=q(null),Lt=q(null);function ke(i,s){switch(st(Mt,s),st(Et,i),st(pt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Uy(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Uy(s),i=Ly(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(pt),st(pt,i)}function ae(){W(pt),W(Et),W(Mt)}function ni(i){i.memoizedState!==null&&st(Lt,i);var s=pt.current,l=Ly(s,i.type);s!==l&&(st(Et,i),st(pt,l))}function _i(i){Et.current===i&&(W(pt),W(Et)),Lt.current===i&&(W(Lt),$l._currentValue=_t)}var $o,ks;function zn(i){if($o===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);$o=s&&s[1]||"",ks=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$o+i+ks}var Wo=!1;function Os(i,s){if(!i||Wo)return"";Wo=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(J){var Y=J}Reflect.construct(i,[],tt)}else{try{tt.call()}catch(J){Y=J}i.call(tt.prototype)}}else{try{throw Error()}catch(J){Y=J}(tt=i())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(J){if(J&&Y&&typeof J.stack=="string")return[J.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],R=_[1];if(S&&R){var V=S.split(`
`),z=R.split(`
`);for(g=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;if(u===V.length||g===z.length)for(u=V.length-1,g=z.length-1;1<=u&&0<=g&&V[u]!==z[g];)g--;for(;1<=u&&0<=g;u--,g--)if(V[u]!==z[g]){if(u!==1||g!==1)do if(u--,g--,0>g||V[u]!==z[g]){var $=`
`+V[u].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=u&&0<=g);break}}}finally{Wo=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?zn(l):""}function ef(i,s){switch(i.tag){case 26:case 27:case 5:return zn(i.type);case 16:return zn("Lazy");case 13:return i.child!==s&&s!==null?zn("Suspense Fallback"):zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return Os(i.type,!1);case 11:return Os(i.type.render,!1);case 1:return Os(i.type,!0);case 31:return zn("Activity");default:return""}}function Da(i){try{var s="",l=null;do s+=ef(i,l),l=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var qs=Object.prototype.hasOwnProperty,Zo=n.unstable_scheduleCallback,Gs=n.unstable_cancelCallback,nf=n.unstable_shouldYield,jr=n.unstable_requestPaint,Oe=n.unstable_now,ba=n.unstable_getCurrentPriorityLevel,Ie=n.unstable_ImmediatePriority,De=n.unstable_UserBlockingPriority,vi=n.unstable_NormalPriority,xa=n.unstable_LowPriority,tl=n.unstable_IdlePriority,of=n.log,jo=n.unstable_setDisableYieldValue,Zi=null,Xe=null;function Mn(i){if(typeof of=="function"&&jo(i),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Zi,i)}catch{}}var nn=Math.clz32?Math.clz32:Va,sf=Math.log,el=Math.LN2;function Va(i){return i>>>=0,i===0?32:31-(sf(i)/el|0)|0}var ts=256,ii=262144,ji=4194304;function Yn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Dn(i,s,l){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var R=u&134217727;return R!==0?(u=R&~_,u!==0?g=Yn(u):(S&=R,S!==0?g=Yn(S):l||(l=R&~i,l!==0&&(g=Yn(l))))):(R=u&~_,R!==0?g=Yn(R):S!==0?g=Yn(S):l||(l=u&~i,l!==0&&(g=Yn(l)))),g===0?0:s!==0&&s!==g&&(s&_)===0&&(_=g&-g,l=s&-s,_>=l||_===32&&(l&4194048)!==0)?s:g}function to(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Bs(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nl(){var i=ji;return ji<<=1,(ji&62914560)===0&&(ji=4194304),i}function Ti(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function eo(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function qe(i,s,l,u,g,_){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,V=i.expirationTimes,z=i.hiddenUpdates;for(l=S&~l;0<l;){var $=31-nn(l),tt=1<<$;R[$]=0,V[$]=-1;var Y=z[$];if(Y!==null)for(z[$]=null,$=0;$<Y.length;$++){var J=Y[$];J!==null&&(J.lane&=-536870913)}l&=~tt}u!==0&&il(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~s))}function il(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-nn(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|l&261930}function no(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var u=31-nn(l),g=1<<u;g&s|i[u]&s&&(i[u]|=s),l&=~g}}function io(i,s){var l=s&-s;return l=(l&42)!==0?1:ol(l),(l&(i.suspendedLanes|s))!==0?0:l}function ol(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function sl(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ei(){var i=lt.p;return i!==0?i:(i=window.event,i===void 0?32:s_(i.type))}function Pa(i,s){var l=lt.p;try{return lt.p=i,s()}finally{lt.p=l}}var oi=Math.random().toString(36).slice(2),ce="__reactFiber$"+oi,Ge="__reactProps$"+oi,si="__reactContainer$"+oi,oo="__reactEvents$"+oi,ri="__reactListeners$"+oi,Ua="__reactHandles$"+oi,rl="__reactResources$"+oi,Ai="__reactMarker$"+oi;function es(i){delete i[ce],delete i[Ge],delete i[oo],delete i[ri],delete i[Ua]}function Si(i){var s=i[ce];if(s)return s;for(var l=i.parentNode;l;){if(s=l[si]||l[ce]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=Hy(i);i!==null;){if(l=i[ce])return l;i=Hy(i)}return s}i=l,l=i.parentNode}return null}function Ci(i){if(i=i[ce]||i[si]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ns(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function Jn(i){var s=i[rl];return s||(s=i[rl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function pe(i){i[Ai]=!0}var Fs=new Set,so={};function on(i,s){li(i,s),li(i+"Capture",s)}function li(i,s){for(so[i]=s,i=0;i<s.length;i++)Fs.add(s[i])}var rf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ll={},al={};function La(i){return qs.call(al,i)?!0:qs.call(ll,i)?!1:rf.test(i)?al[i]=!0:(ll[i]=!0,!1)}function ro(i,s,l){if(La(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function lo(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function bn(i,s,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+u)}}function sn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ka(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lf(i,s,l){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){l=""+S,_.call(this,S)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Hs(i){if(!i._valueTracker){var s=ka(i)?"checked":"value";i._valueTracker=lf(i,s,""+i[s])}}function ul(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return i&&(u=ka(i)?i.checked?"true":"false":i.value),i=u,i!==l?(s.setValue(i),!0):!1}function zs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ri=/[\n"\\]/g;function fe(i){return i.replace(Ri,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ao(i,s,l,u,g,_,S,R){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),s!=null?S==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+sn(s)):i.value!==""+sn(s)&&(i.value=""+sn(s)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),s!=null?Ys(i,S,sn(s)):l!=null?Ys(i,S,sn(l)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+sn(R):i.removeAttribute("name")}function is(i,s,l,u,g,_,S,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Hs(i);return}l=l!=null?""+sn(l):"",s=s!=null?""+sn(s):l,R||s===i.value||(i.value=s),i.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=R?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Hs(i)}function Ys(i,s,l){s==="number"&&zs(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Bt(i,s,l,u){if(i=i.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=s.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&u&&(i[l].defaultSelected=!0)}else{for(l=""+sn(l),s=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function os(i,s,l){if(s!=null&&(s=""+sn(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+sn(l):""}function uo(i,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(o(92));if(_e(u)){if(1<u.length)throw Error(o(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=sn(s),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u),Hs(i)}function xn(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var af=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cl(i,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,l):typeof l!="number"||l===0||af.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function Oa(i,s,l){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&l[g]!==u&&cl(i,g,u)}else for(var _ in s)s.hasOwnProperty(_)&&cl(i,_,s[_])}function fl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ai(i){return cf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function be(){}var Js=null;function Ks(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ii=null,vn=null;function qa(i){var s=Ci(i);if(s&&(i=s.stateNode)){var l=i[Ge]||null;t:switch(i=s.stateNode,s.type){case"input":if(ao(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+fe(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==i&&u.form===i.form){var g=u[Ge]||null;if(!g)throw Error(o(90));ao(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===i.form&&ul(u)}break t;case"textarea":os(i,l.value,l.defaultValue);break t;case"select":s=l.value,s!=null&&Bt(i,!!l.multiple,s,!1)}}}var dl=!1;function Ga(i,s,l){if(dl)return i(s,l);dl=!0;try{var u=i(s);return u}finally{if(dl=!1,(Ii!==null||vn!==null)&&(Lu(),Ii&&(s=Ii,i=vn,vn=Ii=null,qa(s),i)))for(s=0;s<i.length;s++)qa(i[s])}}function dn(i,s){var l=i.stateNode;if(l===null)return null;var u=l[Ge]||null;if(u===null)return null;l=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(o(231,s,typeof l));return l}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=!1;if(Kn)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){hl=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{hl=!1}var Tn=null,Qs=null,ci=null;function co(){if(ci)return ci;var i,s=Qs,l=s.length,u,g="value"in Tn?Tn.value:Tn.textContent,_=g.length;for(i=0;i<l&&s[i]===g[i];i++);var S=l-i;for(u=1;u<=S&&s[l-u]===g[_-u];u++);return ci=g.slice(i,1<u?1-u:void 0)}function ss(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function fo(){return!0}function ie(){return!1}function $e(i){function s(l,u,g,_,S){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?fo:ie,this.isPropagationStopped=ie,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),s}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=$e(wi),ho=E({},wi,{view:0,detail:0}),Ba=$e(ho),po,Xs,rn,ls=E({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:go,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==rn&&(rn&&i.type==="mousemove"?(po=i.screenX-rn.screenX,Xs=i.screenY-rn.screenY):Xs=po=0,rn=i),po)},movementY:function(i){return"movementY"in i?i.movementY:Xs}}),Fa=$e(ls),as=E({},ls,{dataTransfer:0}),Ha=$e(as),pl=E({},ho,{relatedTarget:0}),mo=$e(pl),za=E({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),$s=$e(za),ff=E({},wi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ya=$e(ff),us=E({},wi,{data:0}),ml=$e(us),Ja={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ka(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=yl[i])?!!s[i]:!1}function go(){return Ka}var Qa=E({},ho,{key:function(i){if(i.key){var s=Ja[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ss(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:go,charCode:function(i){return i.type==="keypress"?ss(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ss(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Xa=$e(Qa),Ni=E({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_l=$e(Ni),$a=E({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:go}),Wa=$e($a),Za=E({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ws=$e(Za),ln=E({},ls,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ja=$e(ln),tu=E({},wi,{newState:0,oldState:0}),yo=$e(tu),h=[9,13,27,32],T=Kn&&"CompositionEvent"in window,C=null;Kn&&"documentMode"in document&&(C=document.documentMode);var w=Kn&&"TextEvent"in window&&!C,F=Kn&&(!T||C&&8<C&&11>=C),K=" ",at=!1;function Xt(i,s){switch(i){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Dt=!1;function xe(i,s){switch(i){case"compositionend":return ve(s);case"keypress":return s.which!==32?null:(at=!0,K);case"textInput":return i=s.data,i===K&&at?null:i;default:return null}}function Ve(i,s){if(Dt)return i==="compositionend"||!T&&Xt(i,s)?(i=co(),ci=Qs=Tn=null,Dt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return F&&s.locale!=="ko"?null:s.data;default:return null}}var _o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!_o[i.type]:s==="textarea"}function cs(i,s,l,u){Ii?vn?vn.push(u):vn=[u]:Ii=u,s=Hu(s,"onChange"),0<s.length&&(l=new rs("onChange","change",null,l,u),i.push({event:l,listeners:s}))}var Mi=null,vl=null;function CA(i){My(i,0)}function eu(i){var s=ns(i);if(ul(s))return i}function Qp(i,s){if(i==="change")return s}var Xp=!1;if(Kn){var df;if(Kn){var hf="oninput"in document;if(!hf){var $p=document.createElement("div");$p.setAttribute("oninput","return;"),hf=typeof $p.oninput=="function"}df=hf}else df=!1;Xp=df&&(!document.documentMode||9<document.documentMode)}function Wp(){Mi&&(Mi.detachEvent("onpropertychange",Zp),vl=Mi=null)}function Zp(i){if(i.propertyName==="value"&&eu(vl)){var s=[];cs(s,vl,i,Ks(i)),Ga(CA,s)}}function RA(i,s,l){i==="focusin"?(Wp(),Mi=s,vl=l,Mi.attachEvent("onpropertychange",Zp)):i==="focusout"&&Wp()}function IA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return eu(vl)}function wA(i,s){if(i==="click")return eu(s)}function NA(i,s){if(i==="input"||i==="change")return eu(s)}function MA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var En=typeof Object.is=="function"?Object.is:MA;function Tl(i,s){if(En(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!qs.call(s,g)||!En(i[g],s[g]))return!1}return!0}function jp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tm(i,s){var l=jp(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=s&&u>=s)return{node:l,offset:s-i};i=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=jp(l)}}function em(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?em(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function nm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=zs(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=zs(i.document)}return s}function pf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var DA=Kn&&"documentMode"in document&&11>=document.documentMode,Zs=null,mf=null,El=null,gf=!1;function im(i,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;gf||Zs==null||Zs!==zs(u)||(u=Zs,"selectionStart"in u&&pf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),El&&Tl(El,u)||(El=u,u=Hu(mf,"onSelect"),0<u.length&&(s=new rs("onSelect","select",null,s,l),i.push({event:s,listeners:u}),s.target=Zs)))}function fs(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var js={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},yf={},om={};Kn&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function ds(i){if(yf[i])return yf[i];if(!js[i])return i;var s=js[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in om)return yf[i]=s[l];return i}var sm=ds("animationend"),rm=ds("animationiteration"),lm=ds("animationstart"),bA=ds("transitionrun"),xA=ds("transitionstart"),VA=ds("transitioncancel"),am=ds("transitionend"),um=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Qn(i,s){um.set(i,s),on(s,[i])}var nu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Vn=[],tr=0,vf=0;function iu(){for(var i=tr,s=vf=tr=0;s<i;){var l=Vn[s];Vn[s++]=null;var u=Vn[s];Vn[s++]=null;var g=Vn[s];Vn[s++]=null;var _=Vn[s];if(Vn[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}_!==0&&cm(l,g,_)}}function ou(i,s,l,u){Vn[tr++]=i,Vn[tr++]=s,Vn[tr++]=l,Vn[tr++]=u,vf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Tf(i,s,l,u){return ou(i,s,l,u),su(i)}function hs(i,s){return ou(i,null,null,s),su(i)}function cm(i,s,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var g=!1,_=i.return;_!==null;)_.childLanes|=l,u=_.alternate,u!==null&&(u.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&s!==null&&(g=31-nn(l),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[s]:u.push(s),s.lane=l|536870912),_):null}function su(i){if(50<Hl)throw Hl=0,Md=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var er={};function PA(i,s,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,s,l,u){return new PA(i,s,l,u)}function Ef(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Di(i,s){var l=i.alternate;return l===null?(l=An(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function fm(i,s){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ru(i,s,l,u,g,_){var S=0;if(u=i,typeof i=="function")Ef(i)&&(S=1);else if(typeof i=="string")S=qS(i,l,pt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case N:return i=An(31,l,s,g),i.elementType=N,i.lanes=_,i;case O:return ps(l.children,g,_,s);case U:S=8,g|=24;break;case Q:return i=An(12,l,s,g|2),i.elementType=Q,i.lanes=_,i;case ct:return i=An(13,l,s,g),i.elementType=ct,i.lanes=_,i;case rt:return i=An(19,l,s,g),i.elementType=rt,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:S=10;break t;case nt:S=9;break t;case it:S=11;break t;case D:S=14;break t;case M:S=16,u=null;break t}S=29,l=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=An(S,l,s,g),s.elementType=i,s.type=u,s.lanes=_,s}function ps(i,s,l,u){return i=An(7,i,u,s),i.lanes=l,i}function Af(i,s,l){return i=An(6,i,null,s),i.lanes=l,i}function dm(i){var s=An(18,null,null,0);return s.stateNode=i,s}function Sf(i,s,l){return s=An(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var hm=new WeakMap;function Pn(i,s){if(typeof i=="object"&&i!==null){var l=hm.get(i);return l!==void 0?l:(s={value:i,source:s,stack:Da(s)},hm.set(i,s),s)}return{value:i,source:s,stack:Da(s)}}var nr=[],ir=0,lu=null,Al=0,Un=[],Ln=0,vo=null,fi=1,di="";function bi(i,s){nr[ir++]=Al,nr[ir++]=lu,lu=i,Al=s}function pm(i,s,l){Un[Ln++]=fi,Un[Ln++]=di,Un[Ln++]=vo,vo=i;var u=fi;i=di;var g=32-nn(u)-1;u&=~(1<<g),l+=1;var _=32-nn(s)+g;if(30<_){var S=g-g%5;_=(u&(1<<S)-1).toString(32),u>>=S,g-=S,fi=1<<32-nn(s)+g|l<<g|u,di=_+i}else fi=1<<_|l<<g|u,di=i}function Cf(i){i.return!==null&&(bi(i,1),pm(i,1,0))}function Rf(i){for(;i===lu;)lu=nr[--ir],nr[ir]=null,Al=nr[--ir],nr[ir]=null;for(;i===vo;)vo=Un[--Ln],Un[Ln]=null,di=Un[--Ln],Un[Ln]=null,fi=Un[--Ln],Un[Ln]=null}function mm(i,s){Un[Ln++]=fi,Un[Ln++]=di,Un[Ln++]=vo,fi=s.id,di=s.overflow,vo=i}var Be=null,oe=null,kt=!1,To=null,kn=!1,If=Error(o(519));function Eo(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(Pn(s,i)),If}function gm(i){var s=i.stateNode,l=i.type,u=i.memoizedProps;switch(s[ce]=i,s[Ge]=u,l){case"dialog":xt("cancel",s),xt("close",s);break;case"iframe":case"object":case"embed":xt("load",s);break;case"video":case"audio":for(l=0;l<Yl.length;l++)xt(Yl[l],s);break;case"source":xt("error",s);break;case"img":case"image":case"link":xt("error",s),xt("load",s);break;case"details":xt("toggle",s);break;case"input":xt("invalid",s),is(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xt("invalid",s);break;case"textarea":xt("invalid",s),uo(s,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||Vy(s.textContent,l)?(u.popover!=null&&(xt("beforetoggle",s),xt("toggle",s)),u.onScroll!=null&&xt("scroll",s),u.onScrollEnd!=null&&xt("scrollend",s),u.onClick!=null&&(s.onclick=be),s=!0):s=!1,s||Eo(i,!0)}function ym(i){for(Be=i.return;Be;)switch(Be.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Be=Be.return}}function or(i){if(i!==Be)return!1;if(!kt)return ym(i),kt=!0,!1;var s=i.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||zd(i.type,i.memoizedProps)),l=!l),l&&oe&&Eo(i),ym(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));oe=Fy(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));oe=Fy(i)}else s===27?(s=oe,Uo(i.type)?(i=Xd,Xd=null,oe=i):oe=s):oe=Be?qn(i.stateNode.nextSibling):null;return!0}function ms(){oe=Be=null,kt=!1}function wf(){var i=To;return i!==null&&(yn===null?yn=i:yn.push.apply(yn,i),To=null),i}function Sl(i){To===null?To=[i]:To.push(i)}var Nf=q(null),gs=null,xi=null;function Ao(i,s,l){st(Nf,s._currentValue),s._currentValue=l}function Vi(i){i._currentValue=Nf.current,W(Nf)}function Mf(i,s,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===l)break;i=i.return}}function Df(i,s,l,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var S=g.child;_=_.firstContext;t:for(;_!==null;){var R=_;_=g;for(var V=0;V<s.length;V++)if(R.context===s[V]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),Mf(_.return,l,i),u||(S=null);break t}_=R.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(o(341));S.lanes|=l,_=S.alternate,_!==null&&(_.lanes|=l),Mf(S,l,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function sr(i,s,l,u){i=null;for(var g=s,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var R=g.type;En(g.pendingProps.value,S.value)||(i!==null?i.push(R):i=[R])}}else if(g===Lt.current){if(S=g.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push($l):i=[$l])}g=g.return}i!==null&&Df(s,i,l,u),s.flags|=262144}function au(i){for(i=i.firstContext;i!==null;){if(!En(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ys(i){gs=i,xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Fe(i){return _m(gs,i)}function uu(i,s){return gs===null&&ys(i),_m(i,s)}function _m(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},xi===null){if(i===null)throw Error(o(308));xi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else xi=xi.next=s;return l}var UA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},LA=n.unstable_scheduleCallback,kA=n.unstable_NormalPriority,Te={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bf(){return{controller:new UA,data:new Map,refCount:0}}function Cl(i){i.refCount--,i.refCount===0&&LA(kA,function(){i.controller.abort()})}var Rl=null,xf=0,rr=0,lr=null;function OA(i,s){if(Rl===null){var l=Rl=[];xf=0,rr=Ud(),lr={status:"pending",value:void 0,then:function(u){l.push(u)}}}return xf++,s.then(vm,vm),s}function vm(){if(--xf===0&&Rl!==null){lr!==null&&(lr.status="fulfilled");var i=Rl;Rl=null,rr=0,lr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function qA(i,s){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<l.length;g++)(0,l[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var Tm=X.S;X.S=function(i,s){iy=Oe(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&OA(i,s),Tm!==null&&Tm(i,s)};var _s=q(null);function Vf(){var i=_s.current;return i!==null?i:ne.pooledCache}function cu(i,s){s===null?st(_s,_s.current):st(_s,s.pool)}function Em(){var i=Vf();return i===null?null:{parent:Te._currentValue,pool:i}}var ar=Error(o(460)),Pf=Error(o(474)),fu=Error(o(542)),du={then:function(){}};function Am(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Sm(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(be,be),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Rm(i),i;default:if(typeof s.status=="string")s.then(be,be);else{if(i=ne,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Rm(i),i}throw Ts=s,ar}}function vs(i){try{var s=i._init;return s(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ts=l,ar):l}}var Ts=null;function Cm(){if(Ts===null)throw Error(o(459));var i=Ts;return Ts=null,i}function Rm(i){if(i===ar||i===fu)throw Error(o(483))}var ur=null,Il=0;function hu(i){var s=Il;return Il+=1,ur===null&&(ur=[]),Sm(ur,i,s)}function wl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function pu(i,s){throw s.$$typeof===A?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Im(i){function s(B,k){if(i){var H=B.deletions;H===null?(B.deletions=[k],B.flags|=16):H.push(k)}}function l(B,k){if(!i)return null;for(;k!==null;)s(B,k),k=k.sibling;return null}function u(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function g(B,k){return B=Di(B,k),B.index=0,B.sibling=null,B}function _(B,k,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<k?(B.flags|=67108866,k):H):(B.flags|=67108866,k)):(B.flags|=1048576,k)}function S(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function R(B,k,H,j){return k===null||k.tag!==6?(k=Af(H,B.mode,j),k.return=B,k):(k=g(k,H),k.return=B,k)}function V(B,k,H,j){var yt=H.type;return yt===O?$(B,k,H.props.children,j,H.key):k!==null&&(k.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===M&&vs(yt)===k.type)?(k=g(k,H.props),wl(k,H),k.return=B,k):(k=ru(H.type,H.key,H.props,null,B.mode,j),wl(k,H),k.return=B,k)}function z(B,k,H,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=Sf(H,B.mode,j),k.return=B,k):(k=g(k,H.children||[]),k.return=B,k)}function $(B,k,H,j,yt){return k===null||k.tag!==7?(k=ps(H,B.mode,j,yt),k.return=B,k):(k=g(k,H),k.return=B,k)}function tt(B,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Af(""+k,B.mode,H),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case I:return H=ru(k.type,k.key,k.props,null,B.mode,H),wl(H,k),H.return=B,H;case x:return k=Sf(k,B.mode,H),k.return=B,k;case M:return k=vs(k),tt(B,k,H)}if(_e(k)||G(k))return k=ps(k,B.mode,H,null),k.return=B,k;if(typeof k.then=="function")return tt(B,hu(k),H);if(k.$$typeof===Z)return tt(B,uu(B,k),H);pu(B,k)}return null}function Y(B,k,H,j){var yt=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return yt!==null?null:R(B,k,""+H,j);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case I:return H.key===yt?V(B,k,H,j):null;case x:return H.key===yt?z(B,k,H,j):null;case M:return H=vs(H),Y(B,k,H,j)}if(_e(H)||G(H))return yt!==null?null:$(B,k,H,j,null);if(typeof H.then=="function")return Y(B,k,hu(H),j);if(H.$$typeof===Z)return Y(B,k,uu(B,H),j);pu(B,H)}return null}function J(B,k,H,j,yt){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return B=B.get(H)||null,R(k,B,""+j,yt);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return B=B.get(j.key===null?H:j.key)||null,V(k,B,j,yt);case x:return B=B.get(j.key===null?H:j.key)||null,z(k,B,j,yt);case M:return j=vs(j),J(B,k,H,j,yt)}if(_e(j)||G(j))return B=B.get(H)||null,$(k,B,j,yt,null);if(typeof j.then=="function")return J(B,k,H,hu(j),yt);if(j.$$typeof===Z)return J(B,k,H,uu(k,j),yt);pu(k,j)}return null}function dt(B,k,H,j){for(var yt=null,Ft=null,gt=k,Nt=k=0,Pt=null;gt!==null&&Nt<H.length;Nt++){gt.index>Nt?(Pt=gt,gt=null):Pt=gt.sibling;var Ht=Y(B,gt,H[Nt],j);if(Ht===null){gt===null&&(gt=Pt);break}i&&gt&&Ht.alternate===null&&s(B,gt),k=_(Ht,k,Nt),Ft===null?yt=Ht:Ft.sibling=Ht,Ft=Ht,gt=Pt}if(Nt===H.length)return l(B,gt),kt&&bi(B,Nt),yt;if(gt===null){for(;Nt<H.length;Nt++)gt=tt(B,H[Nt],j),gt!==null&&(k=_(gt,k,Nt),Ft===null?yt=gt:Ft.sibling=gt,Ft=gt);return kt&&bi(B,Nt),yt}for(gt=u(gt);Nt<H.length;Nt++)Pt=J(gt,B,Nt,H[Nt],j),Pt!==null&&(i&&Pt.alternate!==null&&gt.delete(Pt.key===null?Nt:Pt.key),k=_(Pt,k,Nt),Ft===null?yt=Pt:Ft.sibling=Pt,Ft=Pt);return i&&gt.forEach(function(Go){return s(B,Go)}),kt&&bi(B,Nt),yt}function Tt(B,k,H,j){if(H==null)throw Error(o(151));for(var yt=null,Ft=null,gt=k,Nt=k=0,Pt=null,Ht=H.next();gt!==null&&!Ht.done;Nt++,Ht=H.next()){gt.index>Nt?(Pt=gt,gt=null):Pt=gt.sibling;var Go=Y(B,gt,Ht.value,j);if(Go===null){gt===null&&(gt=Pt);break}i&&gt&&Go.alternate===null&&s(B,gt),k=_(Go,k,Nt),Ft===null?yt=Go:Ft.sibling=Go,Ft=Go,gt=Pt}if(Ht.done)return l(B,gt),kt&&bi(B,Nt),yt;if(gt===null){for(;!Ht.done;Nt++,Ht=H.next())Ht=tt(B,Ht.value,j),Ht!==null&&(k=_(Ht,k,Nt),Ft===null?yt=Ht:Ft.sibling=Ht,Ft=Ht);return kt&&bi(B,Nt),yt}for(gt=u(gt);!Ht.done;Nt++,Ht=H.next())Ht=J(gt,B,Nt,Ht.value,j),Ht!==null&&(i&&Ht.alternate!==null&&gt.delete(Ht.key===null?Nt:Ht.key),k=_(Ht,k,Nt),Ft===null?yt=Ht:Ft.sibling=Ht,Ft=Ht);return i&&gt.forEach(function($S){return s(B,$S)}),kt&&bi(B,Nt),yt}function ee(B,k,H,j){if(typeof H=="object"&&H!==null&&H.type===O&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case I:t:{for(var yt=H.key;k!==null;){if(k.key===yt){if(yt=H.type,yt===O){if(k.tag===7){l(B,k.sibling),j=g(k,H.props.children),j.return=B,B=j;break t}}else if(k.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===M&&vs(yt)===k.type){l(B,k.sibling),j=g(k,H.props),wl(j,H),j.return=B,B=j;break t}l(B,k);break}else s(B,k);k=k.sibling}H.type===O?(j=ps(H.props.children,B.mode,j,H.key),j.return=B,B=j):(j=ru(H.type,H.key,H.props,null,B.mode,j),wl(j,H),j.return=B,B=j)}return S(B);case x:t:{for(yt=H.key;k!==null;){if(k.key===yt)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){l(B,k.sibling),j=g(k,H.children||[]),j.return=B,B=j;break t}else{l(B,k);break}else s(B,k);k=k.sibling}j=Sf(H,B.mode,j),j.return=B,B=j}return S(B);case M:return H=vs(H),ee(B,k,H,j)}if(_e(H))return dt(B,k,H,j);if(G(H)){if(yt=G(H),typeof yt!="function")throw Error(o(150));return H=yt.call(H),Tt(B,k,H,j)}if(typeof H.then=="function")return ee(B,k,hu(H),j);if(H.$$typeof===Z)return ee(B,k,uu(B,H),j);pu(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(l(B,k.sibling),j=g(k,H),j.return=B,B=j):(l(B,k),j=Af(H,B.mode,j),j.return=B,B=j),S(B)):l(B,k)}return function(B,k,H,j){try{Il=0;var yt=ee(B,k,H,j);return ur=null,yt}catch(gt){if(gt===ar||gt===fu)throw gt;var Ft=An(29,gt,null,B.mode);return Ft.lanes=j,Ft.return=B,Ft}finally{}}}var Es=Im(!0),wm=Im(!1),So=!1;function Uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lf(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Co(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ro(i,s,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Jt&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=su(i),cm(i,null,l),s}return ou(i,u,s,l),su(i)}function Nl(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,no(i,l)}}function kf(i,s){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?g=_=S:_=_.next=S,l=l.next}while(l!==null);_===null?g=_=s:_=_.next=s}else g=_=s;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var Of=!1;function Ml(){if(Of){var i=lr;if(i!==null)throw i}}function Dl(i,s,l,u){Of=!1;var g=i.updateQueue;So=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var V=R,z=V.next;V.next=null,S===null?_=z:S.next=z,S=V;var $=i.alternate;$!==null&&($=$.updateQueue,R=$.lastBaseUpdate,R!==S&&(R===null?$.firstBaseUpdate=z:R.next=z,$.lastBaseUpdate=V))}if(_!==null){var tt=g.baseState;S=0,$=z=V=null,R=_;do{var Y=R.lane&-536870913,J=Y!==R.lane;if(J?(Vt&Y)===Y:(u&Y)===Y){Y!==0&&Y===rr&&(Of=!0),$!==null&&($=$.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var dt=i,Tt=R;Y=s;var ee=l;switch(Tt.tag){case 1:if(dt=Tt.payload,typeof dt=="function"){tt=dt.call(ee,tt,Y);break t}tt=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=Tt.payload,Y=typeof dt=="function"?dt.call(ee,tt,Y):dt,Y==null)break t;tt=E({},tt,Y);break t;case 2:So=!0}}Y=R.callback,Y!==null&&(i.flags|=64,J&&(i.flags|=8192),J=g.callbacks,J===null?g.callbacks=[Y]:J.push(Y))}else J={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},$===null?(z=$=J,V=tt):$=$.next=J,S|=Y;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;J=R,R=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);$===null&&(V=tt),g.baseState=V,g.firstBaseUpdate=z,g.lastBaseUpdate=$,_===null&&(g.shared.lanes=0),Do|=S,i.lanes=S,i.memoizedState=tt}}function Nm(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function Mm(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Nm(l[i],s)}var cr=q(null),mu=q(0);function Dm(i,s){i=Fi,st(mu,i),st(cr,s),Fi=i|s.baseLanes}function qf(){st(mu,Fi),st(cr,cr.current)}function Gf(){Fi=mu.current,W(cr),W(mu)}var Sn=q(null),On=null;function Io(i){var s=i.alternate;st(me,me.current&1),st(Sn,i),On===null&&(s===null||cr.current!==null||s.memoizedState!==null)&&(On=i)}function Bf(i){st(me,me.current),st(Sn,i),On===null&&(On=i)}function bm(i){i.tag===22?(st(me,me.current),st(Sn,i),On===null&&(On=i)):wo()}function wo(){st(me,me.current),st(Sn,Sn.current)}function Cn(i){W(Sn),On===i&&(On=null),W(me)}var me=q(0);function gu(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Kd(l)||Qd(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pi=0,wt=null,jt=null,Ee=null,yu=!1,fr=!1,As=!1,_u=0,bl=0,dr=null,GA=0;function de(){throw Error(o(321))}function Ff(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!En(i[l],s[l]))return!1;return!0}function Hf(i,s,l,u,g,_){return Pi=_,wt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=i===null||i.memoizedState===null?pg:od,As=!1,_=l(u,g),As=!1,fr&&(_=Vm(s,l,u,g)),xm(i),_}function xm(i){X.H=Pl;var s=jt!==null&&jt.next!==null;if(Pi=0,Ee=jt=wt=null,yu=!1,bl=0,dr=null,s)throw Error(o(300));i===null||Ae||(i=i.dependencies,i!==null&&au(i)&&(Ae=!0))}function Vm(i,s,l,u){wt=i;var g=0;do{if(fr&&(dr=null),bl=0,fr=!1,25<=g)throw Error(o(301));if(g+=1,Ee=jt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=mg,_=s(l,u)}while(fr);return _}function BA(){var i=X.H,s=i.useState()[0];return s=typeof s.then=="function"?xl(s):s,i=i.useState()[0],(jt!==null?jt.memoizedState:null)!==i&&(wt.flags|=1024),s}function zf(){var i=_u!==0;return _u=0,i}function Yf(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function Jf(i){if(yu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}yu=!1}Pi=0,Ee=jt=wt=null,fr=!1,bl=_u=0,dr=null}function an(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?wt.memoizedState=Ee=i:Ee=Ee.next=i,Ee}function ge(){if(jt===null){var i=wt.alternate;i=i!==null?i.memoizedState:null}else i=jt.next;var s=Ee===null?wt.memoizedState:Ee.next;if(s!==null)Ee=s,jt=i;else{if(i===null)throw wt.alternate===null?Error(o(467)):Error(o(310));jt=i,i={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ee===null?wt.memoizedState=Ee=i:Ee=Ee.next=i}return Ee}function vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(i){var s=bl;return bl+=1,dr===null&&(dr=[]),i=Sm(dr,i,s),s=wt,(Ee===null?s.memoizedState:Ee.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?pg:od),i}function Tu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return xl(i);if(i.$$typeof===Z)return Fe(i)}throw Error(o(438,String(i)))}function Kf(i){var s=null,l=wt.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=wt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=vu(),wt.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),u=0;u<i;u++)l[u]=P;return s.index++,l}function Ui(i,s){return typeof s=="function"?s(i):s}function Eu(i){var s=ge();return Qf(s,jt,i)}function Qf(i,s,l){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=l;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}s.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{s=g.next;var R=S=null,V=null,z=s,$=!1;do{var tt=z.lane&-536870913;if(tt!==z.lane?(Vt&tt)===tt:(Pi&tt)===tt){var Y=z.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),tt===rr&&($=!0);else if((Pi&Y)===Y){z=z.next,Y===rr&&($=!0);continue}else tt={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},V===null?(R=V=tt,S=_):V=V.next=tt,wt.lanes|=Y,Do|=Y;tt=z.action,As&&l(_,tt),_=z.hasEagerState?z.eagerState:l(_,tt)}else Y={lane:tt,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},V===null?(R=V=Y,S=_):V=V.next=Y,wt.lanes|=tt,Do|=tt;z=z.next}while(z!==null&&z!==s);if(V===null?S=_:V.next=R,!En(_,i.memoizedState)&&(Ae=!0,$&&(l=lr,l!==null)))throw l;i.memoizedState=_,i.baseState=S,i.baseQueue=V,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Xf(i){var s=ge(),l=s.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=i;var u=l.dispatch,g=l.pending,_=s.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do _=i(_,S.action),S=S.next;while(S!==g);En(_,s.memoizedState)||(Ae=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),l.lastRenderedState=_}return[_,u]}function Pm(i,s,l){var u=wt,g=ge(),_=kt;if(_){if(l===void 0)throw Error(o(407));l=l()}else l=s();var S=!En((jt||g).memoizedState,l);if(S&&(g.memoizedState=l,Ae=!0),g=g.queue,Zf(km.bind(null,u,g,i),[i]),g.getSnapshot!==s||S||Ee!==null&&Ee.memoizedState.tag&1){if(u.flags|=2048,hr(9,{destroy:void 0},Lm.bind(null,u,g,l,s),null),ne===null)throw Error(o(349));_||(Pi&127)!==0||Um(u,s,l)}return l}function Um(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=wt.updateQueue,s===null?(s=vu(),wt.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function Lm(i,s,l,u){s.value=l,s.getSnapshot=u,Om(s)&&qm(i)}function km(i,s,l){return l(function(){Om(s)&&qm(i)})}function Om(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!En(i,l)}catch{return!0}}function qm(i){var s=hs(i,2);s!==null&&_n(s,i,2)}function $f(i){var s=an();if(typeof i=="function"){var l=i;if(i=l(),As){Mn(!0);try{l()}finally{Mn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:i},s}function Gm(i,s,l,u){return i.baseState=l,Qf(i,jt,typeof u=="function"?u:Ui)}function FA(i,s,l,u,g){if(Cu(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};X.T!==null?l(!0):_.isTransition=!1,u(_),l=s.pending,l===null?(_.next=s.pending=_,Bm(s,_)):(_.next=l.next,s.pending=l.next=_)}}function Bm(i,s){var l=s.action,u=s.payload,g=i.state;if(s.isTransition){var _=X.T,S={};X.T=S;try{var R=l(g,u),V=X.S;V!==null&&V(S,R),Fm(i,s,R)}catch(z){Wf(i,s,z)}finally{_!==null&&S.types!==null&&(_.types=S.types),X.T=_}}else try{_=l(g,u),Fm(i,s,_)}catch(z){Wf(i,s,z)}}function Fm(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Hm(i,s,u)},function(u){return Wf(i,s,u)}):Hm(i,s,l)}function Hm(i,s,l){s.status="fulfilled",s.value=l,zm(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,Bm(i,l)))}function Wf(i,s,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,zm(s),s=s.next;while(s!==u)}i.action=null}function zm(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Ym(i,s){return s}function Jm(i,s){if(kt){var l=ne.formState;if(l!==null){t:{var u=wt;if(kt){if(oe){e:{for(var g=oe,_=kn;g.nodeType!==8;){if(!_){g=null;break e}if(g=qn(g.nextSibling),g===null){g=null;break e}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){oe=qn(g.nextSibling),u=g.data==="F!";break t}}Eo(u)}u=!1}u&&(s=l[0])}}return l=an(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ym,lastRenderedState:s},l.queue=u,l=fg.bind(null,wt,u),u.dispatch=l,u=$f(!1),_=id.bind(null,wt,!1,u.queue),u=an(),g={state:s,dispatch:null,action:i,pending:null},u.queue=g,l=FA.bind(null,wt,g,_,l),g.dispatch=l,u.memoizedState=i,[s,l,!1]}function Km(i){var s=ge();return Qm(s,jt,i)}function Qm(i,s,l){if(s=Qf(i,s,Ym)[0],i=Eu(Ui)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=xl(s)}catch(S){throw S===ar?fu:S}else u=s;s=ge();var g=s.queue,_=g.dispatch;return l!==s.memoizedState&&(wt.flags|=2048,hr(9,{destroy:void 0},HA.bind(null,g,l),null)),[u,_,i]}function HA(i,s){i.action=s}function Xm(i){var s=ge(),l=jt;if(l!==null)return Qm(s,l,i);ge(),s=s.memoizedState,l=ge();var u=l.queue.dispatch;return l.memoizedState=i,[s,u,!1]}function hr(i,s,l,u){return i={tag:i,create:l,deps:u,inst:s,next:null},s=wt.updateQueue,s===null&&(s=vu(),wt.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,s.lastEffect=i),i}function $m(){return ge().memoizedState}function Au(i,s,l,u){var g=an();wt.flags|=i,g.memoizedState=hr(1|s,{destroy:void 0},l,u===void 0?null:u)}function Su(i,s,l,u){var g=ge();u=u===void 0?null:u;var _=g.memoizedState.inst;jt!==null&&u!==null&&Ff(u,jt.memoizedState.deps)?g.memoizedState=hr(s,_,l,u):(wt.flags|=i,g.memoizedState=hr(1|s,_,l,u))}function Wm(i,s){Au(8390656,8,i,s)}function Zf(i,s){Su(2048,8,i,s)}function zA(i){wt.flags|=4;var s=wt.updateQueue;if(s===null)s=vu(),wt.updateQueue=s,s.events=[i];else{var l=s.events;l===null?s.events=[i]:l.push(i)}}function Zm(i){var s=ge().memoizedState;return zA({ref:s,nextImpl:i}),function(){if((Jt&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function jm(i,s){return Su(4,2,i,s)}function tg(i,s){return Su(4,4,i,s)}function eg(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function ng(i,s,l){l=l!=null?l.concat([i]):null,Su(4,4,eg.bind(null,s,i),l)}function jf(){}function ig(i,s){var l=ge();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&Ff(s,u[1])?u[0]:(l.memoizedState=[i,s],i)}function og(i,s){var l=ge();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&Ff(s,u[1]))return u[0];if(u=i(),As){Mn(!0);try{i()}finally{Mn(!1)}}return l.memoizedState=[u,s],u}function td(i,s,l){return l===void 0||(Pi&1073741824)!==0&&(Vt&261930)===0?i.memoizedState=s:(i.memoizedState=l,i=sy(),wt.lanes|=i,Do|=i,l)}function sg(i,s,l,u){return En(l,s)?l:cr.current!==null?(i=td(i,l,u),En(i,s)||(Ae=!0),i):(Pi&42)===0||(Pi&1073741824)!==0&&(Vt&261930)===0?(Ae=!0,i.memoizedState=l):(i=sy(),wt.lanes|=i,Do|=i,s)}function rg(i,s,l,u,g){var _=lt.p;lt.p=_!==0&&8>_?_:8;var S=X.T,R={};X.T=R,id(i,!1,s,l);try{var V=g(),z=X.S;if(z!==null&&z(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var $=qA(V,u);Vl(i,s,$,wn(i))}else Vl(i,s,u,wn(i))}catch(tt){Vl(i,s,{then:function(){},status:"rejected",reason:tt},wn())}finally{lt.p=_,S!==null&&R.types!==null&&(S.types=R.types),X.T=S}}function YA(){}function ed(i,s,l,u){if(i.tag!==5)throw Error(o(476));var g=lg(i).queue;rg(i,g,s,_t,l===null?YA:function(){return ag(i),l(u)})}function lg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:_t,baseState:_t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:_t},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function ag(i){var s=lg(i);s.next===null&&(s=i.alternate.memoizedState),Vl(i,s.next.queue,{},wn())}function nd(){return Fe($l)}function ug(){return ge().memoizedState}function cg(){return ge().memoizedState}function JA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=wn();i=Co(l);var u=Ro(s,i,l);u!==null&&(_n(u,s,l),Nl(u,s,l)),s={cache:bf()},i.payload=s;return}s=s.return}}function KA(i,s,l){var u=wn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cu(i)?dg(s,l):(l=Tf(i,s,l,u),l!==null&&(_n(l,i,u),hg(l,s,u)))}function fg(i,s,l){var u=wn();Vl(i,s,l,u)}function Vl(i,s,l,u){var g={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Cu(i))dg(s,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var S=s.lastRenderedState,R=_(S,l);if(g.hasEagerState=!0,g.eagerState=R,En(R,S))return ou(i,s,g,0),ne===null&&iu(),!1}catch{}finally{}if(l=Tf(i,s,g,u),l!==null)return _n(l,i,u),hg(l,s,u),!0}return!1}function id(i,s,l,u){if(u={lane:2,revertLane:Ud(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Cu(i)){if(s)throw Error(o(479))}else s=Tf(i,l,u,2),s!==null&&_n(s,i,2)}function Cu(i){var s=i.alternate;return i===wt||s!==null&&s===wt}function dg(i,s){fr=yu=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function hg(i,s,l){if((l&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,no(i,l)}}var Pl={readContext:Fe,use:Tu,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de};Pl.useEffectEvent=de;var pg={readContext:Fe,use:Tu,useCallback:function(i,s){return an().memoizedState=[i,s===void 0?null:s],i},useContext:Fe,useEffect:Wm,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,Au(4194308,4,eg.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Au(4194308,4,i,s)},useInsertionEffect:function(i,s){Au(4,2,i,s)},useMemo:function(i,s){var l=an();s=s===void 0?null:s;var u=i();if(As){Mn(!0);try{i()}finally{Mn(!1)}}return l.memoizedState=[u,s],u},useReducer:function(i,s,l){var u=an();if(l!==void 0){var g=l(s);if(As){Mn(!0);try{l(s)}finally{Mn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=KA.bind(null,wt,i),[u.memoizedState,i]},useRef:function(i){var s=an();return i={current:i},s.memoizedState=i},useState:function(i){i=$f(i);var s=i.queue,l=fg.bind(null,wt,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:jf,useDeferredValue:function(i,s){var l=an();return td(l,i,s)},useTransition:function(){var i=$f(!1);return i=rg.bind(null,wt,i.queue,!0,!1),an().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var u=wt,g=an();if(kt){if(l===void 0)throw Error(o(407));l=l()}else{if(l=s(),ne===null)throw Error(o(349));(Vt&127)!==0||Um(u,s,l)}g.memoizedState=l;var _={value:l,getSnapshot:s};return g.queue=_,Wm(km.bind(null,u,_,i),[i]),u.flags|=2048,hr(9,{destroy:void 0},Lm.bind(null,u,_,l,s),null),l},useId:function(){var i=an(),s=ne.identifierPrefix;if(kt){var l=di,u=fi;l=(u&~(1<<32-nn(u)-1)).toString(32)+l,s="_"+s+"R_"+l,l=_u++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=GA++,s="_"+s+"r_"+l.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:nd,useFormState:Jm,useActionState:Jm,useOptimistic:function(i){var s=an();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=id.bind(null,wt,!0,l),l.dispatch=s,[i,s]},useMemoCache:Kf,useCacheRefresh:function(){return an().memoizedState=JA.bind(null,wt)},useEffectEvent:function(i){var s=an(),l={impl:i};return s.memoizedState=l,function(){if((Jt&2)!==0)throw Error(o(440));return l.impl.apply(void 0,arguments)}}},od={readContext:Fe,use:Tu,useCallback:ig,useContext:Fe,useEffect:Zf,useImperativeHandle:ng,useInsertionEffect:jm,useLayoutEffect:tg,useMemo:og,useReducer:Eu,useRef:$m,useState:function(){return Eu(Ui)},useDebugValue:jf,useDeferredValue:function(i,s){var l=ge();return sg(l,jt.memoizedState,i,s)},useTransition:function(){var i=Eu(Ui)[0],s=ge().memoizedState;return[typeof i=="boolean"?i:xl(i),s]},useSyncExternalStore:Pm,useId:ug,useHostTransitionStatus:nd,useFormState:Km,useActionState:Km,useOptimistic:function(i,s){var l=ge();return Gm(l,jt,i,s)},useMemoCache:Kf,useCacheRefresh:cg};od.useEffectEvent=Zm;var mg={readContext:Fe,use:Tu,useCallback:ig,useContext:Fe,useEffect:Zf,useImperativeHandle:ng,useInsertionEffect:jm,useLayoutEffect:tg,useMemo:og,useReducer:Xf,useRef:$m,useState:function(){return Xf(Ui)},useDebugValue:jf,useDeferredValue:function(i,s){var l=ge();return jt===null?td(l,i,s):sg(l,jt.memoizedState,i,s)},useTransition:function(){var i=Xf(Ui)[0],s=ge().memoizedState;return[typeof i=="boolean"?i:xl(i),s]},useSyncExternalStore:Pm,useId:ug,useHostTransitionStatus:nd,useFormState:Xm,useActionState:Xm,useOptimistic:function(i,s){var l=ge();return jt!==null?Gm(l,jt,i,s):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:cg};mg.useEffectEvent=Zm;function sd(i,s,l,u){s=i.memoizedState,l=l(u,s),l=l==null?s:E({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var rd={enqueueSetState:function(i,s,l){i=i._reactInternals;var u=wn(),g=Co(u);g.payload=s,l!=null&&(g.callback=l),s=Ro(i,g,u),s!==null&&(_n(s,i,u),Nl(s,i,u))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var u=wn(),g=Co(u);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=Ro(i,g,u),s!==null&&(_n(s,i,u),Nl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=wn(),u=Co(l);u.tag=2,s!=null&&(u.callback=s),s=Ro(i,u,l),s!==null&&(_n(s,i,l),Nl(s,i,l))}};function gg(i,s,l,u,g,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,S):s.prototype&&s.prototype.isPureReactComponent?!Tl(l,u)||!Tl(g,_):!0}function yg(i,s,l,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==i&&rd.enqueueReplaceState(s,s.state,null)}function Ss(i,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(i=i.defaultProps){l===s&&(l=E({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function _g(i){nu(i)}function vg(i){console.error(i)}function Tg(i){nu(i)}function Ru(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Eg(i,s,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ld(i,s,l){return l=Co(l),l.tag=3,l.payload={element:null},l.callback=function(){Ru(i,s)},l}function Ag(i){return i=Co(i),i.tag=3,i}function Sg(i,s,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){Eg(s,l,u)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Eg(s,l,u),typeof g!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function QA(i,s,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&sr(s,l,g,!0),l=Sn.current,l!==null){switch(l.tag){case 31:case 13:return On===null?ku():l.alternate===null&&he===0&&(he=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===du?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),xd(i,u,g)),!1;case 22:return l.flags|=65536,u===du?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),xd(i,u,g)),!1}throw Error(o(435,l.tag))}return xd(i,u,g),ku(),!1}if(kt)return s=Sn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==If&&(i=Error(o(422),{cause:u}),Sl(Pn(i,l)))):(u!==If&&(s=Error(o(423),{cause:u}),Sl(Pn(s,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Pn(u,l),g=ld(i.stateNode,u,g),kf(i,g),he!==4&&(he=2)),!1;var _=Error(o(520),{cause:u});if(_=Pn(_,l),Fl===null?Fl=[_]:Fl.push(_),he!==4&&(he=2),s===null)return!0;u=Pn(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=ld(l.stateNode,u,i),kf(l,i),!1;case 1:if(s=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(bo===null||!bo.has(_))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Ag(g),Sg(g,i,l,u),kf(l,g),!1}l=l.return}while(l!==null);return!1}var ad=Error(o(461)),Ae=!1;function He(i,s,l,u){s.child=i===null?wm(s,null,l,u):Es(s,i.child,l,u)}function Cg(i,s,l,u,g){l=l.render;var _=s.ref;if("ref"in u){var S={};for(var R in u)R!=="ref"&&(S[R]=u[R])}else S=u;return ys(s),u=Hf(i,s,l,S,_,g),R=zf(),i!==null&&!Ae?(Yf(i,s,g),Li(i,s,g)):(kt&&R&&Cf(s),s.flags|=1,He(i,s,u,g),s.child)}function Rg(i,s,l,u,g){if(i===null){var _=l.type;return typeof _=="function"&&!Ef(_)&&_.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=_,Ig(i,s,_,u,g)):(i=ru(l.type,null,u,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!gd(i,g)){var S=_.memoizedProps;if(l=l.compare,l=l!==null?l:Tl,l(S,u)&&i.ref===s.ref)return Li(i,s,g)}return s.flags|=1,i=Di(_,u),i.ref=s.ref,i.return=s,s.child=i}function Ig(i,s,l,u,g){if(i!==null){var _=i.memoizedProps;if(Tl(_,u)&&i.ref===s.ref)if(Ae=!1,s.pendingProps=u=_,gd(i,g))(i.flags&131072)!==0&&(Ae=!0);else return s.lanes=i.lanes,Li(i,s,g)}return ud(i,s,l,u,g)}function wg(i,s,l,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(u=s.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,s.child=null;return Ng(i,s,_,l,u)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&cu(s,_!==null?_.cachePool:null),_!==null?Dm(s,_):qf(),bm(s);else return u=s.lanes=536870912,Ng(i,s,_!==null?_.baseLanes|l:l,l,u)}else _!==null?(cu(s,_.cachePool),Dm(s,_),wo(),s.memoizedState=null):(i!==null&&cu(s,null),qf(),wo());return He(i,s,g,l),s.child}function Ul(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ng(i,s,l,u,g){var _=Vf();return _=_===null?null:{parent:Te._currentValue,pool:_},s.memoizedState={baseLanes:l,cachePool:_},i!==null&&cu(s,null),qf(),bm(s),i!==null&&sr(i,s,u,!0),s.childLanes=g,null}function Iu(i,s){return s=Nu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Mg(i,s,l){return Es(s,i.child,null,l),i=Iu(s,s.pendingProps),i.flags|=2,Cn(s),s.memoizedState=null,i}function XA(i,s,l){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(kt){if(u.mode==="hidden")return i=Iu(s,u),s.lanes=536870912,Ul(null,i);if(Bf(s),(i=oe)?(i=By(i,kn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:vo!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},l=dm(i),l.return=s,s.child=l,Be=s,oe=null)):i=null,i===null)throw Eo(s);return s.lanes=536870912,null}return Iu(s,u)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(Bf(s),g)if(s.flags&256)s.flags&=-257,s=Mg(i,s,l);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(Ae||sr(i,s,l,!1),g=(l&i.childLanes)!==0,Ae||g){if(u=ne,u!==null&&(S=io(u,l),S!==0&&S!==_.retryLane))throw _.retryLane=S,hs(i,S),_n(u,i,S),ad;ku(),s=Mg(i,s,l)}else i=_.treeContext,oe=qn(S.nextSibling),Be=s,kt=!0,To=null,kn=!1,i!==null&&mm(s,i),s=Iu(s,u),s.flags|=4096;return s}return i=Di(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function wu(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(i===null||i.ref!==l)&&(s.flags|=4194816)}}function ud(i,s,l,u,g){return ys(s),l=Hf(i,s,l,u,void 0,g),u=zf(),i!==null&&!Ae?(Yf(i,s,g),Li(i,s,g)):(kt&&u&&Cf(s),s.flags|=1,He(i,s,l,g),s.child)}function Dg(i,s,l,u,g,_){return ys(s),s.updateQueue=null,l=Vm(s,u,l,g),xm(i),u=zf(),i!==null&&!Ae?(Yf(i,s,_),Li(i,s,_)):(kt&&u&&Cf(s),s.flags|=1,He(i,s,l,_),s.child)}function bg(i,s,l,u,g){if(ys(s),s.stateNode===null){var _=er,S=l.contextType;typeof S=="object"&&S!==null&&(_=Fe(S)),_=new l(u,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=rd,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=u,_.state=s.memoizedState,_.refs={},Uf(s),S=l.contextType,_.context=typeof S=="object"&&S!==null?Fe(S):er,_.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(sd(s,l,S,u),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&rd.enqueueReplaceState(_,_.state,null),Dl(s,u,_,g),Ml(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){_=s.stateNode;var R=s.memoizedProps,V=Ss(l,R);_.props=V;var z=_.context,$=l.contextType;S=er,typeof $=="object"&&$!==null&&(S=Fe($));var tt=l.getDerivedStateFromProps;$=typeof tt=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,$||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||z!==S)&&yg(s,_,u,S),So=!1;var Y=s.memoizedState;_.state=Y,Dl(s,u,_,g),Ml(),z=s.memoizedState,R||Y!==z||So?(typeof tt=="function"&&(sd(s,l,tt,u),z=s.memoizedState),(V=So||gg(s,l,V,u,Y,z,S))?($||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=z),_.props=u,_.state=z,_.context=S,u=V):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{_=s.stateNode,Lf(i,s),S=s.memoizedProps,$=Ss(l,S),_.props=$,tt=s.pendingProps,Y=_.context,z=l.contextType,V=er,typeof z=="object"&&z!==null&&(V=Fe(z)),R=l.getDerivedStateFromProps,(z=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==tt||Y!==V)&&yg(s,_,u,V),So=!1,Y=s.memoizedState,_.state=Y,Dl(s,u,_,g),Ml();var J=s.memoizedState;S!==tt||Y!==J||So||i!==null&&i.dependencies!==null&&au(i.dependencies)?(typeof R=="function"&&(sd(s,l,R,u),J=s.memoizedState),($=So||gg(s,l,$,u,Y,J,V)||i!==null&&i.dependencies!==null&&au(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,J,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,J,V)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=J),_.props=u,_.state=J,_.context=V,u=$):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),u=!1)}return _=u,wu(i,s),u=(s.flags&128)!==0,_||u?(_=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&u?(s.child=Es(s,i.child,null,g),s.child=Es(s,null,l,g)):He(i,s,l,g),s.memoizedState=_.state,i=s.child):i=Li(i,s,g),i}function xg(i,s,l,u){return ms(),s.flags|=256,He(i,s,l,u),s.child}var cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(i){return{baseLanes:i,cachePool:Em()}}function dd(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=In),i}function Vg(i,s,l){var u=s.pendingProps,g=!1,_=(s.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(me.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,i===null){if(kt){if(g?Io(s):wo(),(i=oe)?(i=By(i,kn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:vo!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},l=dm(i),l.return=s,s.child=l,Be=s,oe=null)):i=null,i===null)throw Eo(s);return Qd(i)?s.lanes=32:s.lanes=536870912,null}var R=u.children;return u=u.fallback,g?(wo(),g=s.mode,R=Nu({mode:"hidden",children:R},g),u=ps(u,g,l,null),R.return=s,u.return=s,R.sibling=u,s.child=R,u=s.child,u.memoizedState=fd(l),u.childLanes=dd(i,S,l),s.memoizedState=cd,Ul(null,u)):(Io(s),hd(s,R))}var V=i.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(_)s.flags&256?(Io(s),s.flags&=-257,s=pd(i,s,l)):s.memoizedState!==null?(wo(),s.child=i.child,s.flags|=128,s=null):(wo(),R=u.fallback,g=s.mode,u=Nu({mode:"visible",children:u.children},g),R=ps(R,g,l,null),R.flags|=2,u.return=s,R.return=s,u.sibling=R,s.child=u,Es(s,i.child,null,l),u=s.child,u.memoizedState=fd(l),u.childLanes=dd(i,S,l),s.memoizedState=cd,s=Ul(null,u));else if(Io(s),Qd(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var z=S.dgst;S=z,u=Error(o(419)),u.stack="",u.digest=S,Sl({value:u,source:null,stack:null}),s=pd(i,s,l)}else if(Ae||sr(i,s,l,!1),S=(l&i.childLanes)!==0,Ae||S){if(S=ne,S!==null&&(u=io(S,l),u!==0&&u!==V.retryLane))throw V.retryLane=u,hs(i,u),_n(S,i,u),ad;Kd(R)||ku(),s=pd(i,s,l)}else Kd(R)?(s.flags|=192,s.child=i.child,s=null):(i=V.treeContext,oe=qn(R.nextSibling),Be=s,kt=!0,To=null,kn=!1,i!==null&&mm(s,i),s=hd(s,u.children),s.flags|=4096);return s}return g?(wo(),R=u.fallback,g=s.mode,V=i.child,z=V.sibling,u=Di(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,z!==null?R=Di(z,R):(R=ps(R,g,l,null),R.flags|=2),R.return=s,u.return=s,u.sibling=R,s.child=u,Ul(null,u),u=s.child,R=i.child.memoizedState,R===null?R=fd(l):(g=R.cachePool,g!==null?(V=Te._currentValue,g=g.parent!==V?{parent:V,pool:V}:g):g=Em(),R={baseLanes:R.baseLanes|l,cachePool:g}),u.memoizedState=R,u.childLanes=dd(i,S,l),s.memoizedState=cd,Ul(i.child,u)):(Io(s),l=i.child,i=l.sibling,l=Di(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,i!==null&&(S=s.deletions,S===null?(s.deletions=[i],s.flags|=16):S.push(i)),s.child=l,s.memoizedState=null,l)}function hd(i,s){return s=Nu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Nu(i,s){return i=An(22,i,null,s),i.lanes=0,i}function pd(i,s,l){return Es(s,i.child,null,l),i=hd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Pg(i,s,l){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Mf(i.return,s,l)}function md(i,s,l,u,g,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g,treeForkCount:_}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=l,S.tailMode=g,S.treeForkCount=_)}function Ug(i,s,l){var u=s.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var S=me.current,R=(S&2)!==0;if(R?(S=S&1|2,s.flags|=128):S&=1,st(me,S),He(i,s,u,l),u=kt?Al:0,!R&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Pg(i,l,s);else if(i.tag===19)Pg(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=s.child,g=null;l!==null;)i=l.alternate,i!==null&&gu(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),md(s,!1,g,l,_,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&gu(i)===null){s.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}md(s,!0,l,null,_,u);break;case"together":md(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Li(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),Do|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(sr(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,l=Di(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Di(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function gd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&au(i)))}function $A(i,s,l){switch(s.tag){case 3:ke(s,s.stateNode.containerInfo),Ao(s,Te,i.memoizedState.cache),ms();break;case 27:case 5:ni(s);break;case 4:ke(s,s.stateNode.containerInfo);break;case 10:Ao(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Bf(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Io(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Vg(i,s,l):(Io(s),i=Li(i,s,l),i!==null?i.sibling:null);Io(s);break;case 19:var g=(i.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(sr(i,s,l,!1),u=(l&s.childLanes)!==0),g){if(u)return Ug(i,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),st(me,me.current),u)break;return null;case 22:return s.lanes=0,wg(i,s,l,s.pendingProps);case 24:Ao(s,Te,i.memoizedState.cache)}return Li(i,s,l)}function Lg(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)Ae=!0;else{if(!gd(i,l)&&(s.flags&128)===0)return Ae=!1,$A(i,s,l);Ae=(i.flags&131072)!==0}else Ae=!1,kt&&(s.flags&1048576)!==0&&pm(s,Al,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(i=vs(s.elementType),s.type=i,typeof i=="function")Ef(i)?(u=Ss(i,u),s.tag=1,s=bg(null,s,i,u,l)):(s.tag=0,s=ud(null,s,i,u,l));else{if(i!=null){var g=i.$$typeof;if(g===it){s.tag=11,s=Cg(null,s,i,u,l);break t}else if(g===D){s.tag=14,s=Rg(null,s,i,u,l);break t}}throw s=Kt(i)||i,Error(o(306,s,""))}}return s;case 0:return ud(i,s,s.type,s.pendingProps,l);case 1:return u=s.type,g=Ss(u,s.pendingProps),bg(i,s,u,g,l);case 3:t:{if(ke(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var _=s.memoizedState;g=_.element,Lf(i,s),Dl(s,u,null,l);var S=s.memoizedState;if(u=S.cache,Ao(s,Te,u),u!==_.cache&&Df(s,[Te],l,!0),Ml(),u=S.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=xg(i,s,u,l);break t}else if(u!==g){g=Pn(Error(o(424)),s),Sl(g),s=xg(i,s,u,l);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(oe=qn(i.firstChild),Be=s,kt=!0,To=null,kn=!0,l=wm(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ms(),u===g){s=Li(i,s,l);break t}He(i,s,u,l)}s=s.child}return s;case 26:return wu(i,s),i===null?(l=Ky(s.type,null,s.pendingProps,null))?s.memoizedState=l:kt||(l=s.type,i=s.pendingProps,u=zu(Mt.current).createElement(l),u[ce]=s,u[Ge]=i,ze(u,l,i),pe(u),s.stateNode=u):s.memoizedState=Ky(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ni(s),i===null&&kt&&(u=s.stateNode=zy(s.type,s.pendingProps,Mt.current),Be=s,kn=!0,g=oe,Uo(s.type)?(Xd=g,oe=qn(u.firstChild)):oe=g),He(i,s,s.pendingProps.children,l),wu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&kt&&((g=u=oe)&&(u=IS(u,s.type,s.pendingProps,kn),u!==null?(s.stateNode=u,Be=s,oe=qn(u.firstChild),kn=!1,g=!0):g=!1),g||Eo(s)),ni(s),g=s.type,_=s.pendingProps,S=i!==null?i.memoizedProps:null,u=_.children,zd(g,_)?u=null:S!==null&&zd(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=Hf(i,s,BA,null,null,l),$l._currentValue=g),wu(i,s),He(i,s,u,l),s.child;case 6:return i===null&&kt&&((i=l=oe)&&(l=wS(l,s.pendingProps,kn),l!==null?(s.stateNode=l,Be=s,oe=null,i=!0):i=!1),i||Eo(s)),null;case 13:return Vg(i,s,l);case 4:return ke(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Es(s,null,u,l):He(i,s,u,l),s.child;case 11:return Cg(i,s,s.type,s.pendingProps,l);case 7:return He(i,s,s.pendingProps,l),s.child;case 8:return He(i,s,s.pendingProps.children,l),s.child;case 12:return He(i,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,Ao(s,s.type,u.value),He(i,s,u.children,l),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,ys(s),g=Fe(g),u=u(g),s.flags|=1,He(i,s,u,l),s.child;case 14:return Rg(i,s,s.type,s.pendingProps,l);case 15:return Ig(i,s,s.type,s.pendingProps,l);case 19:return Ug(i,s,l);case 31:return XA(i,s,l);case 22:return wg(i,s,l,s.pendingProps);case 24:return ys(s),u=Fe(Te),i===null?(g=Vf(),g===null&&(g=ne,_=bf(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=l),g=_),s.memoizedState={parent:u,cache:g},Uf(s),Ao(s,Te,g)):((i.lanes&l)!==0&&(Lf(i,s),Dl(s,null,null,l),Ml()),g=i.memoizedState,_=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Ao(s,Te,u)):(u=_.cache,Ao(s,Te,u),u!==g.cache&&Df(s,[Te],l,!0))),He(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ki(i){i.flags|=4}function yd(i,s,l,u,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(uy())i.flags|=8192;else throw Ts=du,Pf}else i.flags&=-16777217}function kg(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Zy(s))if(uy())i.flags|=8192;else throw Ts=du,Pf}function Mu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?nl():536870912,i.lanes|=s,yr|=s)}function Ll(i,s){if(!kt)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function se(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(s)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=l,s}function WA(i,s,l){var u=s.pendingProps;switch(Rf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(s),null;case 1:return se(s),null;case 3:return l=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Vi(Te),ae(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(or(s)?ki(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,wf())),se(s),null;case 26:var g=s.type,_=s.memoizedState;return i===null?(ki(s),_!==null?(se(s),kg(s,_)):(se(s),yd(s,g,null,u,l))):_?_!==i.memoizedState?(ki(s),se(s),kg(s,_)):(se(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&ki(s),se(s),yd(s,g,i,u,l)),null;case 27:if(_i(s),l=Mt.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&ki(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return se(s),null}i=pt.current,or(s)?gm(s):(i=zy(g,u,l),s.stateNode=i,ki(s))}return se(s),null;case 5:if(_i(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&ki(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return se(s),null}if(_=pt.current,or(s))gm(s);else{var S=zu(Mt.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}_[ce]=s,_[Ge]=u;t:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break t;for(;S.sibling===null;){if(S.return===null||S.return===s)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=_;t:switch(ze(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&ki(s)}}return se(s),yd(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,l),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&ki(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=Mt.current,or(s)){if(i=s.stateNode,l=s.memoizedProps,u=null,g=Be,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[ce]=s,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Vy(i.nodeValue,l)),i||Eo(s,!0)}else i=zu(i).createTextNode(u),i[ce]=s,s.stateNode=i}return se(s),null;case 31:if(l=s.memoizedState,i===null||i.memoizedState!==null){if(u=or(s),l!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[ce]=s}else ms(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;se(s),i=!1}else l=wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return s.flags&256?(Cn(s),s):(Cn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return se(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=or(s),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[ce]=s}else ms(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;se(s),g=!1}else g=wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Cn(s),s):(Cn(s),null)}return Cn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=u!==null,i=i!==null&&i.memoizedState!==null,l&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),l!==i&&l&&(s.child.flags|=8192),Mu(s,s.updateQueue),se(s),null);case 4:return ae(),i===null&&qd(s.stateNode.containerInfo),se(s),null;case 10:return Vi(s.type),se(s),null;case 19:if(W(me),u=s.memoizedState,u===null)return se(s),null;if(g=(s.flags&128)!==0,_=u.rendering,_===null)if(g)Ll(u,!1);else{if(he!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=gu(i),_!==null){for(s.flags|=128,Ll(u,!1),i=_.updateQueue,s.updateQueue=i,Mu(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)fm(l,i),l=l.sibling;return st(me,me.current&1|2),kt&&bi(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&Oe()>Pu&&(s.flags|=128,g=!0,Ll(u,!1),s.lanes=4194304)}else{if(!g)if(i=gu(_),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Mu(s,i),Ll(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!kt)return se(s),null}else 2*Oe()-u.renderingStartTime>Pu&&l!==536870912&&(s.flags|=128,g=!0,Ll(u,!1),s.lanes=4194304);u.isBackwards?(_.sibling=s.child,s.child=_):(i=u.last,i!==null?i.sibling=_:s.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Oe(),i.sibling=null,l=me.current,st(me,g?l&1|2:l&1),kt&&bi(s,u.treeForkCount),i):(se(s),null);case 22:case 23:return Cn(s),Gf(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(se(s),s.subtreeFlags&6&&(s.flags|=8192)):se(s),l=s.updateQueue,l!==null&&Mu(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),i!==null&&W(_s),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Vi(Te),se(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function ZA(i,s){switch(Rf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Vi(Te),ae(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return _i(s),null;case 31:if(s.memoizedState!==null){if(Cn(s),s.alternate===null)throw Error(o(340));ms()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Cn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));ms()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return W(me),null;case 4:return ae(),null;case 10:return Vi(s.type),null;case 22:case 23:return Cn(s),Gf(),i!==null&&W(_s),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Vi(Te),null;case 25:return null;default:return null}}function Og(i,s){switch(Rf(s),s.tag){case 3:Vi(Te),ae();break;case 26:case 27:case 5:_i(s);break;case 4:ae();break;case 31:s.memoizedState!==null&&Cn(s);break;case 13:Cn(s);break;case 19:W(me);break;case 10:Vi(s.type);break;case 22:case 23:Cn(s),Gf(),i!==null&&W(_s);break;case 24:Vi(Te)}}function kl(i,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&i)===i){u=void 0;var _=l.create,S=l.inst;u=_(),S.destroy=u}l=l.next}while(l!==g)}}catch(R){Wt(s,s.return,R)}}function No(i,s,l){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var S=u.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,g=s;var V=l,z=R;try{z()}catch($){Wt(g,V,$)}}}u=u.next}while(u!==_)}}catch($){Wt(s,s.return,$)}}function qg(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{Mm(s,l)}catch(u){Wt(i,i.return,u)}}}function Gg(i,s,l){l.props=Ss(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){Wt(i,s,u)}}function Ol(i,s){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof l=="function"?i.refCleanup=l(u):l.current=u}}catch(g){Wt(i,s,g)}}function hi(i,s){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){Wt(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Wt(i,s,g)}else l.current=null}function Bg(i){var s=i.type,l=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){Wt(i,i.return,g)}}function _d(i,s,l){try{var u=i.stateNode;TS(u,i.type,l,s),u[Ge]=s}catch(g){Wt(i,i.return,g)}}function Fg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Uo(i.type)||i.tag===4}function vd(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Fg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Uo(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Td(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(i),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=be));else if(u!==4&&(u===27&&Uo(i.type)&&(l=i.stateNode,s=null),i=i.child,i!==null))for(Td(i,s,l),i=i.sibling;i!==null;)Td(i,s,l),i=i.sibling}function Du(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(u!==4&&(u===27&&Uo(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Du(i,s,l),i=i.sibling;i!==null;)Du(i,s,l),i=i.sibling}function Hg(i){var s=i.stateNode,l=i.memoizedProps;try{for(var u=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);ze(s,u,l),s[ce]=i,s[Ge]=l}catch(_){Wt(i,i.return,_)}}var Oi=!1,Se=!1,Ed=!1,zg=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function jA(i,s){if(i=i.containerInfo,Fd=Wu,i=nm(i),pf(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break t}var S=0,R=-1,V=-1,z=0,$=0,tt=i,Y=null;e:for(;;){for(var J;tt!==l||g!==0&&tt.nodeType!==3||(R=S+g),tt!==_||u!==0&&tt.nodeType!==3||(V=S+u),tt.nodeType===3&&(S+=tt.nodeValue.length),(J=tt.firstChild)!==null;)Y=tt,tt=J;for(;;){if(tt===i)break e;if(Y===l&&++z===g&&(R=S),Y===_&&++$===u&&(V=S),(J=tt.nextSibling)!==null)break;tt=Y,Y=tt.parentNode}tt=J}l=R===-1||V===-1?null:{start:R,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Hd={focusedElem:i,selectionRange:l},Wu=!1,Pe=s;Pe!==null;)if(s=Pe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Pe=i;else for(;Pe!==null;){switch(s=Pe,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=s,g=_.memoizedProps,_=_.memoizedState,u=l.stateNode;try{var dt=Ss(l.type,g);i=u.getSnapshotBeforeUpdate(dt,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Tt){Wt(l,l.return,Tt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)Jd(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Jd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Pe=i;break}Pe=s.return}}function Yg(i,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Gi(i,l),u&4&&kl(5,l);break;case 1:if(Gi(i,l),u&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(S){Wt(l,l.return,S)}else{var g=Ss(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Wt(l,l.return,S)}}u&64&&qg(l),u&512&&Ol(l,l.return);break;case 3:if(Gi(i,l),u&64&&(i=l.updateQueue,i!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Mm(i,s)}catch(S){Wt(l,l.return,S)}}break;case 27:s===null&&u&4&&Hg(l);case 26:case 5:Gi(i,l),s===null&&u&4&&Bg(l),u&512&&Ol(l,l.return);break;case 12:Gi(i,l);break;case 31:Gi(i,l),u&4&&Qg(i,l);break;case 13:Gi(i,l),u&4&&Xg(i,l),u&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=aS.bind(null,l),NS(i,l))));break;case 22:if(u=l.memoizedState!==null||Oi,!u){s=s!==null&&s.memoizedState!==null||Se,g=Oi;var _=Se;Oi=u,(Se=s)&&!_?Bi(i,l,(l.subtreeFlags&8772)!==0):Gi(i,l),Oi=g,Se=_}break;case 30:break;default:Gi(i,l)}}function Jg(i){var s=i.alternate;s!==null&&(i.alternate=null,Jg(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&es(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var le=null,pn=!1;function qi(i,s,l){for(l=l.child;l!==null;)Kg(i,s,l),l=l.sibling}function Kg(i,s,l){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Zi,l)}catch{}switch(l.tag){case 26:Se||hi(l,s),qi(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Se||hi(l,s);var u=le,g=pn;Uo(l.type)&&(le=l.stateNode,pn=!1),qi(i,s,l),Kl(l.stateNode),le=u,pn=g;break;case 5:Se||hi(l,s);case 6:if(u=le,g=pn,le=null,qi(i,s,l),le=u,pn=g,le!==null)if(pn)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(l.stateNode)}catch(_){Wt(l,s,_)}else try{le.removeChild(l.stateNode)}catch(_){Wt(l,s,_)}break;case 18:le!==null&&(pn?(i=le,qy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Rr(i)):qy(le,l.stateNode));break;case 4:u=le,g=pn,le=l.stateNode.containerInfo,pn=!0,qi(i,s,l),le=u,pn=g;break;case 0:case 11:case 14:case 15:No(2,l,s),Se||No(4,l,s),qi(i,s,l);break;case 1:Se||(hi(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Gg(l,s,u)),qi(i,s,l);break;case 21:qi(i,s,l);break;case 22:Se=(u=Se)||l.memoizedState!==null,qi(i,s,l),Se=u;break;default:qi(i,s,l)}}function Qg(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Rr(i)}catch(l){Wt(s,s.return,l)}}}function Xg(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Rr(i)}catch(l){Wt(s,s.return,l)}}function tS(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new zg),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new zg),s;default:throw Error(o(435,i.tag))}}function bu(i,s){var l=tS(i);s.forEach(function(u){if(!l.has(u)){l.add(u);var g=uS.bind(null,i,u);u.then(g,g)}})}function mn(i,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],_=i,S=s,R=S;t:for(;R!==null;){switch(R.tag){case 27:if(Uo(R.type)){le=R.stateNode,pn=!1;break t}break;case 5:le=R.stateNode,pn=!1;break t;case 3:case 4:le=R.stateNode.containerInfo,pn=!0;break t}R=R.return}if(le===null)throw Error(o(160));Kg(_,S,g),le=null,pn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)$g(s,i),s=s.sibling}var Xn=null;function $g(i,s){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:mn(s,i),gn(i),u&4&&(No(3,i,i.return),kl(3,i),No(5,i,i.return));break;case 1:mn(s,i),gn(i),u&512&&(Se||l===null||hi(l,l.return)),u&64&&Oi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=Xn;if(mn(s,i),gn(i),u&512&&(Se||l===null||hi(l,l.return)),u&4){var _=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){t:{u=i.type,l=i.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[Ai]||_[ce]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),ze(_,u,l),_[ce]=i,pe(_),u=_;break t;case"link":var S=$y("link","href",g).get(u+(l.href||""));if(S){for(var R=0;R<S.length;R++)if(_=S[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(R,1);break e}}_=g.createElement(u),ze(_,u,l),g.head.appendChild(_);break;case"meta":if(S=$y("meta","content",g).get(u+(l.content||""))){for(R=0;R<S.length;R++)if(_=S[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(R,1);break e}}_=g.createElement(u),ze(_,u,l),g.head.appendChild(_);break;default:throw Error(o(468,u))}_[ce]=i,pe(_),u=_}i.stateNode=u}else Wy(g,i.type,i.stateNode);else i.stateNode=Xy(g,u,i.memoizedProps);else _!==u?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,u===null?Wy(g,i.type,i.stateNode):Xy(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&_d(i,i.memoizedProps,l.memoizedProps)}break;case 27:mn(s,i),gn(i),u&512&&(Se||l===null||hi(l,l.return)),l!==null&&u&4&&_d(i,i.memoizedProps,l.memoizedProps);break;case 5:if(mn(s,i),gn(i),u&512&&(Se||l===null||hi(l,l.return)),i.flags&32){g=i.stateNode;try{xn(g,"")}catch(dt){Wt(i,i.return,dt)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,_d(i,g,l!==null?l.memoizedProps:g)),u&1024&&(Ed=!0);break;case 6:if(mn(s,i),gn(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(dt){Wt(i,i.return,dt)}}break;case 3:if(Ku=null,g=Xn,Xn=Yu(s.containerInfo),mn(s,i),Xn=g,gn(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Rr(s.containerInfo)}catch(dt){Wt(i,i.return,dt)}Ed&&(Ed=!1,Wg(i));break;case 4:u=Xn,Xn=Yu(i.stateNode.containerInfo),mn(s,i),gn(i),Xn=u;break;case 12:mn(s,i),gn(i);break;case 31:mn(s,i),gn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bu(i,u)));break;case 13:mn(s,i),gn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Vu=Oe()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bu(i,u)));break;case 22:g=i.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,z=Oi,$=Se;if(Oi=z||g,Se=$||V,mn(s,i),Se=$,Oi=z,gn(i),u&8192)t:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(l===null||V||Oi||Se||Cs(i)),l=null,s=i;;){if(s.tag===5||s.tag===26){if(l===null){V=l=s;try{if(_=V.stateNode,g)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=V.stateNode;var tt=V.memoizedProps.style,Y=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;R.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(dt){Wt(V,V.return,dt)}}}else if(s.tag===6){if(l===null){V=s;try{V.stateNode.nodeValue=g?"":V.memoizedProps}catch(dt){Wt(V,V.return,dt)}}}else if(s.tag===18){if(l===null){V=s;try{var J=V.stateNode;g?Gy(J,!0):Gy(V.stateNode,!1)}catch(dt){Wt(V,V.return,dt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,bu(i,l))));break;case 19:mn(s,i),gn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bu(i,u)));break;case 30:break;case 21:break;default:mn(s,i),gn(i)}}function gn(i){var s=i.flags;if(s&2){try{for(var l,u=i.return;u!==null;){if(Fg(u)){l=u;break}u=u.return}if(l==null)throw Error(o(160));switch(l.tag){case 27:var g=l.stateNode,_=vd(i);Du(i,_,g);break;case 5:var S=l.stateNode;l.flags&32&&(xn(S,""),l.flags&=-33);var R=vd(i);Du(i,R,S);break;case 3:case 4:var V=l.stateNode.containerInfo,z=vd(i);Td(i,z,V);break;default:throw Error(o(161))}}catch($){Wt(i,i.return,$)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Wg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Wg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Gi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Yg(i,s.alternate,s),s=s.sibling}function Cs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:No(4,s,s.return),Cs(s);break;case 1:hi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&Gg(s,s.return,l),Cs(s);break;case 27:Kl(s.stateNode);case 26:case 5:hi(s,s.return),Cs(s);break;case 22:s.memoizedState===null&&Cs(s);break;case 30:Cs(s);break;default:Cs(s)}i=i.sibling}}function Bi(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=i,_=s,S=_.flags;switch(_.tag){case 0:case 11:case 15:Bi(g,_,l),kl(4,_);break;case 1:if(Bi(g,_,l),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(z){Wt(u,u.return,z)}if(u=_,g=u.updateQueue,g!==null){var R=u.stateNode;try{var V=g.shared.hiddenCallbacks;if(V!==null)for(g.shared.hiddenCallbacks=null,g=0;g<V.length;g++)Nm(V[g],R)}catch(z){Wt(u,u.return,z)}}l&&S&64&&qg(_),Ol(_,_.return);break;case 27:Hg(_);case 26:case 5:Bi(g,_,l),l&&u===null&&S&4&&Bg(_),Ol(_,_.return);break;case 12:Bi(g,_,l);break;case 31:Bi(g,_,l),l&&S&4&&Qg(g,_);break;case 13:Bi(g,_,l),l&&S&4&&Xg(g,_);break;case 22:_.memoizedState===null&&Bi(g,_,l),Ol(_,_.return);break;case 30:break;default:Bi(g,_,l)}s=s.sibling}}function Ad(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Cl(l))}function Sd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Cl(i))}function $n(i,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Zg(i,s,l,u),s=s.sibling}function Zg(i,s,l,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:$n(i,s,l,u),g&2048&&kl(9,s);break;case 1:$n(i,s,l,u);break;case 3:$n(i,s,l,u),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Cl(i)));break;case 12:if(g&2048){$n(i,s,l,u),i=s.stateNode;try{var _=s.memoizedProps,S=_.id,R=_.onPostCommit;typeof R=="function"&&R(S,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){Wt(s,s.return,V)}}else $n(i,s,l,u);break;case 31:$n(i,s,l,u);break;case 13:$n(i,s,l,u);break;case 23:break;case 22:_=s.stateNode,S=s.alternate,s.memoizedState!==null?_._visibility&2?$n(i,s,l,u):ql(i,s):_._visibility&2?$n(i,s,l,u):(_._visibility|=2,pr(i,s,l,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Ad(S,s);break;case 24:$n(i,s,l,u),g&2048&&Sd(s.alternate,s);break;default:$n(i,s,l,u)}}function pr(i,s,l,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,S=s,R=l,V=u,z=S.flags;switch(S.tag){case 0:case 11:case 15:pr(_,S,R,V,g),kl(8,S);break;case 23:break;case 22:var $=S.stateNode;S.memoizedState!==null?$._visibility&2?pr(_,S,R,V,g):ql(_,S):($._visibility|=2,pr(_,S,R,V,g)),g&&z&2048&&Ad(S.alternate,S);break;case 24:pr(_,S,R,V,g),g&&z&2048&&Sd(S.alternate,S);break;default:pr(_,S,R,V,g)}s=s.sibling}}function ql(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,u=s,g=u.flags;switch(u.tag){case 22:ql(l,u),g&2048&&Ad(u.alternate,u);break;case 24:ql(l,u),g&2048&&Sd(u.alternate,u);break;default:ql(l,u)}s=s.sibling}}var Gl=8192;function mr(i,s,l){if(i.subtreeFlags&Gl)for(i=i.child;i!==null;)jg(i,s,l),i=i.sibling}function jg(i,s,l){switch(i.tag){case 26:mr(i,s,l),i.flags&Gl&&i.memoizedState!==null&&GS(l,Xn,i.memoizedState,i.memoizedProps);break;case 5:mr(i,s,l);break;case 3:case 4:var u=Xn;Xn=Yu(i.stateNode.containerInfo),mr(i,s,l),Xn=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Gl,Gl=16777216,mr(i,s,l),Gl=u):mr(i,s,l));break;default:mr(i,s,l)}}function ty(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Bl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];Pe=u,ny(u,i)}ty(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ey(i),i=i.sibling}function ey(i){switch(i.tag){case 0:case 11:case 15:Bl(i),i.flags&2048&&No(9,i,i.return);break;case 3:Bl(i);break;case 12:Bl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,xu(i)):Bl(i);break;default:Bl(i)}}function xu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];Pe=u,ny(u,i)}ty(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:No(8,s,s.return),xu(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,xu(s));break;default:xu(s)}i=i.sibling}}function ny(i,s){for(;Pe!==null;){var l=Pe;switch(l.tag){case 0:case 11:case 15:No(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Cl(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Pe=u;else t:for(l=i;Pe!==null;){u=Pe;var g=u.sibling,_=u.return;if(Jg(u),u===l){Pe=null;break t}if(g!==null){g.return=_,Pe=g;break t}Pe=_}}}var eS={getCacheForType:function(i){var s=Fe(Te),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l},cacheSignal:function(){return Fe(Te).controller.signal}},nS=typeof WeakMap=="function"?WeakMap:Map,Jt=0,ne=null,bt=null,Vt=0,$t=0,Rn=null,Mo=!1,gr=!1,Cd=!1,Fi=0,he=0,Do=0,Rs=0,Rd=0,In=0,yr=0,Fl=null,yn=null,Id=!1,Vu=0,iy=0,Pu=1/0,Uu=null,bo=null,we=0,xo=null,_r=null,Hi=0,wd=0,Nd=null,oy=null,Hl=0,Md=null;function wn(){return(Jt&2)!==0&&Vt!==0?Vt&-Vt:X.T!==null?Ud():Ei()}function sy(){if(In===0)if((Vt&536870912)===0||kt){var i=ii;ii<<=1,(ii&3932160)===0&&(ii=262144),In=i}else In=536870912;return i=Sn.current,i!==null&&(i.flags|=32),In}function _n(i,s,l){(i===ne&&($t===2||$t===9)||i.cancelPendingCommit!==null)&&(vr(i,0),Vo(i,Vt,In,!1)),eo(i,l),((Jt&2)===0||i!==ne)&&(i===ne&&((Jt&2)===0&&(Rs|=l),he===4&&Vo(i,Vt,In,!1)),pi(i))}function ry(i,s,l){if((Jt&6)!==0)throw Error(o(327));var u=!l&&(s&127)===0&&(s&i.expiredLanes)===0||to(i,s),g=u?sS(i,s):bd(i,s,!0),_=u;do{if(g===0){gr&&!u&&Vo(i,s,0,!1);break}else{if(l=i.current.alternate,_&&!iS(l)){g=bd(i,s,!1),_=!1;continue}if(g===2){if(_=s,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var R=i;g=Fl;var V=R.current.memoizedState.isDehydrated;if(V&&(vr(R,S).flags|=256),S=bd(R,S,!1),S!==2){if(Cd&&!V){R.errorRecoveryDisabledLanes|=_,Rs|=_,g=4;break t}_=yn,yn=g,_!==null&&(yn===null?yn=_:yn.push.apply(yn,_))}g=S}if(_=!1,g!==2)continue}}if(g===1){vr(i,0),Vo(i,s,0,!0);break}t:{switch(u=i,_=g,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Vo(u,s,In,!Mo);break t;case 2:yn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=Vu+300-Oe(),10<g)){if(Vo(u,s,In,!Mo),Dn(u,0,!0)!==0)break t;Hi=s,u.timeoutHandle=ky(ly.bind(null,u,l,yn,Uu,Id,s,In,Rs,yr,Mo,_,"Throttled",-0,0),g);break t}ly(u,l,yn,Uu,Id,s,In,Rs,yr,Mo,_,null,-0,0)}}break}while(!0);pi(i)}function ly(i,s,l,u,g,_,S,R,V,z,$,tt,Y,J){if(i.timeoutHandle=-1,tt=s.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:be},jg(s,_,tt);var dt=(_&62914560)===_?Vu-Oe():(_&4194048)===_?iy-Oe():0;if(dt=BS(tt,dt),dt!==null){Hi=_,i.cancelPendingCommit=dt(my.bind(null,i,s,_,l,u,g,S,R,V,$,tt,null,Y,J)),Vo(i,_,S,!z);return}}my(i,s,_,l,u,g,S,R,V)}function iS(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],_=g.getSnapshot;g=g.value;try{if(!En(_(),g))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Vo(i,s,l,u){s&=~Rd,s&=~Rs,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var g=s;0<g;){var _=31-nn(g),S=1<<_;u[_]=-1,g&=~S}l!==0&&il(i,l,s)}function Lu(){return(Jt&6)===0?(zl(0),!1):!0}function Dd(){if(bt!==null){if($t===0)var i=bt.return;else i=bt,xi=gs=null,Jf(i),ur=null,Il=0,i=bt;for(;i!==null;)Og(i.alternate,i),i=i.return;bt=null}}function vr(i,s){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,SS(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Hi=0,Dd(),ne=i,bt=l=Di(i.current,null),Vt=s,$t=0,Rn=null,Mo=!1,gr=to(i,s),Cd=!1,yr=In=Rd=Rs=Do=he=0,yn=Fl=null,Id=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var g=31-nn(u),_=1<<g;s|=i[g],u&=~_}return Fi=s,iu(),l}function ay(i,s){wt=null,X.H=Pl,s===ar||s===fu?(s=Cm(),$t=3):s===Pf?(s=Cm(),$t=4):$t=s===ad?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rn=s,bt===null&&(he=1,Ru(i,Pn(s,i.current)))}function uy(){var i=Sn.current;return i===null?!0:(Vt&4194048)===Vt?On===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?i===On:!1}function cy(){var i=X.H;return X.H=Pl,i===null?Pl:i}function fy(){var i=X.A;return X.A=eS,i}function ku(){he=4,Mo||(Vt&4194048)!==Vt&&Sn.current!==null||(gr=!0),(Do&134217727)===0&&(Rs&134217727)===0||ne===null||Vo(ne,Vt,In,!1)}function bd(i,s,l){var u=Jt;Jt|=2;var g=cy(),_=fy();(ne!==i||Vt!==s)&&(Uu=null,vr(i,s)),s=!1;var S=he;t:do try{if($t!==0&&bt!==null){var R=bt,V=Rn;switch($t){case 8:Dd(),S=6;break t;case 3:case 2:case 9:case 6:Sn.current===null&&(s=!0);var z=$t;if($t=0,Rn=null,Tr(i,R,V,z),l&&gr){S=0;break t}break;default:z=$t,$t=0,Rn=null,Tr(i,R,V,z)}}oS(),S=he;break}catch($){ay(i,$)}while(!0);return s&&i.shellSuspendCounter++,xi=gs=null,Jt=u,X.H=g,X.A=_,bt===null&&(ne=null,Vt=0,iu()),S}function oS(){for(;bt!==null;)dy(bt)}function sS(i,s){var l=Jt;Jt|=2;var u=cy(),g=fy();ne!==i||Vt!==s?(Uu=null,Pu=Oe()+500,vr(i,s)):gr=to(i,s);t:do try{if($t!==0&&bt!==null){s=bt;var _=Rn;e:switch($t){case 1:$t=0,Rn=null,Tr(i,s,_,1);break;case 2:case 9:if(Am(_)){$t=0,Rn=null,hy(s);break}s=function(){$t!==2&&$t!==9||ne!==i||($t=7),pi(i)},_.then(s,s);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:Am(_)?($t=0,Rn=null,hy(s)):($t=0,Rn=null,Tr(i,s,_,7));break;case 5:var S=null;switch(bt.tag){case 26:S=bt.memoizedState;case 5:case 27:var R=bt;if(S?Zy(S):R.stateNode.complete){$t=0,Rn=null;var V=R.sibling;if(V!==null)bt=V;else{var z=R.return;z!==null?(bt=z,Ou(z)):bt=null}break e}}$t=0,Rn=null,Tr(i,s,_,5);break;case 6:$t=0,Rn=null,Tr(i,s,_,6);break;case 8:Dd(),he=6;break t;default:throw Error(o(462))}}rS();break}catch($){ay(i,$)}while(!0);return xi=gs=null,X.H=u,X.A=g,Jt=l,bt!==null?0:(ne=null,Vt=0,iu(),he)}function rS(){for(;bt!==null&&!nf();)dy(bt)}function dy(i){var s=Lg(i.alternate,i,Fi);i.memoizedProps=i.pendingProps,s===null?Ou(i):bt=s}function hy(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=Dg(l,s,s.pendingProps,s.type,void 0,Vt);break;case 11:s=Dg(l,s,s.pendingProps,s.type.render,s.ref,Vt);break;case 5:Jf(s);default:Og(l,s),s=bt=fm(s,Fi),s=Lg(l,s,Fi)}i.memoizedProps=i.pendingProps,s===null?Ou(i):bt=s}function Tr(i,s,l,u){xi=gs=null,Jf(s),ur=null,Il=0;var g=s.return;try{if(QA(i,g,s,l,Vt)){he=1,Ru(i,Pn(l,i.current)),bt=null;return}}catch(_){if(g!==null)throw bt=g,_;he=1,Ru(i,Pn(l,i.current)),bt=null;return}s.flags&32768?(kt||u===1?i=!0:gr||(Vt&536870912)!==0?i=!1:(Mo=i=!0,(u===2||u===9||u===3||u===6)&&(u=Sn.current,u!==null&&u.tag===13&&(u.flags|=16384))),py(s,i)):Ou(s)}function Ou(i){var s=i;do{if((s.flags&32768)!==0){py(s,Mo);return}i=s.return;var l=WA(s.alternate,s,Fi);if(l!==null){bt=l;return}if(s=s.sibling,s!==null){bt=s;return}bt=s=i}while(s!==null);he===0&&(he=5)}function py(i,s){do{var l=ZA(i.alternate,i);if(l!==null){l.flags&=32767,bt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){bt=i;return}bt=i=l}while(i!==null);he=6,bt=null}function my(i,s,l,u,g,_,S,R,V){i.cancelPendingCommit=null;do qu();while(we!==0);if((Jt&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=vf,qe(i,l,_,S,R,V),i===ne&&(bt=ne=null,Vt=0),_r=s,xo=i,Hi=l,wd=_,Nd=g,oy=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,cS(vi,function(){return Ty(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,g=lt.p,lt.p=2,S=Jt,Jt|=4;try{jA(i,s,l)}finally{Jt=S,lt.p=g,X.T=u}}we=1,gy(),yy(),_y()}}function gy(){if(we===1){we=0;var i=xo,s=_r,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var u=lt.p;lt.p=2;var g=Jt;Jt|=4;try{$g(s,i);var _=Hd,S=nm(i.containerInfo),R=_.focusedElem,V=_.selectionRange;if(S!==R&&R&&R.ownerDocument&&em(R.ownerDocument.documentElement,R)){if(V!==null&&pf(R)){var z=V.start,$=V.end;if($===void 0&&($=z),"selectionStart"in R)R.selectionStart=z,R.selectionEnd=Math.min($,R.value.length);else{var tt=R.ownerDocument||document,Y=tt&&tt.defaultView||window;if(Y.getSelection){var J=Y.getSelection(),dt=R.textContent.length,Tt=Math.min(V.start,dt),ee=V.end===void 0?Tt:Math.min(V.end,dt);!J.extend&&Tt>ee&&(S=ee,ee=Tt,Tt=S);var B=tm(R,Tt),k=tm(R,ee);if(B&&k&&(J.rangeCount!==1||J.anchorNode!==B.node||J.anchorOffset!==B.offset||J.focusNode!==k.node||J.focusOffset!==k.offset)){var H=tt.createRange();H.setStart(B.node,B.offset),J.removeAllRanges(),Tt>ee?(J.addRange(H),J.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),J.addRange(H))}}}}for(tt=[],J=R;J=J.parentNode;)J.nodeType===1&&tt.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<tt.length;R++){var j=tt[R];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Wu=!!Fd,Hd=Fd=null}finally{Jt=g,lt.p=u,X.T=l}}i.current=s,we=2}}function yy(){if(we===2){we=0;var i=xo,s=_r,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var u=lt.p;lt.p=2;var g=Jt;Jt|=4;try{Yg(i,s.alternate,s)}finally{Jt=g,lt.p=u,X.T=l}}we=3}}function _y(){if(we===4||we===3){we=0,jr();var i=xo,s=_r,l=Hi,u=oy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?we=5:(we=0,_r=xo=null,vy(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(bo=null),sl(l),s=s.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Zi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,g=lt.p,lt.p=2,X.T=null;try{for(var _=i.onRecoverableError,S=0;S<u.length;S++){var R=u[S];_(R.value,{componentStack:R.stack})}}finally{X.T=s,lt.p=g}}(Hi&3)!==0&&qu(),pi(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===Md?Hl++:(Hl=0,Md=i):Hl=0,zl(0)}}function vy(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Cl(s)))}function qu(){return gy(),yy(),_y(),Ty()}function Ty(){if(we!==5)return!1;var i=xo,s=wd;wd=0;var l=sl(Hi),u=X.T,g=lt.p;try{lt.p=32>l?32:l,X.T=null,l=Nd,Nd=null;var _=xo,S=Hi;if(we=0,_r=xo=null,Hi=0,(Jt&6)!==0)throw Error(o(331));var R=Jt;if(Jt|=4,ey(_.current),Zg(_,_.current,S,l),Jt=R,zl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Zi,_)}catch{}return!0}finally{lt.p=g,X.T=u,vy(i,s)}}function Ey(i,s,l){s=Pn(l,s),s=ld(i.stateNode,s,2),i=Ro(i,s,2),i!==null&&(eo(i,2),pi(i))}function Wt(i,s,l){if(i.tag===3)Ey(i,i,l);else for(;s!==null;){if(s.tag===3){Ey(s,i,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(bo===null||!bo.has(u))){i=Pn(l,i),l=Ag(2),u=Ro(s,l,2),u!==null&&(Sg(l,u,s,i),eo(u,2),pi(u));break}}s=s.return}}function xd(i,s,l){var u=i.pingCache;if(u===null){u=i.pingCache=new nS;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(l)||(Cd=!0,g.add(l),i=lS.bind(null,i,s,l),s.then(i,i))}function lS(i,s,l){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,ne===i&&(Vt&l)===l&&(he===4||he===3&&(Vt&62914560)===Vt&&300>Oe()-Vu?(Jt&2)===0&&vr(i,0):Rd|=l,yr===Vt&&(yr=0)),pi(i)}function Ay(i,s){s===0&&(s=nl()),i=hs(i,s),i!==null&&(eo(i,s),pi(i))}function aS(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),Ay(i,l)}function uS(i,s){var l=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Ay(i,l)}function cS(i,s){return Zo(i,s)}var Gu=null,Er=null,Vd=!1,Bu=!1,Pd=!1,Po=0;function pi(i){i!==Er&&i.next===null&&(Er===null?Gu=Er=i:Er=Er.next=i),Bu=!0,Vd||(Vd=!0,dS())}function zl(i,s){if(!Pd&&Bu){Pd=!0;do for(var l=!1,u=Gu;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var S=u.suspendedLanes,R=u.pingedLanes;_=(1<<31-nn(42|i)+1)-1,_&=g&~(S&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,Iy(u,_))}else _=Vt,_=Dn(u,u===ne?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||to(u,_)||(l=!0,Iy(u,_));u=u.next}while(l);Pd=!1}}function fS(){Sy()}function Sy(){Bu=Vd=!1;var i=0;Po!==0&&AS()&&(i=Po);for(var s=Oe(),l=null,u=Gu;u!==null;){var g=u.next,_=Cy(u,s);_===0?(u.next=null,l===null?Gu=g:l.next=g,g===null&&(Er=l)):(l=u,(i!==0||(_&3)!==0)&&(Bu=!0)),u=g}we!==0&&we!==5||zl(i),Po!==0&&(Po=0)}function Cy(i,s){for(var l=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-nn(_),R=1<<S,V=g[S];V===-1?((R&l)===0||(R&u)!==0)&&(g[S]=Bs(R,s)):V<=s&&(i.expiredLanes|=R),_&=~R}if(s=ne,l=Vt,l=Dn(i,i===s?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,l===0||i===s&&($t===2||$t===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Gs(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||to(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(u!==null&&Gs(u),sl(l)){case 2:case 8:l=De;break;case 32:l=vi;break;case 268435456:l=tl;break;default:l=vi}return u=Ry.bind(null,i),l=Zo(l,u),i.callbackPriority=s,i.callbackNode=l,s}return u!==null&&u!==null&&Gs(u),i.callbackPriority=2,i.callbackNode=null,2}function Ry(i,s){if(we!==0&&we!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(qu()&&i.callbackNode!==l)return null;var u=Vt;return u=Dn(i,i===ne?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ry(i,u,s),Cy(i,Oe()),i.callbackNode!=null&&i.callbackNode===l?Ry.bind(null,i):null)}function Iy(i,s){if(qu())return null;ry(i,s,!0)}function dS(){CS(function(){(Jt&6)!==0?Zo(Ie,fS):Sy()})}function Ud(){if(Po===0){var i=rr;i===0&&(i=ts,ts<<=1,(ts&261888)===0&&(ts=256)),Po=i}return Po}function wy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ai(""+i)}function Ny(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function hS(i,s,l,u,g){if(s==="submit"&&l&&l.stateNode===g){var _=wy((g[Ge]||null).action),S=u.submitter;S&&(s=(s=S[Ge]||null)?wy(s.formAction):S.getAttribute("formAction"),s!==null&&(_=s,S=null));var R=new rs("action","action",null,u,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Po!==0){var V=S?Ny(g,S):new FormData(g);ed(l,{pending:!0,data:V,method:g.method,action:_},null,V)}}else typeof _=="function"&&(R.preventDefault(),V=S?Ny(g,S):new FormData(g),ed(l,{pending:!0,data:V,method:g.method,action:_},_,V))},currentTarget:g}]})}}for(var Ld=0;Ld<_f.length;Ld++){var kd=_f[Ld],pS=kd.toLowerCase(),mS=kd[0].toUpperCase()+kd.slice(1);Qn(pS,"on"+mS)}Qn(sm,"onAnimationEnd"),Qn(rm,"onAnimationIteration"),Qn(lm,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(bA,"onTransitionRun"),Qn(xA,"onTransitionStart"),Qn(VA,"onTransitionCancel"),Qn(am,"onTransitionEnd"),li("onMouseEnter",["mouseout","mouseover"]),li("onMouseLeave",["mouseout","mouseover"]),li("onPointerEnter",["pointerout","pointerover"]),li("onPointerLeave",["pointerout","pointerover"]),on("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),on("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),on("onBeforeInput",["compositionend","keypress","textInput","paste"]),on("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),on("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),on("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function My(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],g=u.event;u=u.listeners;t:{var _=void 0;if(s)for(var S=u.length-1;0<=S;S--){var R=u[S],V=R.instance,z=R.currentTarget;if(R=R.listener,V!==_&&g.isPropagationStopped())break t;_=R,g.currentTarget=z;try{_(g)}catch($){nu($)}g.currentTarget=null,_=V}else for(S=0;S<u.length;S++){if(R=u[S],V=R.instance,z=R.currentTarget,R=R.listener,V!==_&&g.isPropagationStopped())break t;_=R,g.currentTarget=z;try{_(g)}catch($){nu($)}g.currentTarget=null,_=V}}}}function xt(i,s){var l=s[oo];l===void 0&&(l=s[oo]=new Set);var u=i+"__bubble";l.has(u)||(Dy(s,i,2,!1),l.add(u))}function Od(i,s,l){var u=0;s&&(u|=4),Dy(l,i,u,s)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function qd(i){if(!i[Fu]){i[Fu]=!0,Fs.forEach(function(l){l!=="selectionchange"&&(gS.has(l)||Od(l,!1,i),Od(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Fu]||(s[Fu]=!0,Od("selectionchange",!1,s))}}function Dy(i,s,l,u){switch(s_(s)){case 2:var g=zS;break;case 8:g=YS;break;default:g=th}l=g.bind(null,s,l,i),g=void 0,!hl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(s,l,{capture:!0,passive:g}):i.addEventListener(s,l,!0):g!==void 0?i.addEventListener(s,l,{passive:g}):i.addEventListener(s,l,!1)}function Gd(i,s,l,u,g){var _=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var R=u.stateNode.containerInfo;if(R===g)break;if(S===4)for(S=u.return;S!==null;){var V=S.tag;if((V===3||V===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;R!==null;){if(S=Si(R),S===null)return;if(V=S.tag,V===5||V===6||V===26||V===27){u=_=S;continue t}R=R.parentNode}}u=u.return}Ga(function(){var z=_,$=Ks(l),tt=[];t:{var Y=um.get(i);if(Y!==void 0){var J=rs,dt=i;switch(i){case"keypress":if(ss(l)===0)break t;case"keydown":case"keyup":J=Xa;break;case"focusin":dt="focus",J=mo;break;case"focusout":dt="blur",J=mo;break;case"beforeblur":case"afterblur":J=mo;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Ha;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Wa;break;case sm:case rm:case lm:J=$s;break;case am:J=Ws;break;case"scroll":case"scrollend":J=Ba;break;case"wheel":J=ja;break;case"copy":case"cut":case"paste":J=Ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=_l;break;case"toggle":case"beforetoggle":J=yo}var Tt=(s&4)!==0,ee=!Tt&&(i==="scroll"||i==="scrollend"),B=Tt?Y!==null?Y+"Capture":null:Y;Tt=[];for(var k=z,H;k!==null;){var j=k;if(H=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||H===null||B===null||(j=dn(k,B),j!=null&&Tt.push(Jl(k,j,H))),ee)break;k=k.return}0<Tt.length&&(Y=new J(Y,dt,null,l,$),tt.push({event:Y,listeners:Tt}))}}if((s&7)===0){t:{if(Y=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Y&&l!==Js&&(dt=l.relatedTarget||l.fromElement)&&(Si(dt)||dt[si]))break t;if((J||Y)&&(Y=$.window===$?$:(Y=$.ownerDocument)?Y.defaultView||Y.parentWindow:window,J?(dt=l.relatedTarget||l.toElement,J=z,dt=dt?Si(dt):null,dt!==null&&(ee=a(dt),Tt=dt.tag,dt!==ee||Tt!==5&&Tt!==27&&Tt!==6)&&(dt=null)):(J=null,dt=z),J!==dt)){if(Tt=Fa,j="onMouseLeave",B="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Tt=_l,j="onPointerLeave",B="onPointerEnter",k="pointer"),ee=J==null?Y:ns(J),H=dt==null?Y:ns(dt),Y=new Tt(j,k+"leave",J,l,$),Y.target=ee,Y.relatedTarget=H,j=null,Si($)===z&&(Tt=new Tt(B,k+"enter",dt,l,$),Tt.target=H,Tt.relatedTarget=ee,j=Tt),ee=j,J&&dt)e:{for(Tt=yS,B=J,k=dt,H=0,j=B;j;j=Tt(j))H++;j=0;for(var yt=k;yt;yt=Tt(yt))j++;for(;0<H-j;)B=Tt(B),H--;for(;0<j-H;)k=Tt(k),j--;for(;H--;){if(B===k||k!==null&&B===k.alternate){Tt=B;break e}B=Tt(B),k=Tt(k)}Tt=null}else Tt=null;J!==null&&by(tt,Y,J,Tt,!1),dt!==null&&ee!==null&&by(tt,ee,dt,Tt,!0)}}t:{if(Y=z?ns(z):window,J=Y.nodeName&&Y.nodeName.toLowerCase(),J==="select"||J==="input"&&Y.type==="file")var Ft=Qp;else if(hn(Y))if(Xp)Ft=NA;else{Ft=IA;var gt=RA}else J=Y.nodeName,!J||J.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?z&&fl(z.elementType)&&(Ft=Qp):Ft=wA;if(Ft&&(Ft=Ft(i,z))){cs(tt,Ft,l,$);break t}gt&&gt(i,Y,z),i==="focusout"&&z&&Y.type==="number"&&z.memoizedProps.value!=null&&Ys(Y,"number",Y.value)}switch(gt=z?ns(z):window,i){case"focusin":(hn(gt)||gt.contentEditable==="true")&&(Zs=gt,mf=z,El=null);break;case"focusout":El=mf=Zs=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,im(tt,l,$);break;case"selectionchange":if(DA)break;case"keydown":case"keyup":im(tt,l,$)}var Nt;if(T)t:{switch(i){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Dt?Xt(i,l)&&(Pt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Pt="onCompositionStart");Pt&&(F&&l.locale!=="ko"&&(Dt||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Dt&&(Nt=co()):(Tn=$,Qs="value"in Tn?Tn.value:Tn.textContent,Dt=!0)),gt=Hu(z,Pt),0<gt.length&&(Pt=new ml(Pt,i,null,l,$),tt.push({event:Pt,listeners:gt}),Nt?Pt.data=Nt:(Nt=ve(l),Nt!==null&&(Pt.data=Nt)))),(Nt=w?xe(i,l):Ve(i,l))&&(Pt=Hu(z,"onBeforeInput"),0<Pt.length&&(gt=new ml("onBeforeInput","beforeinput",null,l,$),tt.push({event:gt,listeners:Pt}),gt.data=Nt)),hS(tt,i,z,l,$)}My(tt,s)})}function Jl(i,s,l){return{instance:i,listener:s,currentTarget:l}}function Hu(i,s){for(var l=s+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=dn(i,l),g!=null&&u.unshift(Jl(i,g,_)),g=dn(i,s),g!=null&&u.push(Jl(i,g,_))),i.tag===3)return u;i=i.return}return[]}function yS(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function by(i,s,l,u,g){for(var _=s._reactName,S=[];l!==null&&l!==u;){var R=l,V=R.alternate,z=R.stateNode;if(R=R.tag,V!==null&&V===u)break;R!==5&&R!==26&&R!==27||z===null||(V=z,g?(z=dn(l,_),z!=null&&S.unshift(Jl(l,z,V))):g||(z=dn(l,_),z!=null&&S.push(Jl(l,z,V)))),l=l.return}S.length!==0&&i.push({event:s,listeners:S})}var _S=/\r\n?/g,vS=/\u0000|\uFFFD/g;function xy(i){return(typeof i=="string"?i:""+i).replace(_S,`
`).replace(vS,"")}function Vy(i,s){return s=xy(s),xy(i)===s}function te(i,s,l,u,g,_){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||xn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&xn(i,""+u);break;case"className":lo(i,"class",u);break;case"tabIndex":lo(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":lo(i,l,u);break;case"style":Oa(i,u,_);break;case"data":if(s!=="object"){lo(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=ai(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(s!=="input"&&te(i,s,"name",g.name,g,null),te(i,s,"formEncType",g.formEncType,g,null),te(i,s,"formMethod",g.formMethod,g,null),te(i,s,"formTarget",g.formTarget,g,null)):(te(i,s,"encType",g.encType,g,null),te(i,s,"method",g.method,g,null),te(i,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=ai(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=be);break;case"onScroll":u!=null&&xt("scroll",i);break;case"onScrollEnd":u!=null&&xt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=ai(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":xt("beforetoggle",i),xt("toggle",i),ro(i,"popover",u);break;case"xlinkActuate":bn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":bn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":bn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":bn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":bn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":bn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":bn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":bn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":bn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ro(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=uf.get(l)||l,ro(i,l,u))}}function Bd(i,s,l,u,g,_){switch(l){case"style":Oa(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"children":typeof u=="string"?xn(i,u):(typeof u=="number"||typeof u=="bigint")&&xn(i,""+u);break;case"onScroll":u!=null&&xt("scroll",i);break;case"onScrollEnd":u!=null&&xt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=be);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!so.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),s=l.slice(2,g?l.length-7:void 0),_=i[Ge]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(s,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,u,g);break t}l in i?i[l]=u:u===!0?i.setAttribute(l,""):ro(i,l,u)}}}function ze(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",i),xt("load",i);var u=!1,g=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var S=l[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:te(i,s,_,S,l,null)}}g&&te(i,s,"srcSet",l.srcSet,l,null),u&&te(i,s,"src",l.src,l,null);return;case"input":xt("invalid",i);var R=_=S=g=null,V=null,z=null;for(u in l)if(l.hasOwnProperty(u)){var $=l[u];if($!=null)switch(u){case"name":g=$;break;case"type":S=$;break;case"checked":V=$;break;case"defaultChecked":z=$;break;case"value":_=$;break;case"defaultValue":R=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(o(137,s));break;default:te(i,s,u,$,l,null)}}is(i,_,R,V,z,S,g,!1);return;case"select":xt("invalid",i),u=S=_=null;for(g in l)if(l.hasOwnProperty(g)&&(R=l[g],R!=null))switch(g){case"value":_=R;break;case"defaultValue":S=R;break;case"multiple":u=R;default:te(i,s,g,R,l,null)}s=_,l=S,i.multiple=!!u,s!=null?Bt(i,!!u,s,!1):l!=null&&Bt(i,!!u,l,!0);return;case"textarea":xt("invalid",i),_=g=u=null;for(S in l)if(l.hasOwnProperty(S)&&(R=l[S],R!=null))switch(S){case"value":u=R;break;case"defaultValue":g=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:te(i,s,S,R,l,null)}uo(i,u,g,_);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(u=l[V],u!=null))switch(V){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:te(i,s,V,u,l,null)}return;case"dialog":xt("beforetoggle",i),xt("toggle",i),xt("cancel",i),xt("close",i);break;case"iframe":case"object":xt("load",i);break;case"video":case"audio":for(u=0;u<Yl.length;u++)xt(Yl[u],i);break;case"image":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"embed":case"source":case"link":xt("error",i),xt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in l)if(l.hasOwnProperty(z)&&(u=l[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:te(i,s,z,u,l,null)}return;default:if(fl(s)){for($ in l)l.hasOwnProperty($)&&(u=l[$],u!==void 0&&Bd(i,s,$,u,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(u=l[R],u!=null&&te(i,s,R,u,l,null))}function TS(i,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,S=null,R=null,V=null,z=null,$=null;for(J in l){var tt=l[J];if(l.hasOwnProperty(J)&&tt!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":V=tt;default:u.hasOwnProperty(J)||te(i,s,J,null,u,tt)}}for(var Y in u){var J=u[Y];if(tt=l[Y],u.hasOwnProperty(Y)&&(J!=null||tt!=null))switch(Y){case"type":_=J;break;case"name":g=J;break;case"checked":z=J;break;case"defaultChecked":$=J;break;case"value":S=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,s));break;default:J!==tt&&te(i,s,Y,J,u,tt)}}ao(i,S,R,V,z,$,_,g);return;case"select":J=S=R=Y=null;for(_ in l)if(V=l[_],l.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":J=V;default:u.hasOwnProperty(_)||te(i,s,_,null,u,V)}for(g in u)if(_=u[g],V=l[g],u.hasOwnProperty(g)&&(_!=null||V!=null))switch(g){case"value":Y=_;break;case"defaultValue":R=_;break;case"multiple":S=_;default:_!==V&&te(i,s,g,_,u,V)}s=R,l=S,u=J,Y!=null?Bt(i,!!l,Y,!1):!!u!=!!l&&(s!=null?Bt(i,!!l,s,!0):Bt(i,!!l,l?[]:"",!1));return;case"textarea":J=Y=null;for(R in l)if(g=l[R],l.hasOwnProperty(R)&&g!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:te(i,s,R,null,u,g)}for(S in u)if(g=u[S],_=l[S],u.hasOwnProperty(S)&&(g!=null||_!=null))switch(S){case"value":Y=g;break;case"defaultValue":J=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==_&&te(i,s,S,g,u,_)}os(i,Y,J);return;case"option":for(var dt in l)if(Y=l[dt],l.hasOwnProperty(dt)&&Y!=null&&!u.hasOwnProperty(dt))switch(dt){case"selected":i.selected=!1;break;default:te(i,s,dt,null,u,Y)}for(V in u)if(Y=u[V],J=l[V],u.hasOwnProperty(V)&&Y!==J&&(Y!=null||J!=null))switch(V){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:te(i,s,V,Y,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in l)Y=l[Tt],l.hasOwnProperty(Tt)&&Y!=null&&!u.hasOwnProperty(Tt)&&te(i,s,Tt,null,u,Y);for(z in u)if(Y=u[z],J=l[z],u.hasOwnProperty(z)&&Y!==J&&(Y!=null||J!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,s));break;default:te(i,s,z,Y,u,J)}return;default:if(fl(s)){for(var ee in l)Y=l[ee],l.hasOwnProperty(ee)&&Y!==void 0&&!u.hasOwnProperty(ee)&&Bd(i,s,ee,void 0,u,Y);for($ in u)Y=u[$],J=l[$],!u.hasOwnProperty($)||Y===J||Y===void 0&&J===void 0||Bd(i,s,$,Y,u,J);return}}for(var B in l)Y=l[B],l.hasOwnProperty(B)&&Y!=null&&!u.hasOwnProperty(B)&&te(i,s,B,null,u,Y);for(tt in u)Y=u[tt],J=l[tt],!u.hasOwnProperty(tt)||Y===J||Y==null&&J==null||te(i,s,tt,Y,u,J)}function Py(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ES(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var g=l[u],_=g.transferSize,S=g.initiatorType,R=g.duration;if(_&&R&&Py(S)){for(S=0,R=g.responseEnd,u+=1;u<l.length;u++){var V=l[u],z=V.startTime;if(z>R)break;var $=V.transferSize,tt=V.initiatorType;$&&Py(tt)&&(V=V.responseEnd,S+=$*(V<R?1:(R-z)/(V-z)))}if(--u,s+=8*(_+S)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Fd=null,Hd=null;function zu(i){return i.nodeType===9?i:i.ownerDocument}function Uy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ly(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function zd(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yd=null;function AS(){var i=window.event;return i&&i.type==="popstate"?i===Yd?!1:(Yd=i,!0):(Yd=null,!1)}var ky=typeof setTimeout=="function"?setTimeout:void 0,SS=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,CS=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(i){return Oy.resolve(null).then(i).catch(RS)}:ky;function RS(i){setTimeout(function(){throw i})}function Uo(i){return i==="head"}function qy(i,s){var l=s,u=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(u===0){i.removeChild(g),Rr(s);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Kl(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Kl(l);for(var _=l.firstChild;_;){var S=_.nextSibling,R=_.nodeName;_[Ai]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=S}}else l==="body"&&Kl(i.ownerDocument.body);l=g}while(l);Rr(s)}function Gy(i,s){var l=i;i=0;do{var u=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=u}while(l)}function Jd(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Jd(l),es(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function IS(i,s,l,u){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ai])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=qn(i.nextSibling),i===null)break}return null}function wS(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=qn(i.nextSibling),i===null))return null;return i}function By(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=qn(i.nextSibling),i===null))return null;return i}function Kd(i){return i.data==="$?"||i.data==="$~"}function Qd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function NS(i,s){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||l.readyState!=="loading")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function qn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Xd=null;function Fy(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(s===0)return qn(i.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}i=i.nextSibling}return null}function Hy(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return i;s--}else l!=="/$"&&l!=="/&"||s++}i=i.previousSibling}return null}function zy(i,s,l){switch(s=zu(l),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function Kl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);es(i)}var Gn=new Map,Yy=new Set;function Yu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var zi=lt.d;lt.d={f:MS,r:DS,D:bS,C:xS,L:VS,m:PS,X:LS,S:US,M:kS};function MS(){var i=zi.f(),s=Lu();return i||s}function DS(i){var s=Ci(i);s!==null&&s.tag===5&&s.type==="form"?ag(s):zi.r(i)}var Ar=typeof document>"u"?null:document;function Jy(i,s,l){var u=Ar;if(u&&typeof s=="string"&&s){var g=fe(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Yy.has(g)||(Yy.add(g),i={rel:i,crossOrigin:l,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),ze(s,"link",i),pe(s),u.head.appendChild(s)))}}function bS(i){zi.D(i),Jy("dns-prefetch",i,null)}function xS(i,s){zi.C(i,s),Jy("preconnect",i,s)}function VS(i,s,l){zi.L(i,s,l);var u=Ar;if(u&&i&&s){var g='link[rel="preload"][as="'+fe(s)+'"]';s==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+fe(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+fe(l.imageSizes)+'"]')):g+='[href="'+fe(i)+'"]';var _=g;switch(s){case"style":_=Sr(i);break;case"script":_=Cr(i)}Gn.has(_)||(i=E({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),Gn.set(_,i),u.querySelector(g)!==null||s==="style"&&u.querySelector(Ql(_))||s==="script"&&u.querySelector(Xl(_))||(s=u.createElement("link"),ze(s,"link",i),pe(s),u.head.appendChild(s)))}}function PS(i,s){zi.m(i,s);var l=Ar;if(l&&i){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+fe(u)+'"][href="'+fe(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Cr(i)}if(!Gn.has(_)&&(i=E({rel:"modulepreload",href:i},s),Gn.set(_,i),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Xl(_)))return}u=l.createElement("link"),ze(u,"link",i),pe(u),l.head.appendChild(u)}}}function US(i,s,l){zi.S(i,s,l);var u=Ar;if(u&&i){var g=Jn(u).hoistableStyles,_=Sr(i);s=s||"default";var S=g.get(_);if(!S){var R={loading:0,preload:null};if(S=u.querySelector(Ql(_)))R.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},l),(l=Gn.get(_))&&$d(i,l);var V=S=u.createElement("link");pe(V),ze(V,"link",i),V._p=new Promise(function(z,$){V.onload=z,V.onerror=$}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Ju(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:R},g.set(_,S)}}}function LS(i,s){zi.X(i,s);var l=Ar;if(l&&i){var u=Jn(l).hoistableScripts,g=Cr(i),_=u.get(g);_||(_=l.querySelector(Xl(g)),_||(i=E({src:i,async:!0},s),(s=Gn.get(g))&&Wd(i,s),_=l.createElement("script"),pe(_),ze(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function kS(i,s){zi.M(i,s);var l=Ar;if(l&&i){var u=Jn(l).hoistableScripts,g=Cr(i),_=u.get(g);_||(_=l.querySelector(Xl(g)),_||(i=E({src:i,async:!0,type:"module"},s),(s=Gn.get(g))&&Wd(i,s),_=l.createElement("script"),pe(_),ze(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function Ky(i,s,l,u){var g=(g=Mt.current)?Yu(g):null;if(!g)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Sr(l.href),l=Jn(g).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Sr(l.href);var _=Jn(g).hoistableStyles,S=_.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=g.querySelector(Ql(i)))&&!_._p&&(S.instance=_,S.state.loading=5),Gn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Gn.set(i,l),_||OS(g,i,l,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Cr(l),l=Jn(g).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Sr(i){return'href="'+fe(i)+'"'}function Ql(i){return'link[rel="stylesheet"]['+i+"]"}function Qy(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function OS(i,s,l,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),ze(s,"link",l),pe(s),i.head.appendChild(s))}function Cr(i){return'[src="'+fe(i)+'"]'}function Xl(i){return"script[async]"+i}function Xy(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+fe(l.href)+'"]');if(u)return s.instance=u,pe(u),u;var g=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),pe(u),ze(u,"style",g),Ju(u,l.precedence,i),s.instance=u;case"stylesheet":g=Sr(l.href);var _=i.querySelector(Ql(g));if(_)return s.state.loading|=4,s.instance=_,pe(_),_;u=Qy(l),(g=Gn.get(g))&&$d(u,g),_=(i.ownerDocument||i).createElement("link"),pe(_);var S=_;return S._p=new Promise(function(R,V){S.onload=R,S.onerror=V}),ze(_,"link",u),s.state.loading|=4,Ju(_,l.precedence,i),s.instance=_;case"script":return _=Cr(l.src),(g=i.querySelector(Xl(_)))?(s.instance=g,pe(g),g):(u=l,(g=Gn.get(_))&&(u=E({},l),Wd(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),pe(g),ze(g,"link",u),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ju(u,l.precedence,i));return s.instance}function Ju(i,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,S=0;S<u.length;S++){var R=u[S];if(R.dataset.precedence===s)_=R;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function $d(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Wd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Ku=null;function $y(i,s,l){if(Ku===null){var u=new Map,g=Ku=new Map;g.set(l,u)}else g=Ku,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var _=l[g];if(!(_[Ai]||_[ce]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(s)||"";S=i+S;var R=u.get(S);R?R.push(_):u.set(S,[_])}}return u}function Wy(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function qS(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Zy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function GS(i,s,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=Sr(u.href),_=s.querySelector(Ql(g));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Qu.bind(i),s.then(i,i)),l.state.loading|=4,l.instance=_,pe(_);return}_=s.ownerDocument||s,u=Qy(u),(g=Gn.get(g))&&$d(u,g),_=_.createElement("link"),pe(_);var S=_;S._p=new Promise(function(R,V){S.onload=R,S.onerror=V}),ze(_,"link",u),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Qu.bind(i),s.addEventListener("load",l),s.addEventListener("error",l))}}var Zd=0;function BS(i,s){return i.stylesheets&&i.count===0&&$u(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var u=setTimeout(function(){if(i.stylesheets&&$u(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&Zd===0&&(Zd=62500*ES());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&$u(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Zd?50:800)+s);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Qu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$u(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Xu=null;function $u(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Xu=new Map,s.forEach(FS,i),Xu=null,Qu.call(i))}function FS(i,s){if(!(s.state.loading&4)){var l=Xu.get(i);if(l)var u=l.get(null);else{l=new Map,Xu.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var S=g[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),u=S)}u&&l.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),_=l.get(S)||u,_===u&&l.set(null,g),l.set(S,g),this.count++,u=Qu.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var $l={$$typeof:Z,Provider:null,Consumer:null,_currentValue:_t,_currentValue2:_t,_threadCount:0};function HS(i,s,l,u,g,_,S,R,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function jy(i,s,l,u,g,_,S,R,V,z,$,tt){return i=new HS(i,s,l,S,V,z,$,tt,R),s=1,_===!0&&(s|=24),_=An(3,null,null,s),i.current=_,_.stateNode=i,s=bf(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:u,isDehydrated:l,cache:s},Uf(_),i}function t_(i){return i?(i=er,i):er}function e_(i,s,l,u,g,_){g=t_(g),u.context===null?u.context=g:u.pendingContext=g,u=Co(s),u.payload={element:l},_=_===void 0?null:_,_!==null&&(u.callback=_),l=Ro(i,u,s),l!==null&&(_n(l,i,s),Nl(l,i,s))}function n_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function jd(i,s){n_(i,s),(i=i.alternate)&&n_(i,s)}function i_(i){if(i.tag===13||i.tag===31){var s=hs(i,67108864);s!==null&&_n(s,i,67108864),jd(i,67108864)}}function o_(i){if(i.tag===13||i.tag===31){var s=wn();s=ol(s);var l=hs(i,s);l!==null&&_n(l,i,s),jd(i,s)}}var Wu=!0;function zS(i,s,l,u){var g=X.T;X.T=null;var _=lt.p;try{lt.p=2,th(i,s,l,u)}finally{lt.p=_,X.T=g}}function YS(i,s,l,u){var g=X.T;X.T=null;var _=lt.p;try{lt.p=8,th(i,s,l,u)}finally{lt.p=_,X.T=g}}function th(i,s,l,u){if(Wu){var g=eh(u);if(g===null)Gd(i,s,u,Zu,l),r_(i,u);else if(KS(g,i,s,l,u))u.stopPropagation();else if(r_(i,u),s&4&&-1<JS.indexOf(i)){for(;g!==null;){var _=Ci(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=Yn(_.pendingLanes);if(S!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var V=1<<31-nn(S);R.entanglements[1]|=V,S&=~V}pi(_),(Jt&6)===0&&(Pu=Oe()+500,zl(0))}}break;case 31:case 13:R=hs(_,2),R!==null&&_n(R,_,2),Lu(),jd(_,2)}if(_=eh(u),_===null&&Gd(i,s,u,Zu,l),_===g)break;g=_}g!==null&&u.stopPropagation()}else Gd(i,s,u,null,l)}}function eh(i){return i=Ks(i),nh(i)}var Zu=null;function nh(i){if(Zu=null,i=Si(i),i!==null){var s=a(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=c(s),i!==null)return i;i=null}else if(l===31){if(i=d(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Zu=i,null}function s_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ba()){case Ie:return 2;case De:return 8;case vi:case xa:return 32;case tl:return 268435456;default:return 32}default:return 32}}var ih=!1,Lo=null,ko=null,Oo=null,Wl=new Map,Zl=new Map,qo=[],JS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(i,s){switch(i){case"focusin":case"focusout":Lo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Wl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(s.pointerId)}}function jl(i,s,l,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},s!==null&&(s=Ci(s),s!==null&&i_(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function KS(i,s,l,u,g){switch(s){case"focusin":return Lo=jl(Lo,i,s,l,u,g),!0;case"dragenter":return ko=jl(ko,i,s,l,u,g),!0;case"mouseover":return Oo=jl(Oo,i,s,l,u,g),!0;case"pointerover":var _=g.pointerId;return Wl.set(_,jl(Wl.get(_)||null,i,s,l,u,g)),!0;case"gotpointercapture":return _=g.pointerId,Zl.set(_,jl(Zl.get(_)||null,i,s,l,u,g)),!0}return!1}function l_(i){var s=Si(i.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){i.blockedOn=s,Pa(i.priority,function(){o_(l)});return}}else if(s===31){if(s=d(l),s!==null){i.blockedOn=s,Pa(i.priority,function(){o_(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ju(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=eh(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);Js=u,l.target.dispatchEvent(u),Js=null}else return s=Ci(l),s!==null&&i_(s),i.blockedOn=l,!1;s.shift()}return!0}function a_(i,s,l){ju(i)&&l.delete(s)}function QS(){ih=!1,Lo!==null&&ju(Lo)&&(Lo=null),ko!==null&&ju(ko)&&(ko=null),Oo!==null&&ju(Oo)&&(Oo=null),Wl.forEach(a_),Zl.forEach(a_)}function tc(i,s){i.blockedOn===s&&(i.blockedOn=null,ih||(ih=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,QS)))}var ec=null;function u_(i){ec!==i&&(ec=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ec===i&&(ec=null);for(var s=0;s<i.length;s+=3){var l=i[s],u=i[s+1],g=i[s+2];if(typeof u!="function"){if(nh(u||l)===null)continue;break}var _=Ci(l);_!==null&&(i.splice(s,3),s-=3,ed(_,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function Rr(i){function s(V){return tc(V,i)}Lo!==null&&tc(Lo,i),ko!==null&&tc(ko,i),Oo!==null&&tc(Oo,i),Wl.forEach(s),Zl.forEach(s);for(var l=0;l<qo.length;l++){var u=qo[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<qo.length&&(l=qo[0],l.blockedOn===null);)l_(l),l.blockedOn===null&&qo.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],_=l[u+1],S=g[Ge]||null;if(typeof _=="function")S||u_(l);else if(S){var R=null;if(_&&_.hasAttribute("formAction")){if(g=_,S=_[Ge]||null)R=S.formAction;else if(nh(g)!==null)continue}else R=S.action;typeof R=="function"?l[u+1]=R:(l.splice(u,3),u-=3),u_(l)}}}function c_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function oh(i){this._internalRoot=i}nc.prototype.render=oh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var l=s.current,u=wn();e_(l,u,i,s,null,null)},nc.prototype.unmount=oh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;e_(i.current,2,null,i,null,null),Lu(),s[si]=null}};function nc(i){this._internalRoot=i}nc.prototype.unstable_scheduleHydration=function(i){if(i){var s=Ei();i={blockedOn:null,target:i,priority:s};for(var l=0;l<qo.length&&s!==0&&s<qo[l].priority;l++);qo.splice(l,0,i),l===0&&l_(i)}};var f_=t.version;if(f_!=="19.2.3")throw Error(o(527,f_,"19.2.3"));lt.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var XS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{Zi=ic.inject(XS),Xe=ic}catch{}}return ea.createRoot=function(i,s){if(!r(i))throw Error(o(299));var l=!1,u="",g=_g,_=vg,S=Tg;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=jy(i,1,!1,null,null,l,u,null,g,_,S,c_),i[si]=s.current,qd(i),new oh(s)},ea.hydrateRoot=function(i,s,l){if(!r(i))throw Error(o(299));var u=!1,g="",_=_g,S=vg,R=Tg,V=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),s=jy(i,1,!0,s,l??null,u,g,V,_,S,R,c_),s.context=t_(null),l=s.current,u=wn(),u=ol(u),g=Co(u),g.callback=null,Ro(l,g,u),l=u,s.current.lanes=l,eo(s,l),pi(s),i[si]=s.current,qd(i),new nc(s)},ea.version="19.2.3",ea}var E_;function rC(){if(E_)return lh.exports;E_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),lh.exports=sC(),lh.exports}var lC=rC();const aC=jT(lC);var uC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let cC,fC;function dC(){return{geminiUrl:cC,vertexUrl:fC}}function hC(n,t,e,o){var r,a;if(!n?.baseUrl){const c=dC();return t?(r=c.vertexUrl)!==null&&r!==void 0?r:e:(a=c.geminiUrl)!==null&&a!==void 0?a:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $i{}function ft(n,t){const e=/\{([^}]+)\}/g;return n.replace(e,(o,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const a=t[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,t,e){for(let a=0;a<t.length-1;a++){const c=t[a];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(e))n[d]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const y=n[d];if(Array.isArray(e))for(let m=0;m<y.length;m++){const v=y[m];p(v,t.slice(a+1),e[m])}else for(const m of y)p(m,t.slice(a+1),e)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const y=n[d];p(y[0],t.slice(a+1),e);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const o=t[t.length-1],r=n[o];if(r!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===r)return;if(typeof r=="object"&&typeof e=="object"&&r!==null&&e!==null)Object.assign(r,e);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.assign(n,e):n[o]=e}function f(n,t,e=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let o=0;o<t.length;o++){if(typeof n!="object"||n===null)return e;const r=t[o];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const c=n[a];return Array.isArray(c)?c.map(d=>f(d,t.slice(o+1),e)):e}else return e}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return e;throw o}}function pC(n,t){for(const[e,o]of Object.entries(t)){const r=e.split("."),a=o.split("."),c=new Set;let d=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){d=y;break}if(d!==-1&&a.length>d)for(let y=d;y<a.length;y++){const m=a[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Eh(n,r,a,0,c)}}function Eh(n,t,e,o,r){if(o>=t.length||typeof n!="object"||n===null)return;const a=t[o];if(a.endsWith("[]")){const c=a.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const y of d[c])Eh(y,t,e,o+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),y={};for(const m of d)y[m]=c[m];for(const[m,v]of Object.entries(y)){const E=[];for(const A of e.slice(o))A==="*"?E.push(m):E.push(A);p(c,E,v)}for(const m of d)delete c[m]}}else{const c=n;a in c&&Eh(c[a],t,e,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ip(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mC(n){const t={},e=f(n,["operationName"]);e!=null&&p(t,["operationName"],e);const o=f(n,["resourceName"]);return o!=null&&p(t,["_url","resourceName"],o),t}function gC(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);a!=null&&p(t,["error"],a);const c=f(n,["response","generateVideoResponse"]);return c!=null&&p(t,["response"],_C(c)),t}function yC(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);a!=null&&p(t,["error"],a);const c=f(n,["response"]);return c!=null&&p(t,["response"],vC(c)),t}function _C(n){const t={},e=f(n,["generatedSamples"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(c=>TC(c))),p(t,["generatedVideos"],a)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(t,["raiMediaFilteredReasons"],r),t}function vC(n){const t={},e=f(n,["videos"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(c=>EC(c))),p(t,["generatedVideos"],a)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(t,["raiMediaFilteredReasons"],r),t}function TC(n){const t={},e=f(n,["video"]);return e!=null&&p(t,["video"],wC(e)),t}function EC(n){const t={},e=f(n,["_self"]);return e!=null&&p(t,["video"],NC(e)),t}function AC(n){const t={},e=f(n,["operationName"]);return e!=null&&p(t,["_url","operationName"],e),t}function SC(n){const t={},e=f(n,["operationName"]);return e!=null&&p(t,["_url","operationName"],e),t}function CC(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);a!=null&&p(t,["error"],a);const c=f(n,["response"]);return c!=null&&p(t,["response"],RC(c)),t}function RC(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["parent"]);o!=null&&p(t,["parent"],o);const r=f(n,["documentName"]);return r!=null&&p(t,["documentName"],r),t}function tE(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);a!=null&&p(t,["error"],a);const c=f(n,["response"]);return c!=null&&p(t,["response"],IC(c)),t}function IC(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["parent"]);o!=null&&p(t,["parent"],o);const r=f(n,["documentName"]);return r!=null&&p(t,["documentName"],r),t}function wC(n){const t={},e=f(n,["uri"]);e!=null&&p(t,["uri"],e);const o=f(n,["encodedVideo"]);o!=null&&p(t,["videoBytes"],ip(o));const r=f(n,["encoding"]);return r!=null&&p(t,["mimeType"],r),t}function NC(n){const t={},e=f(n,["gcsUri"]);e!=null&&p(t,["uri"],e);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["videoBytes"],ip(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var A_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(A_||(A_={}));var S_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(S_||(S_={}));var C_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(C_||(C_={}));var Ne;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ne||(Ne={}));var R_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(R_||(R_={}));var I_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(I_||(I_={}));var w_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(w_||(w_={}));var N_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(N_||(N_={}));var M_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(M_||(M_={}));var D_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(D_||(D_={}));var b_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(b_||(b_={}));var x_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(x_||(x_={}));var V_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(V_||(V_={}));var P_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(P_||(P_={}));var U_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(U_||(U_={}));var L_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(L_||(L_={}));var k_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(k_||(k_={}));var O_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(O_||(O_={}));var q_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(q_||(q_={}));var G_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(G_||(G_={}));var B_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(B_||(B_={}));var Ec;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ec||(Ec={}));var F_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(F_||(F_={}));var H_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(H_||(H_={}));var z_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(z_||(z_={}));var Ah;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ah||(Ah={}));var Y_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Y_||(Y_={}));var J_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(J_||(J_={}));var K_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(K_||(K_={}));var Q_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Q_||(Q_={}));var X_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(X_||(X_={}));var $_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})($_||($_={}));var W_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(W_||(W_={}));var Z_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Z_||(Z_={}));var j_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(j_||(j_={}));var tv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(tv||(tv={}));var ev;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ev||(ev={}));var nv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(nv||(nv={}));var iv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(iv||(iv={}));var ov;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ov||(ov={}));var sv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(sv||(sv={}));var rv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(rv||(rv={}));var lv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(lv||(lv={}));var av;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(av||(av={}));var uv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(uv||(uv={}));var cv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(cv||(cv={}));var fv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(fv||(fv={}));var dv;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(dv||(dv={}));var hv;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(hv||(hv={}));var pv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(pv||(pv={}));var mv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(mv||(mv={}));var gv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(gv||(gv={}));var yv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yv||(yv={}));var _v;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_v||(_v={}));var vv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(vv||(vv={}));var Dr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Dr||(Dr={}));class Sh{constructor(t){const e={};for(const o of t.headers.entries())e[o[0]]=o[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class na{get text(){var t,e,o,r,a,c,d,y;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const A of(y=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[I,x]of Object.entries(A))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(x!==null||x!==void 0)&&E.push(I);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,m+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var t,e,o,r,a,c,d,y;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(y=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[A,I]of Object.entries(E))A!=="inlineData"&&(I!==null||I!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,e,o,r,a,c,d,y;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if(m?.length!==0)return m}get executableCode(){var t,e,o,r,a,c,d,y,m;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if(v?.length!==0)return(m=v?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,e,o,r,a,c,d,y,m;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(d=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if(v?.length!==0)return(m=v?.[0])===null||m===void 0?void 0:m.output}}class Tv{}class Ev{}class MC{}class DC{}class bC{}class xC{}class Av{}class Sv{}class Cv{}class VC{}class Ac{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const o=new Ac;let r;const a=t;return e?r=yC(a):r=gC(a),Object.assign(o,r),o}}class Rv{}class Iv{}class wv{}class Nv{}class PC{}class UC{}class LC{}class op{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const o=new op,a=CC(t);return Object.assign(o,a),o}}class kC{}class OC{}class qC{}class Mv{}class GC{get text(){var t,e,o;let r="",a=!1;const c=[];for(const d of(o=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&o!==void 0?o:[]){for(const[y,m]of Object.entries(d))y!=="text"&&y!=="thought"&&m!==null&&c.push(y);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var t,e,o;let r="";const a=[];for(const c of(o=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&o!==void 0?o:[]){for(const[d,y]of Object.entries(c))d!=="inlineData"&&y!==null&&a.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class BC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class sp{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const o=new sp,a=tE(t);return Object.assign(o,a),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function eE(n,t){const e=Yt(n,t);return e?e.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:e.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${e}`:e:""}function nE(n){return Array.isArray(n)?n.map(t=>Sc(t)):[Sc(n)]}function Sc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function iE(n){const t=Sc(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function oE(n){const t=Sc(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Dv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function sE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>Dv(t)):[Dv(n)]}function Ch(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function bv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function xv(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function en(n){if(n==null)throw new Error("ContentUnion is required");return Ch(n)?n:{role:"user",parts:sE(n)}}function rp(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const o=en(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const e=en(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>en(e)):[en(t)]}function Fn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(bv(n)||xv(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[en(n)]}const t=[],e=[],o=Ch(n[0]);for(const r of n){const a=Ch(r);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(r);else{if(bv(r)||xv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(r)}}return o||t.push({role:"user",parts:sE(e)}),t}function FC(n,t){n.includes("null")&&(t.nullable=!0);const e=n.filter(o=>o!=="null");if(e.length===1)t.type=Object.values(Ne).includes(e[0].toUpperCase())?e[0].toUpperCase():Ne.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of e)t.anyOf.push({type:Object.values(Ne).includes(o.toUpperCase())?o.toUpperCase():Ne.TYPE_UNSPECIFIED})}}function xr(n){const t={},e=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,n=a[1]):a[1].type==="null"&&(t.nullable=!0,n=a[0])),n.type instanceof Array&&FC(n.type,t);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;t.type=Object.values(Ne).includes(d.toUpperCase())?d.toUpperCase():Ne.TYPE_UNSPECIFIED}else if(e.includes(c))t[c]=xr(d);else if(o.includes(c)){const y=[];for(const m of d){if(m.type=="null"){t.nullable=!0;continue}y.push(xr(m))}t[c]=y}else if(r.includes(c)){const y={};for(const[m,v]of Object.entries(d))y[m]=xr(v);t[c]=y}else{if(c==="additionalProperties")continue;t[c]=d}return t}function lp(n){return xr(n)}function ap(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function up(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function zr(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=xr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=xr(t.response));return n}function Yr(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of n)t.push(e);return t}function HC(n,t,e,o=1){const r=!t.startsWith(`${e}/`)&&t.split("/").length===o;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}/${t}`:t:r?`${e}/${t}`:t}function Wi(n,t){if(typeof t!="string")throw new Error("name must be a string");return HC(n,t,"cachedContents")}function rE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Xo(n){return ip(n)}function zC(n){return n!=null&&typeof n=="object"&&"name"in n}function YC(n){return n!=null&&typeof n=="object"&&"video"in n}function JC(n){return n!=null&&typeof n=="object"&&"uri"in n}function lE(n){var t;let e;if(zC(n)&&(e=n.name),!(JC(n)&&(e=n.uri,e===void 0))&&!(YC(n)&&(e=(t=n.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof n=="string"&&(e=n),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const r=e.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${e}`);e=r[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function aE(n,t){let e;return n.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function uE(n){for(const t of["models","tunedModels","publisherModels"])if(KC(n,t))return n[t];return[]}function KC(n,t){return n!==null&&typeof n=="object"&&t in n}function QC(n,t={}){const e=n,o={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(o.responseJsonSchema=e.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function XC(n,t={}){const e=[],o=new Set;for(const r of n){const a=r.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const c=QC(r,t);c.functionDeclarations&&e.push(...c.functionDeclarations)}return{functionDeclarations:e}}function cE(n,t){let e;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))e={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))e={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))e={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");e={inlinedRequests:t}}else e=t;const o=[e.gcsUri,e.bigqueryUri].filter(Boolean).length,r=[e.inlinedRequests,e.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return e}function $C(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function fE(n){if(typeof n!="object"||n===null)return{};const t=n,e=t.inlinedResponses;if(typeof e!="object"||e===null)return n;const r=e.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){a=!0;break}}return a&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function Jr(n,t){const e=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function dE(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WC(n){const t={},e=f(n,["responsesFile"]);e!=null&&p(t,["fileName"],e);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>bR(c))),p(t,["inlinedResponses"],a)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),p(t,["inlinedEmbedContentResponses"],a)}return t}function ZC(n){const t={},e=f(n,["predictionsFormat"]);e!=null&&p(t,["format"],e);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&p(t,["gcsUri"],o);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&p(t,["bigqueryUri"],r),t}function jC(n){const t={},e=f(n,["format"]);e!=null&&p(t,["predictionsFormat"],e);const o=f(n,["gcsUri"]);o!=null&&p(t,["gcsDestination","outputUriPrefix"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&p(t,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function pc(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata","displayName"]);o!=null&&p(t,["displayName"],o);const r=f(n,["metadata","state"]);r!=null&&p(t,["state"],dE(r));const a=f(n,["metadata","createTime"]);a!=null&&p(t,["createTime"],a);const c=f(n,["metadata","endTime"]);c!=null&&p(t,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&p(t,["updateTime"],d);const y=f(n,["metadata","model"]);y!=null&&p(t,["model"],y);const m=f(n,["metadata","output"]);return m!=null&&p(t,["dest"],WC(fE(m))),t}function Rh(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const r=f(n,["state"]);r!=null&&p(t,["state"],dE(r));const a=f(n,["error"]);a!=null&&p(t,["error"],a);const c=f(n,["createTime"]);c!=null&&p(t,["createTime"],c);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const y=f(n,["endTime"]);y!=null&&p(t,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const v=f(n,["model"]);v!=null&&p(t,["model"],v);const E=f(n,["inputConfig"]);E!=null&&p(t,["src"],tR(E));const A=f(n,["outputConfig"]);A!=null&&p(t,["dest"],ZC(fE(A)));const I=f(n,["completionStats"]);return I!=null&&p(t,["completionStats"],I),t}function tR(n){const t={},e=f(n,["instancesFormat"]);e!=null&&p(t,["format"],e);const o=f(n,["gcsSource","uris"]);o!=null&&p(t,["gcsUri"],o);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&p(t,["bigqueryUri"],r),t}function eR(n,t){const e={};if(f(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(t,["fileName"]);o!=null&&p(e,["fileName"],o);const r=f(t,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>DR(n,c))),p(e,["requests","requests"],a)}return e}function nR(n){const t={},e=f(n,["format"]);e!=null&&p(t,["instancesFormat"],e);const o=f(n,["gcsUri"]);o!=null&&p(t,["gcsSource","uris"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&p(t,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function iR(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function oR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function sR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function rR(n){const t={},e=f(n,["content"]);e!=null&&p(t,["content"],e);const o=f(n,["citationMetadata"]);o!=null&&p(t,["citationMetadata"],lR(o));const r=f(n,["tokenCount"]);r!=null&&p(t,["tokenCount"],r);const a=f(n,["finishReason"]);a!=null&&p(t,["finishReason"],a);const c=f(n,["avgLogprobs"]);c!=null&&p(t,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&p(t,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&p(t,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(I=>I)),p(t,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(t,["urlContextMetadata"],E),t}function lR(n){const t={},e=f(n,["citationSources"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>r)),p(t,["citations"],o)}return t}function hE(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(a=>OR(a))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function aR(n,t){const e={},o=f(n,["displayName"]);if(t!==void 0&&o!=null&&p(t,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function uR(n,t){const e={},o=f(n,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const r=f(n,["dest"]);return t!==void 0&&r!=null&&p(t,["outputConfig"],jC($C(r))),e}function Vv(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["src"]);r!=null&&p(e,["batch","inputConfig"],eR(n,cE(n,r)));const a=f(t,["config"]);return a!=null&&aR(a,e),e}function cR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["model"],Yt(n,o));const r=f(t,["src"]);r!=null&&p(e,["inputConfig"],nR(cE(n,r)));const a=f(t,["config"]);return a!=null&&uR(a,e),e}function fR(n,t){const e={},o=f(n,["displayName"]);return t!==void 0&&o!=null&&p(t,["batch","displayName"],o),e}function dR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["src"]);r!=null&&p(e,["batch","inputConfig"],vR(n,r));const a=f(t,["config"]);return a!=null&&fR(a,e),e}function hR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function pR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function mR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);return a!=null&&p(t,["error"],a),t}function gR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);return a!=null&&p(t,["error"],a),t}function yR(n,t){const e={},o=f(t,["contents"]);if(o!=null){let a=rp(n,o);Array.isArray(a)&&(a=a.map(c=>c)),p(e,["requests[]","request","content"],a)}const r=f(t,["config"]);return r!=null&&(p(e,["_self"],_R(r,e)),pC(e,{"requests[].*":"requests[].request.*"})),e}function _R(n,t){const e={},o=f(n,["taskType"]);t!==void 0&&o!=null&&p(t,["requests[]","taskType"],o);const r=f(n,["title"]);t!==void 0&&r!=null&&p(t,["requests[]","title"],r);const a=f(n,["outputDimensionality"]);if(t!==void 0&&a!=null&&p(t,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function vR(n,t){const e={},o=f(t,["fileName"]);o!=null&&p(e,["file_name"],o);const r=f(t,["inlinedRequests"]);return r!=null&&p(e,["requests"],yR(n,r)),e}function TR(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function ER(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function AR(n){const t={},e=f(n,["allowedFunctionNames"]);e!=null&&p(t,["allowedFunctionNames"],e);const o=f(n,["mode"]);if(o!=null&&p(t,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function SR(n,t,e){const o={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],hE(en(r)));const a=f(t,["temperature"]);a!=null&&p(o,["temperature"],a);const c=f(t,["topP"]);c!=null&&p(o,["topP"],c);const d=f(t,["topK"]);d!=null&&p(o,["topK"],d);const y=f(t,["candidateCount"]);y!=null&&p(o,["candidateCount"],y);const m=f(t,["maxOutputTokens"]);m!=null&&p(o,["maxOutputTokens"],m);const v=f(t,["stopSequences"]);v!=null&&p(o,["stopSequences"],v);const E=f(t,["responseLogprobs"]);E!=null&&p(o,["responseLogprobs"],E);const A=f(t,["logprobs"]);A!=null&&p(o,["logprobs"],A);const I=f(t,["presencePenalty"]);I!=null&&p(o,["presencePenalty"],I);const x=f(t,["frequencyPenalty"]);x!=null&&p(o,["frequencyPenalty"],x);const O=f(t,["seed"]);O!=null&&p(o,["seed"],O);const U=f(t,["responseMimeType"]);U!=null&&p(o,["responseMimeType"],U);const Q=f(t,["responseSchema"]);Q!=null&&p(o,["responseSchema"],lp(Q));const nt=f(t,["responseJsonSchema"]);if(nt!=null&&p(o,["responseJsonSchema"],nt),f(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(t,["safetySettings"]);if(e!==void 0&&Z!=null){let b=Z;Array.isArray(b)&&(b=b.map(Kt=>qR(Kt))),p(e,["safetySettings"],b)}const it=f(t,["tools"]);if(e!==void 0&&it!=null){let b=Yr(it);Array.isArray(b)&&(b=b.map(Kt=>BR(zr(Kt)))),p(e,["tools"],b)}const ct=f(t,["toolConfig"]);if(e!==void 0&&ct!=null&&p(e,["toolConfig"],GR(ct)),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const rt=f(t,["cachedContent"]);e!==void 0&&rt!=null&&p(e,["cachedContent"],Wi(n,rt));const D=f(t,["responseModalities"]);D!=null&&p(o,["responseModalities"],D);const M=f(t,["mediaResolution"]);M!=null&&p(o,["mediaResolution"],M);const N=f(t,["speechConfig"]);if(N!=null&&p(o,["speechConfig"],ap(N)),f(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(t,["thinkingConfig"]);P!=null&&p(o,["thinkingConfig"],P);const L=f(t,["imageConfig"]);L!=null&&p(o,["imageConfig"],MR(L));const G=f(t,["enableEnhancedCivicAnswers"]);return G!=null&&p(o,["enableEnhancedCivicAnswers"],G),o}function CR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>rR(m))),p(t,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&p(t,["modelVersion"],r);const a=f(n,["promptFeedback"]);a!=null&&p(t,["promptFeedback"],a);const c=f(n,["responseId"]);c!=null&&p(t,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&p(t,["usageMetadata"],d),t}function RR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function IR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function wR(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function NR(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function MR(n){const t={},e=f(n,["aspectRatio"]);e!=null&&p(t,["aspectRatio"],e);const o=f(n,["imageSize"]);if(o!=null&&p(t,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function DR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["request","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let d=Fn(r);Array.isArray(d)&&(d=d.map(y=>hE(y))),p(e,["request","contents"],d)}const a=f(t,["metadata"]);a!=null&&p(e,["metadata"],a);const c=f(t,["config"]);return c!=null&&p(e,["request","generationConfig"],SR(n,c,f(e,["request"],{}))),e}function bR(n){const t={},e=f(n,["response"]);e!=null&&p(t,["response"],CR(e));const o=f(n,["error"]);return o!=null&&p(t,["error"],o),t}function xR(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);if(t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function VR(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);t!==void 0&&r!=null&&p(t,["_query","pageToken"],r);const a=f(n,["filter"]);return t!==void 0&&a!=null&&p(t,["_query","filter"],a),e}function PR(n){const t={},e=f(n,["config"]);return e!=null&&xR(e,t),t}function UR(n){const t={},e=f(n,["config"]);return e!=null&&VR(e,t),t}function LR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>pc(c))),p(t,["batchJobs"],a)}return t}function kR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Rh(c))),p(t,["batchJobs"],a)}return t}function OR(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&p(t,["fileData"],TR(a));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],ER(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],iR(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function qR(n){const t={},e=f(n,["category"]);if(e!=null&&p(t,["category"],e),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&p(t,["threshold"],o),t}function GR(n){const t={},e=f(n,["retrievalConfig"]);e!=null&&p(t,["retrievalConfig"],e);const o=f(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],AR(o)),t}function BR(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],wR(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],NR(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ji;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ji||(Ji={}));class Vs{constructor(t,e,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,o,r)}init(t,e,o){var r,a;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=e.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FR extends $i{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Vs(Ji.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(t){const e=Vv(this.apiClient,t),o=e._url,r=ft("{model}:batchGenerateContent",o),d=e.batch.inputConfig.requests,y=d.requests,m=[];for(const v of y){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=A,E.request=I}m.push(E)}return d.requests=m,delete e.config,delete e._url,delete e._query,{path:r,body:e}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,e){const o=e?Object.assign({},e):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const a=this.getGcsUri(t),c=this.getBigqueryUri(t);if(a)a.endsWith(".jsonl")?o.dest=`${a.slice(0,-6)}/dest`:o.dest=`${a}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=cR(this.apiClient,t);return d=ft("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Rh(v))}else{const m=Vv(this.apiClient,t);return d=ft("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>pc(v))}}async createEmbeddingsInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dR(this.apiClient,t);return a=ft("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>pc(y))}}async get(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=IR(this.apiClient,t);return d=ft("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Rh(v))}else{const m=RR(this.apiClient,t);return d=ft("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>pc(v))}}async cancel(t){var e,o,r,a;let c="",d={};if(this.apiClient.isVertexAI()){const y=sR(this.apiClient,t);c=ft("batchPredictionJobs/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=oR(this.apiClient,t);c=ft("batches/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=UR(t);return d=ft("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=kR(v),A=new Mv;return Object.assign(A,E),A})}else{const m=PR(t);return d=ft("batches",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=LR(v),A=new Mv;return Object.assign(A,E),A})}}async delete(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=pR(this.apiClient,t);return d=ft("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>gR(v))}else{const m=hR(this.apiClient,t);return d=ft("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>mR(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HR(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function Pv(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(a=>dI(a))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function zR(n,t){const e={},o=f(n,["ttl"]);t!==void 0&&o!=null&&p(t,["ttl"],o);const r=f(n,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const a=f(n,["displayName"]);t!==void 0&&a!=null&&p(t,["displayName"],a);const c=f(n,["contents"]);if(t!==void 0&&c!=null){let v=Fn(c);Array.isArray(v)&&(v=v.map(E=>Pv(E))),p(t,["contents"],v)}const d=f(n,["systemInstruction"]);t!==void 0&&d!=null&&p(t,["systemInstruction"],Pv(en(d)));const y=f(n,["tools"]);if(t!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(E=>pI(E))),p(t,["tools"],v)}const m=f(n,["toolConfig"]);if(t!==void 0&&m!=null&&p(t,["toolConfig"],hI(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function YR(n,t){const e={},o=f(n,["ttl"]);t!==void 0&&o!=null&&p(t,["ttl"],o);const r=f(n,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const a=f(n,["displayName"]);t!==void 0&&a!=null&&p(t,["displayName"],a);const c=f(n,["contents"]);if(t!==void 0&&c!=null){let E=Fn(c);Array.isArray(E)&&(E=E.map(A=>A)),p(t,["contents"],E)}const d=f(n,["systemInstruction"]);t!==void 0&&d!=null&&p(t,["systemInstruction"],en(d));const y=f(n,["tools"]);if(t!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(A=>mI(A))),p(t,["tools"],E)}const m=f(n,["toolConfig"]);t!==void 0&&m!=null&&p(t,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return t!==void 0&&v!=null&&p(t,["encryption_spec","kmsKeyName"],v),e}function JR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["model"],eE(n,o));const r=f(t,["config"]);return r!=null&&zR(r,e),e}function KR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["model"],eE(n,o));const r=f(t,["config"]);return r!=null&&YR(r,e),e}function QR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Wi(n,o)),e}function XR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Wi(n,o)),e}function $R(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function WR(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function ZR(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function jR(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function tI(n){const t={},e=f(n,["allowedFunctionNames"]);e!=null&&p(t,["allowedFunctionNames"],e);const o=f(n,["mode"]);if(o!=null&&p(t,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function eI(n){const t={},e=f(n,["description"]);e!=null&&p(t,["description"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["parameters"]);r!=null&&p(t,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&p(t,["parametersJsonSchema"],a);const c=f(n,["response"]);c!=null&&p(t,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(t,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function nI(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Wi(n,o)),e}function iI(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Wi(n,o)),e}function oI(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function sI(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function rI(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function lI(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function aI(n){const t={},e=f(n,["config"]);return e!=null&&rI(e,t),t}function uI(n){const t={},e=f(n,["config"]);return e!=null&&lI(e,t),t}function cI(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),p(t,["cachedContents"],a)}return t}function fI(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),p(t,["cachedContents"],a)}return t}function dI(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&p(t,["fileData"],ZR(a));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],jR(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],HR(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function hI(n){const t={},e=f(n,["retrievalConfig"]);e!=null&&p(t,["retrievalConfig"],e);const o=f(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],tI(o)),t}function pI(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],oI(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],sI(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function mI(n){const t={},e=f(n,["retrieval"]);e!=null&&p(t,["retrieval"],e);const o=f(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(t,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(t,["enterpriseWebSearch"],a);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>eI(A))),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&p(t,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(t,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function gI(n,t){const e={},o=f(n,["ttl"]);t!==void 0&&o!=null&&p(t,["ttl"],o);const r=f(n,["expireTime"]);return t!==void 0&&r!=null&&p(t,["expireTime"],r),e}function yI(n,t){const e={},o=f(n,["ttl"]);t!==void 0&&o!=null&&p(t,["ttl"],o);const r=f(n,["expireTime"]);return t!==void 0&&r!=null&&p(t,["expireTime"],r),e}function _I(n,t){const e={},o=f(t,["name"]);o!=null&&p(e,["_url","name"],Wi(n,o));const r=f(t,["config"]);return r!=null&&gI(r,e),e}function vI(n,t){const e={},o=f(t,["name"]);o!=null&&p(e,["_url","name"],Wi(n,o));const r=f(t,["config"]);return r!=null&&yI(r,e),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TI extends $i{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Vs(Ji.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(e),e)}async create(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=KR(this.apiClient,t);return d=ft("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=JR(this.apiClient,t);return d=ft("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=iI(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=nI(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=XR(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=WR(v),A=new wv;return Object.assign(A,E),A})}else{const m=QR(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=$R(v),A=new wv;return Object.assign(A,E),A})}}async update(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=vI(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=_I(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=uI(t);return d=ft("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=fI(v),A=new Nv;return Object.assign(A,E),A})}else{const m=aI(t);return d=ft("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=cI(v),A=new Nv;return Object.assign(A,E),A})}}}function Cc(n,t){var e={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t.indexOf(o)<0&&(e[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(e[o[r]]=n[o[r]]);return e}function Uv(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],o=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(n){return this instanceof St?(this.v=n,this):new St(n)}function Zn(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=e.apply(n,t||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(x){return Promise.resolve(x).then(I,E)}}function d(I,x){o[I]&&(r[I]=function(O){return new Promise(function(U,Q){a.push([I,O,U,Q])>1||y(I,O)})},x&&(r[I]=x(r[I])))}function y(I,x){try{m(o[I](x))}catch(O){A(a[0][3],O)}}function m(I){I.value instanceof St?Promise.resolve(I.value.v).then(v,E):A(a[0][2],I)}function v(I){y("next",I)}function E(I){y("throw",I)}function A(I,x){I(x),a.shift(),a.length&&y(a[0][0],a[0][1])}}function jn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Uv=="function"?Uv(n):n[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(a){e[a]=n[a]&&function(c){return new Promise(function(d,y){c=n[a](c),r(d,y,c.done,c.value)})}}function r(a,c,d,y){Promise.resolve(y).then(function(m){a({value:m,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EI(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const e=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:pE(e)}function pE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function AI(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Lv(n){if(n===void 0||n.length===0)return[];const t=[],e=n.length;let o=0;for(;o<e;)if(n[o].role==="user")t.push(n[o]),o++;else{const r=[];let a=!0;for(;o<e&&n[o].role==="model";)r.push(n[o]),a&&!pE(n[o])&&(a=!1),o++;a?t.push(...r):t.pop()}return t}class SI{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new CI(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class CI{constructor(t,e,o,r={},a=[]){this.apiClient=t,this.modelsModule=e,this.model=o,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),AI(a)}async sendMessage(t){var e;await this.sendPromise;const o=en(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var a,c,d;const y=await r,m=(c=(a=y.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const I=m?[m]:[];this.recordHistory(o,I,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var e;await this.sendPromise;const o=en(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,o)}getHistory(t=!1){const e=t?Lv(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){return Zn(this,arguments,function*(){var r,a,c,d,y,m;const v=[];try{for(var E=!0,A=jn(t),I;I=yield St(A.next()),r=I.done,!r;E=!0){d=I.value,E=!1;const x=d;if(EI(x)){const O=(m=(y=x.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;O!==void 0&&v.push(O)}yield yield St(x)}}catch(x){a={error:x}}finally{try{!E&&!r&&(c=A.return)&&(yield St(c.call(A)))}finally{if(a)throw a.error}}this.recordHistory(e,v)})}recordHistory(t,e,o){let r=[];e.length>0&&e.every(a=>a.role!==void 0)?r=e:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Lv(o)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,kc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RI(n){const t={},e=f(n,["file"]);return e!=null&&p(t,["file"],e),t}function II(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function wI(n){const t={},e=f(n,["name"]);return e!=null&&p(t,["_url","file"],lE(e)),t}function NI(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function MI(n){const t={},e=f(n,["name"]);return e!=null&&p(t,["_url","file"],lE(e)),t}function DI(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function bI(n){const t={},e=f(n,["config"]);return e!=null&&DI(e,t),t}function xI(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),p(t,["files"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VI extends $i{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Vs(Ji.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>e)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bI(t);return a=ft("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=xI(y),v=new kC;return Object.assign(v,m),v})}}async createInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RI(t);return a=ft("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=II(y),v=new OC;return Object.assign(v,m),v})}}async get(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MI(t);return a=ft("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wI(t);return a=ft("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=NI(y),v=new qC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mc(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function PI(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(a=>$I(a))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function UI(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function LI(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function kI(n){const t={},e=f(n,["description"]);e!=null&&p(t,["description"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["parameters"]);r!=null&&p(t,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&p(t,["parametersJsonSchema"],a);const c=f(n,["response"]);c!=null&&p(t,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(t,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function OI(n){const t={},e=f(n,["modelSelectionConfig"]);e!=null&&p(t,["modelConfig"],e);const o=f(n,["responseJsonSchema"]);o!=null&&p(t,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&p(t,["audioTimestamp"],r);const a=f(n,["candidateCount"]);a!=null&&p(t,["candidateCount"],a);const c=f(n,["enableAffectiveDialog"]);c!=null&&p(t,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&p(t,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&p(t,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&p(t,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&p(t,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&p(t,["presencePenalty"],E);const A=f(n,["responseLogprobs"]);A!=null&&p(t,["responseLogprobs"],A);const I=f(n,["responseMimeType"]);I!=null&&p(t,["responseMimeType"],I);const x=f(n,["responseModalities"]);x!=null&&p(t,["responseModalities"],x);const O=f(n,["responseSchema"]);O!=null&&p(t,["responseSchema"],O);const U=f(n,["routingConfig"]);U!=null&&p(t,["routingConfig"],U);const Q=f(n,["seed"]);Q!=null&&p(t,["seed"],Q);const nt=f(n,["speechConfig"]);nt!=null&&p(t,["speechConfig"],nt);const Z=f(n,["stopSequences"]);Z!=null&&p(t,["stopSequences"],Z);const it=f(n,["temperature"]);it!=null&&p(t,["temperature"],it);const ct=f(n,["thinkingConfig"]);ct!=null&&p(t,["thinkingConfig"],ct);const rt=f(n,["topK"]);rt!=null&&p(t,["topK"],rt);const D=f(n,["topP"]);if(D!=null&&p(t,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function qI(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function GI(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function BI(n,t){const e={},o=f(n,["generationConfig"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);t!==void 0&&a!=null&&p(t,["setup","generationConfig","temperature"],a);const c=f(n,["topP"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);t!==void 0&&E!=null&&p(t,["setup","generationConfig","speechConfig"],up(E));const A=f(n,["thinkingConfig"]);t!==void 0&&A!=null&&p(t,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);t!==void 0&&I!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],I);const x=f(n,["systemInstruction"]);t!==void 0&&x!=null&&p(t,["setup","systemInstruction"],PI(en(x)));const O=f(n,["tools"]);if(t!==void 0&&O!=null){let rt=Yr(O);Array.isArray(rt)&&(rt=rt.map(D=>ZI(zr(D)))),p(t,["setup","tools"],rt)}const U=f(n,["sessionResumption"]);t!==void 0&&U!=null&&p(t,["setup","sessionResumption"],WI(U));const Q=f(n,["inputAudioTranscription"]);t!==void 0&&Q!=null&&p(t,["setup","inputAudioTranscription"],Q);const nt=f(n,["outputAudioTranscription"]);t!==void 0&&nt!=null&&p(t,["setup","outputAudioTranscription"],nt);const Z=f(n,["realtimeInputConfig"]);t!==void 0&&Z!=null&&p(t,["setup","realtimeInputConfig"],Z);const it=f(n,["contextWindowCompression"]);t!==void 0&&it!=null&&p(t,["setup","contextWindowCompression"],it);const ct=f(n,["proactivity"]);if(t!==void 0&&ct!=null&&p(t,["setup","proactivity"],ct),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function FI(n,t){const e={},o=f(n,["generationConfig"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig"],OI(o));const r=f(n,["responseModalities"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);t!==void 0&&a!=null&&p(t,["setup","generationConfig","temperature"],a);const c=f(n,["topP"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);t!==void 0&&E!=null&&p(t,["setup","generationConfig","speechConfig"],up(E));const A=f(n,["thinkingConfig"]);t!==void 0&&A!=null&&p(t,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);t!==void 0&&I!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],I);const x=f(n,["systemInstruction"]);t!==void 0&&x!=null&&p(t,["setup","systemInstruction"],en(x));const O=f(n,["tools"]);if(t!==void 0&&O!=null){let D=Yr(O);Array.isArray(D)&&(D=D.map(M=>jI(zr(M)))),p(t,["setup","tools"],D)}const U=f(n,["sessionResumption"]);t!==void 0&&U!=null&&p(t,["setup","sessionResumption"],U);const Q=f(n,["inputAudioTranscription"]);t!==void 0&&Q!=null&&p(t,["setup","inputAudioTranscription"],Q);const nt=f(n,["outputAudioTranscription"]);t!==void 0&&nt!=null&&p(t,["setup","outputAudioTranscription"],nt);const Z=f(n,["realtimeInputConfig"]);t!==void 0&&Z!=null&&p(t,["setup","realtimeInputConfig"],Z);const it=f(n,["contextWindowCompression"]);t!==void 0&&it!=null&&p(t,["setup","contextWindowCompression"],it);const ct=f(n,["proactivity"]);t!==void 0&&ct!=null&&p(t,["setup","proactivity"],ct);const rt=f(n,["explicitVadSignal"]);return t!==void 0&&rt!=null&&p(t,["setup","explicitVadSignal"],rt),e}function HI(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["setup","model"],Yt(n,o));const r=f(t,["config"]);return r!=null&&p(e,["config"],BI(r,e)),e}function zI(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["setup","model"],Yt(n,o));const r=f(t,["config"]);return r!=null&&p(e,["config"],FI(r,e)),e}function YI(n){const t={},e=f(n,["musicGenerationConfig"]);return e!=null&&p(t,["musicGenerationConfig"],e),t}function JI(n){const t={},e=f(n,["weightedPrompts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>r)),p(t,["weightedPrompts"],o)}return t}function KI(n){const t={},e=f(n,["media"]);if(e!=null){let m=nE(e);Array.isArray(m)&&(m=m.map(v=>mc(v))),p(t,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&p(t,["audio"],mc(oE(o)));const r=f(n,["audioStreamEnd"]);r!=null&&p(t,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&p(t,["video"],mc(iE(a)));const c=f(n,["text"]);c!=null&&p(t,["text"],c);const d=f(n,["activityStart"]);d!=null&&p(t,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&p(t,["activityEnd"],y),t}function QI(n){const t={},e=f(n,["media"]);if(e!=null){let m=nE(e);Array.isArray(m)&&(m=m.map(v=>v)),p(t,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&p(t,["audio"],oE(o));const r=f(n,["audioStreamEnd"]);r!=null&&p(t,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&p(t,["video"],iE(a));const c=f(n,["text"]);c!=null&&p(t,["text"],c);const d=f(n,["activityStart"]);d!=null&&p(t,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&p(t,["activityEnd"],y),t}function XI(n){const t={},e=f(n,["setupComplete"]);e!=null&&p(t,["setupComplete"],e);const o=f(n,["serverContent"]);o!=null&&p(t,["serverContent"],o);const r=f(n,["toolCall"]);r!=null&&p(t,["toolCall"],r);const a=f(n,["toolCallCancellation"]);a!=null&&p(t,["toolCallCancellation"],a);const c=f(n,["usageMetadata"]);c!=null&&p(t,["usageMetadata"],tw(c));const d=f(n,["goAway"]);d!=null&&p(t,["goAway"],d);const y=f(n,["sessionResumptionUpdate"]);y!=null&&p(t,["sessionResumptionUpdate"],y);const m=f(n,["voiceActivityDetectionSignal"]);m!=null&&p(t,["voiceActivityDetectionSignal"],m);const v=f(n,["voiceActivity"]);return v!=null&&p(t,["voiceActivity"],ew(v)),t}function $I(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&p(t,["fileData"],UI(a));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],LI(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],mc(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function WI(n){const t={},e=f(n,["handle"]);if(e!=null&&p(t,["handle"],e),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ZI(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],qI(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],GI(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function jI(n){const t={},e=f(n,["retrieval"]);e!=null&&p(t,["retrieval"],e);const o=f(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(t,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(t,["enterpriseWebSearch"],a);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>kI(A))),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&p(t,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(t,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function tw(n){const t={},e=f(n,["promptTokenCount"]);e!=null&&p(t,["promptTokenCount"],e);const o=f(n,["cachedContentTokenCount"]);o!=null&&p(t,["cachedContentTokenCount"],o);const r=f(n,["candidatesTokenCount"]);r!=null&&p(t,["responseTokenCount"],r);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&p(t,["toolUsePromptTokenCount"],a);const c=f(n,["thoughtsTokenCount"]);c!=null&&p(t,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&p(t,["totalTokenCount"],d);const y=f(n,["promptTokensDetails"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(x=>x)),p(t,["promptTokensDetails"],I)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(x=>x)),p(t,["cacheTokensDetails"],I)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(x=>x)),p(t,["responseTokensDetails"],I)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(x=>x)),p(t,["toolUsePromptTokensDetails"],I)}const A=f(n,["trafficType"]);return A!=null&&p(t,["trafficType"],A),t}function ew(n){const t={},e=f(n,["type"]);return e!=null&&p(t,["voiceActivityType"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nw(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function iw(n){const t={},e=f(n,["content"]);e!=null&&p(t,["content"],e);const o=f(n,["citationMetadata"]);o!=null&&p(t,["citationMetadata"],ow(o));const r=f(n,["tokenCount"]);r!=null&&p(t,["tokenCount"],r);const a=f(n,["finishReason"]);a!=null&&p(t,["finishReason"],a);const c=f(n,["avgLogprobs"]);c!=null&&p(t,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&p(t,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&p(t,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(I=>I)),p(t,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(t,["urlContextMetadata"],E),t}function ow(n){const t={},e=f(n,["citationSources"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>r)),p(t,["citations"],o)}return t}function sw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let a=Fn(r);Array.isArray(a)&&(a=a.map(c=>c)),p(e,["contents"],a)}return e}function rw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),p(t,["tokensInfo"],r)}return t}function lw(n){const t={},e=f(n,["values"]);e!=null&&p(t,["values"],e);const o=f(n,["statistics"]);return o!=null&&p(t,["statistics"],aw(o)),t}function aw(n){const t={},e=f(n,["truncated"]);e!=null&&p(t,["truncated"],e);const o=f(n,["token_count"]);return o!=null&&p(t,["tokenCount"],o),t}function Oc(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(a=>yN(a))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function uw(n){const t={},e=f(n,["controlType"]);e!=null&&p(t,["controlType"],e);const o=f(n,["enableControlImageComputation"]);return o!=null&&p(t,["computeControl"],o),t}function cw(n){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function fw(n,t){const e={},o=f(n,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],en(o));const r=f(n,["tools"]);if(t!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>_E(d))),p(t,["tools"],c)}const a=f(n,["generationConfig"]);return t!==void 0&&a!=null&&p(t,["generationConfig"],nN(a)),e}function dw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(d=>Oc(d))),p(e,["contents"],c)}const a=f(t,["config"]);return a!=null&&cw(a),e}function hw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["contents"],c)}const a=f(t,["config"]);return a!=null&&fw(a,e),e}function pw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["totalTokens"]);o!=null&&p(t,["totalTokens"],o);const r=f(n,["cachedContentTokenCount"]);return r!=null&&p(t,["cachedContentTokenCount"],r),t}function mw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["totalTokens"]);return o!=null&&p(t,["totalTokens"],o),t}function gw(n,t){const e={},o=f(t,["model"]);return o!=null&&p(e,["_url","name"],Yt(n,o)),e}function yw(n,t){const e={},o=f(t,["model"]);return o!=null&&p(e,["_url","name"],Yt(n,o)),e}function _w(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function vw(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function Tw(n,t){const e={},o=f(n,["outputGcsUri"]);t!==void 0&&o!=null&&p(t,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);t!==void 0&&r!=null&&p(t,["parameters","negativePrompt"],r);const a=f(n,["numberOfImages"]);t!==void 0&&a!=null&&p(t,["parameters","sampleCount"],a);const c=f(n,["aspectRatio"]);t!==void 0&&c!=null&&p(t,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);t!==void 0&&d!=null&&p(t,["parameters","guidanceScale"],d);const y=f(n,["seed"]);t!==void 0&&y!=null&&p(t,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&p(t,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);t!==void 0&&v!=null&&p(t,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);t!==void 0&&E!=null&&p(t,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);t!==void 0&&A!=null&&p(t,["parameters","includeRaiReason"],A);const I=f(n,["language"]);t!==void 0&&I!=null&&p(t,["parameters","language"],I);const x=f(n,["outputMimeType"]);t!==void 0&&x!=null&&p(t,["parameters","outputOptions","mimeType"],x);const O=f(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&p(t,["parameters","outputOptions","compressionQuality"],O);const U=f(n,["addWatermark"]);t!==void 0&&U!=null&&p(t,["parameters","addWatermark"],U);const Q=f(n,["labels"]);t!==void 0&&Q!=null&&p(t,["labels"],Q);const nt=f(n,["editMode"]);t!==void 0&&nt!=null&&p(t,["parameters","editMode"],nt);const Z=f(n,["baseSteps"]);return t!==void 0&&Z!=null&&p(t,["parameters","editConfig","baseSteps"],Z),e}function Ew(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(y=>SN(y))),p(e,["instances[0]","referenceImages"],d)}const c=f(t,["config"]);return c!=null&&Tw(c,e),e}function Aw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>qc(a))),p(t,["generatedImages"],r)}return t}function Sw(n,t){const e={},o=f(n,["taskType"]);t!==void 0&&o!=null&&p(t,["requests[]","taskType"],o);const r=f(n,["title"]);t!==void 0&&r!=null&&p(t,["requests[]","title"],r);const a=f(n,["outputDimensionality"]);if(t!==void 0&&a!=null&&p(t,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function Cw(n,t){const e={},o=f(n,["taskType"]);t!==void 0&&o!=null&&p(t,["instances[]","task_type"],o);const r=f(n,["title"]);t!==void 0&&r!=null&&p(t,["instances[]","title"],r);const a=f(n,["outputDimensionality"]);t!==void 0&&a!=null&&p(t,["parameters","outputDimensionality"],a);const c=f(n,["mimeType"]);t!==void 0&&c!=null&&p(t,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return t!==void 0&&d!=null&&p(t,["parameters","autoTruncate"],d),e}function Rw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let d=rp(n,r);Array.isArray(d)&&(d=d.map(y=>y)),p(e,["requests[]","content"],d)}const a=f(t,["config"]);a!=null&&Sw(a,e);const c=f(t,["model"]);return c!==void 0&&p(e,["requests[]","model"],Yt(n,c)),e}function Iw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=rp(n,r);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["instances[]","content"],c)}const a=f(t,["config"]);return a!=null&&Cw(a,e),e}function ww(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),p(t,["embeddings"],a)}const r=f(n,["metadata"]);return r!=null&&p(t,["metadata"],r),t}function Nw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions[]","embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>lw(c))),p(t,["embeddings"],a)}const r=f(n,["metadata"]);return r!=null&&p(t,["metadata"],r),t}function Mw(n){const t={},e=f(n,["endpoint"]);e!=null&&p(t,["name"],e);const o=f(n,["deployedModelId"]);return o!=null&&p(t,["deployedModelId"],o),t}function Dw(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function bw(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function xw(n){const t={},e=f(n,["allowedFunctionNames"]);e!=null&&p(t,["allowedFunctionNames"],e);const o=f(n,["mode"]);if(o!=null&&p(t,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Vw(n){const t={},e=f(n,["description"]);e!=null&&p(t,["description"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["parameters"]);r!=null&&p(t,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&p(t,["parametersJsonSchema"],a);const c=f(n,["response"]);c!=null&&p(t,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(t,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Pw(n,t,e){const o={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],Oc(en(r)));const a=f(t,["temperature"]);a!=null&&p(o,["temperature"],a);const c=f(t,["topP"]);c!=null&&p(o,["topP"],c);const d=f(t,["topK"]);d!=null&&p(o,["topK"],d);const y=f(t,["candidateCount"]);y!=null&&p(o,["candidateCount"],y);const m=f(t,["maxOutputTokens"]);m!=null&&p(o,["maxOutputTokens"],m);const v=f(t,["stopSequences"]);v!=null&&p(o,["stopSequences"],v);const E=f(t,["responseLogprobs"]);E!=null&&p(o,["responseLogprobs"],E);const A=f(t,["logprobs"]);A!=null&&p(o,["logprobs"],A);const I=f(t,["presencePenalty"]);I!=null&&p(o,["presencePenalty"],I);const x=f(t,["frequencyPenalty"]);x!=null&&p(o,["frequencyPenalty"],x);const O=f(t,["seed"]);O!=null&&p(o,["seed"],O);const U=f(t,["responseMimeType"]);U!=null&&p(o,["responseMimeType"],U);const Q=f(t,["responseSchema"]);Q!=null&&p(o,["responseSchema"],lp(Q));const nt=f(t,["responseJsonSchema"]);if(nt!=null&&p(o,["responseJsonSchema"],nt),f(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(t,["safetySettings"]);if(e!==void 0&&Z!=null){let b=Z;Array.isArray(b)&&(b=b.map(Kt=>CN(Kt))),p(e,["safetySettings"],b)}const it=f(t,["tools"]);if(e!==void 0&&it!=null){let b=Yr(it);Array.isArray(b)&&(b=b.map(Kt=>bN(zr(Kt)))),p(e,["tools"],b)}const ct=f(t,["toolConfig"]);if(e!==void 0&&ct!=null&&p(e,["toolConfig"],DN(ct)),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const rt=f(t,["cachedContent"]);e!==void 0&&rt!=null&&p(e,["cachedContent"],Wi(n,rt));const D=f(t,["responseModalities"]);D!=null&&p(o,["responseModalities"],D);const M=f(t,["mediaResolution"]);M!=null&&p(o,["mediaResolution"],M);const N=f(t,["speechConfig"]);if(N!=null&&p(o,["speechConfig"],ap(N)),f(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(t,["thinkingConfig"]);P!=null&&p(o,["thinkingConfig"],P);const L=f(t,["imageConfig"]);L!=null&&p(o,["imageConfig"],lN(L));const G=f(t,["enableEnhancedCivicAnswers"]);return G!=null&&p(o,["enableEnhancedCivicAnswers"],G),o}function Uw(n,t,e){const o={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],en(r));const a=f(t,["temperature"]);a!=null&&p(o,["temperature"],a);const c=f(t,["topP"]);c!=null&&p(o,["topP"],c);const d=f(t,["topK"]);d!=null&&p(o,["topK"],d);const y=f(t,["candidateCount"]);y!=null&&p(o,["candidateCount"],y);const m=f(t,["maxOutputTokens"]);m!=null&&p(o,["maxOutputTokens"],m);const v=f(t,["stopSequences"]);v!=null&&p(o,["stopSequences"],v);const E=f(t,["responseLogprobs"]);E!=null&&p(o,["responseLogprobs"],E);const A=f(t,["logprobs"]);A!=null&&p(o,["logprobs"],A);const I=f(t,["presencePenalty"]);I!=null&&p(o,["presencePenalty"],I);const x=f(t,["frequencyPenalty"]);x!=null&&p(o,["frequencyPenalty"],x);const O=f(t,["seed"]);O!=null&&p(o,["seed"],O);const U=f(t,["responseMimeType"]);U!=null&&p(o,["responseMimeType"],U);const Q=f(t,["responseSchema"]);Q!=null&&p(o,["responseSchema"],lp(Q));const nt=f(t,["responseJsonSchema"]);nt!=null&&p(o,["responseJsonSchema"],nt);const Z=f(t,["routingConfig"]);Z!=null&&p(o,["routingConfig"],Z);const it=f(t,["modelSelectionConfig"]);it!=null&&p(o,["modelConfig"],it);const ct=f(t,["safetySettings"]);if(e!==void 0&&ct!=null){let X=ct;Array.isArray(X)&&(X=X.map(lt=>lt)),p(e,["safetySettings"],X)}const rt=f(t,["tools"]);if(e!==void 0&&rt!=null){let X=Yr(rt);Array.isArray(X)&&(X=X.map(lt=>_E(zr(lt)))),p(e,["tools"],X)}const D=f(t,["toolConfig"]);e!==void 0&&D!=null&&p(e,["toolConfig"],D);const M=f(t,["labels"]);e!==void 0&&M!=null&&p(e,["labels"],M);const N=f(t,["cachedContent"]);e!==void 0&&N!=null&&p(e,["cachedContent"],Wi(n,N));const P=f(t,["responseModalities"]);P!=null&&p(o,["responseModalities"],P);const L=f(t,["mediaResolution"]);L!=null&&p(o,["mediaResolution"],L);const G=f(t,["speechConfig"]);G!=null&&p(o,["speechConfig"],ap(G));const b=f(t,["audioTimestamp"]);b!=null&&p(o,["audioTimestamp"],b);const Kt=f(t,["thinkingConfig"]);Kt!=null&&p(o,["thinkingConfig"],Kt);const _e=f(t,["imageConfig"]);if(_e!=null&&p(o,["imageConfig"],aN(_e)),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function kv(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(d=>Oc(d))),p(e,["contents"],c)}const a=f(t,["config"]);return a!=null&&p(e,["generationConfig"],Pw(n,a,e)),e}function Ov(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["contents"],c)}const a=f(t,["config"]);return a!=null&&p(e,["generationConfig"],Uw(n,a,e)),e}function qv(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>iw(m))),p(t,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&p(t,["modelVersion"],r);const a=f(n,["promptFeedback"]);a!=null&&p(t,["promptFeedback"],a);const c=f(n,["responseId"]);c!=null&&p(t,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&p(t,["usageMetadata"],d),t}function Gv(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),p(t,["candidates"],m)}const r=f(n,["createTime"]);r!=null&&p(t,["createTime"],r);const a=f(n,["modelVersion"]);a!=null&&p(t,["modelVersion"],a);const c=f(n,["promptFeedback"]);c!=null&&p(t,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&p(t,["responseId"],d);const y=f(n,["usageMetadata"]);return y!=null&&p(t,["usageMetadata"],y),t}function Lw(n,t){const e={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(n,["numberOfImages"]);t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o);const r=f(n,["aspectRatio"]);t!==void 0&&r!=null&&p(t,["parameters","aspectRatio"],r);const a=f(n,["guidanceScale"]);if(t!==void 0&&a!=null&&p(t,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);t!==void 0&&c!=null&&p(t,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);t!==void 0&&d!=null&&p(t,["parameters","personGeneration"],d);const y=f(n,["includeSafetyAttributes"]);t!==void 0&&y!=null&&p(t,["parameters","includeSafetyAttributes"],y);const m=f(n,["includeRaiReason"]);t!==void 0&&m!=null&&p(t,["parameters","includeRaiReason"],m);const v=f(n,["language"]);t!==void 0&&v!=null&&p(t,["parameters","language"],v);const E=f(n,["outputMimeType"]);t!==void 0&&E!=null&&p(t,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(t!==void 0&&A!=null&&p(t,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(t!==void 0&&I!=null&&p(t,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return e}function kw(n,t){const e={},o=f(n,["outputGcsUri"]);t!==void 0&&o!=null&&p(t,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);t!==void 0&&r!=null&&p(t,["parameters","negativePrompt"],r);const a=f(n,["numberOfImages"]);t!==void 0&&a!=null&&p(t,["parameters","sampleCount"],a);const c=f(n,["aspectRatio"]);t!==void 0&&c!=null&&p(t,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);t!==void 0&&d!=null&&p(t,["parameters","guidanceScale"],d);const y=f(n,["seed"]);t!==void 0&&y!=null&&p(t,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&p(t,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);t!==void 0&&v!=null&&p(t,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);t!==void 0&&E!=null&&p(t,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);t!==void 0&&A!=null&&p(t,["parameters","includeRaiReason"],A);const I=f(n,["language"]);t!==void 0&&I!=null&&p(t,["parameters","language"],I);const x=f(n,["outputMimeType"]);t!==void 0&&x!=null&&p(t,["parameters","outputOptions","mimeType"],x);const O=f(n,["outputCompressionQuality"]);t!==void 0&&O!=null&&p(t,["parameters","outputOptions","compressionQuality"],O);const U=f(n,["addWatermark"]);t!==void 0&&U!=null&&p(t,["parameters","addWatermark"],U);const Q=f(n,["labels"]);t!==void 0&&Q!=null&&p(t,["labels"],Q);const nt=f(n,["imageSize"]);t!==void 0&&nt!=null&&p(t,["parameters","sampleImageSize"],nt);const Z=f(n,["enhancePrompt"]);return t!==void 0&&Z!=null&&p(t,["parameters","enhancePrompt"],Z),e}function Ow(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["config"]);return a!=null&&Lw(a,e),e}function qw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["config"]);return a!=null&&kw(a,e),e}function Gw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Zw(c))),p(t,["generatedImages"],a)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&p(t,["positivePromptSafetyAttributes"],gE(r)),t}function Bw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>qc(c))),p(t,["generatedImages"],a)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&p(t,["positivePromptSafetyAttributes"],yE(r)),t}function Fw(n,t){const e={},o=f(n,["numberOfVideos"]);if(t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(t!==void 0&&r!=null&&p(t,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);t!==void 0&&a!=null&&p(t,["parameters","aspectRatio"],a);const c=f(n,["resolution"]);t!==void 0&&c!=null&&p(t,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(t!==void 0&&d!=null&&p(t,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);t!==void 0&&y!=null&&p(t,["parameters","negativePrompt"],y);const m=f(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&p(t,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);t!==void 0&&v!=null&&p(t,["instances[0]","lastFrame"],Gc(v));const E=f(n,["referenceImages"]);if(t!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(I=>zN(I))),p(t,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return e}function Hw(n,t){const e={},o=f(n,["numberOfVideos"]);t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o);const r=f(n,["outputGcsUri"]);t!==void 0&&r!=null&&p(t,["parameters","storageUri"],r);const a=f(n,["fps"]);t!==void 0&&a!=null&&p(t,["parameters","fps"],a);const c=f(n,["durationSeconds"]);t!==void 0&&c!=null&&p(t,["parameters","durationSeconds"],c);const d=f(n,["seed"]);t!==void 0&&d!=null&&p(t,["parameters","seed"],d);const y=f(n,["aspectRatio"]);t!==void 0&&y!=null&&p(t,["parameters","aspectRatio"],y);const m=f(n,["resolution"]);t!==void 0&&m!=null&&p(t,["parameters","resolution"],m);const v=f(n,["personGeneration"]);t!==void 0&&v!=null&&p(t,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);t!==void 0&&E!=null&&p(t,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);t!==void 0&&A!=null&&p(t,["parameters","negativePrompt"],A);const I=f(n,["enhancePrompt"]);t!==void 0&&I!=null&&p(t,["parameters","enhancePrompt"],I);const x=f(n,["generateAudio"]);t!==void 0&&x!=null&&p(t,["parameters","generateAudio"],x);const O=f(n,["lastFrame"]);t!==void 0&&O!=null&&p(t,["instances[0]","lastFrame"],ei(O));const U=f(n,["referenceImages"]);if(t!==void 0&&U!=null){let Z=U;Array.isArray(Z)&&(Z=Z.map(it=>YN(it))),p(t,["instances[0]","referenceImages"],Z)}const Q=f(n,["mask"]);t!==void 0&&Q!=null&&p(t,["instances[0]","mask"],HN(Q));const nt=f(n,["compressionQuality"]);return t!==void 0&&nt!=null&&p(t,["parameters","compressionQuality"],nt),e}function zw(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);a!=null&&p(t,["error"],a);const c=f(n,["response","generateVideoResponse"]);return c!=null&&p(t,["response"],Qw(c)),t}function Yw(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);a!=null&&p(t,["error"],a);const c=f(n,["response"]);return c!=null&&p(t,["response"],Xw(c)),t}function Jw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["image"]);a!=null&&p(e,["instances[0]","image"],Gc(a));const c=f(t,["video"]);c!=null&&p(e,["instances[0]","video"],vE(c));const d=f(t,["source"]);d!=null&&$w(d,e);const y=f(t,["config"]);return y!=null&&Fw(y,e),e}function Kw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["image"]);a!=null&&p(e,["instances[0]","image"],ei(a));const c=f(t,["video"]);c!=null&&p(e,["instances[0]","video"],TE(c));const d=f(t,["source"]);d!=null&&Ww(d,e);const y=f(t,["config"]);return y!=null&&Hw(y,e),e}function Qw(n){const t={},e=f(n,["generatedSamples"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(c=>tN(c))),p(t,["generatedVideos"],a)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(t,["raiMediaFilteredReasons"],r),t}function Xw(n){const t={},e=f(n,["videos"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(c=>eN(c))),p(t,["generatedVideos"],a)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(t,["raiMediaFilteredReasons"],r),t}function $w(n,t){const e={},o=f(n,["prompt"]);t!==void 0&&o!=null&&p(t,["instances[0]","prompt"],o);const r=f(n,["image"]);t!==void 0&&r!=null&&p(t,["instances[0]","image"],Gc(r));const a=f(n,["video"]);return t!==void 0&&a!=null&&p(t,["instances[0]","video"],vE(a)),e}function Ww(n,t){const e={},o=f(n,["prompt"]);t!==void 0&&o!=null&&p(t,["instances[0]","prompt"],o);const r=f(n,["image"]);t!==void 0&&r!=null&&p(t,["instances[0]","image"],ei(r));const a=f(n,["video"]);return t!==void 0&&a!=null&&p(t,["instances[0]","video"],TE(a)),e}function Zw(n){const t={},e=f(n,["_self"]);e!=null&&p(t,["image"],uN(e));const o=f(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const r=f(n,["_self"]);return r!=null&&p(t,["safetyAttributes"],gE(r)),t}function qc(n){const t={},e=f(n,["_self"]);e!=null&&p(t,["image"],mE(e));const o=f(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const r=f(n,["_self"]);r!=null&&p(t,["safetyAttributes"],yE(r));const a=f(n,["prompt"]);return a!=null&&p(t,["enhancedPrompt"],a),t}function jw(n){const t={},e=f(n,["_self"]);e!=null&&p(t,["mask"],mE(e));const o=f(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),p(t,["labels"],r)}return t}function tN(n){const t={},e=f(n,["video"]);return e!=null&&p(t,["video"],BN(e)),t}function eN(n){const t={},e=f(n,["_self"]);return e!=null&&p(t,["video"],FN(e)),t}function nN(n){const t={},e=f(n,["modelSelectionConfig"]);e!=null&&p(t,["modelConfig"],e);const o=f(n,["responseJsonSchema"]);o!=null&&p(t,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&p(t,["audioTimestamp"],r);const a=f(n,["candidateCount"]);a!=null&&p(t,["candidateCount"],a);const c=f(n,["enableAffectiveDialog"]);c!=null&&p(t,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&p(t,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&p(t,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&p(t,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&p(t,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&p(t,["presencePenalty"],E);const A=f(n,["responseLogprobs"]);A!=null&&p(t,["responseLogprobs"],A);const I=f(n,["responseMimeType"]);I!=null&&p(t,["responseMimeType"],I);const x=f(n,["responseModalities"]);x!=null&&p(t,["responseModalities"],x);const O=f(n,["responseSchema"]);O!=null&&p(t,["responseSchema"],O);const U=f(n,["routingConfig"]);U!=null&&p(t,["routingConfig"],U);const Q=f(n,["seed"]);Q!=null&&p(t,["seed"],Q);const nt=f(n,["speechConfig"]);nt!=null&&p(t,["speechConfig"],nt);const Z=f(n,["stopSequences"]);Z!=null&&p(t,["stopSequences"],Z);const it=f(n,["temperature"]);it!=null&&p(t,["temperature"],it);const ct=f(n,["thinkingConfig"]);ct!=null&&p(t,["thinkingConfig"],ct);const rt=f(n,["topK"]);rt!=null&&p(t,["topK"],rt);const D=f(n,["topP"]);if(D!=null&&p(t,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function iN(n,t){const e={},o=f(t,["model"]);return o!=null&&p(e,["_url","name"],Yt(n,o)),e}function oN(n,t){const e={},o=f(t,["model"]);return o!=null&&p(e,["_url","name"],Yt(n,o)),e}function sN(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function rN(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function lN(n){const t={},e=f(n,["aspectRatio"]);e!=null&&p(t,["aspectRatio"],e);const o=f(n,["imageSize"]);if(o!=null&&p(t,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function aN(n){const t={},e=f(n,["aspectRatio"]);e!=null&&p(t,["aspectRatio"],e);const o=f(n,["imageSize"]);o!=null&&p(t,["imageSize"],o);const r=f(n,["personGeneration"]);r!=null&&p(t,["personGeneration"],r);const a=f(n,["outputMimeType"]);a!=null&&p(t,["imageOutputOptions","mimeType"],a);const c=f(n,["outputCompressionQuality"]);return c!=null&&p(t,["imageOutputOptions","compressionQuality"],c),t}function uN(n){const t={},e=f(n,["bytesBase64Encoded"]);e!=null&&p(t,["imageBytes"],Xo(e));const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function mE(n){const t={},e=f(n,["gcsUri"]);e!=null&&p(t,["gcsUri"],e);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["imageBytes"],Xo(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function Gc(n){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const e=f(n,["imageBytes"]);e!=null&&p(t,["bytesBase64Encoded"],Xo(e));const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function ei(n){const t={},e=f(n,["gcsUri"]);e!=null&&p(t,["gcsUri"],e);const o=f(n,["imageBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Xo(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function cN(n,t,e){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const c=f(t,["filter"]);e!==void 0&&c!=null&&p(e,["_query","filter"],c);const d=f(t,["queryBase"]);return e!==void 0&&d!=null&&p(e,["_url","models_url"],aE(n,d)),o}function fN(n,t,e){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const c=f(t,["filter"]);e!==void 0&&c!=null&&p(e,["_query","filter"],c);const d=f(t,["queryBase"]);return e!==void 0&&d!=null&&p(e,["_url","models_url"],aE(n,d)),o}function dN(n,t){const e={},o=f(t,["config"]);return o!=null&&cN(n,o,e),e}function hN(n,t){const e={},o=f(t,["config"]);return o!=null&&fN(n,o,e),e}function pN(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let a=uE(r);Array.isArray(a)&&(a=a.map(c=>Ih(c))),p(t,["models"],a)}return t}function mN(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let a=uE(r);Array.isArray(a)&&(a=a.map(c=>wh(c))),p(t,["models"],a)}return t}function gN(n){const t={},e=f(n,["maskMode"]);e!=null&&p(t,["maskMode"],e);const o=f(n,["segmentationClasses"]);o!=null&&p(t,["maskClasses"],o);const r=f(n,["maskDilation"]);return r!=null&&p(t,["dilation"],r),t}function Ih(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const r=f(n,["description"]);r!=null&&p(t,["description"],r);const a=f(n,["version"]);a!=null&&p(t,["version"],a);const c=f(n,["_self"]);c!=null&&p(t,["tunedModelInfo"],xN(c));const d=f(n,["inputTokenLimit"]);d!=null&&p(t,["inputTokenLimit"],d);const y=f(n,["outputTokenLimit"]);y!=null&&p(t,["outputTokenLimit"],y);const m=f(n,["supportedGenerationMethods"]);m!=null&&p(t,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&p(t,["temperature"],v);const E=f(n,["maxTemperature"]);E!=null&&p(t,["maxTemperature"],E);const A=f(n,["topP"]);A!=null&&p(t,["topP"],A);const I=f(n,["topK"]);I!=null&&p(t,["topK"],I);const x=f(n,["thinking"]);return x!=null&&p(t,["thinking"],x),t}function wh(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const r=f(n,["description"]);r!=null&&p(t,["description"],r);const a=f(n,["versionId"]);a!=null&&p(t,["version"],a);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>Mw(A))),p(t,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&p(t,["labels"],d);const y=f(n,["_self"]);y!=null&&p(t,["tunedModelInfo"],VN(y));const m=f(n,["defaultCheckpointId"]);m!=null&&p(t,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),p(t,["checkpoints"],E)}return t}function yN(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&p(t,["fileData"],Dw(a));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],bw(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],nw(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function _N(n){const t={},e=f(n,["productImage"]);return e!=null&&p(t,["image"],ei(e)),t}function vN(n,t){const e={},o=f(n,["numberOfImages"]);t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o);const r=f(n,["baseSteps"]);t!==void 0&&r!=null&&p(t,["parameters","baseSteps"],r);const a=f(n,["outputGcsUri"]);t!==void 0&&a!=null&&p(t,["parameters","storageUri"],a);const c=f(n,["seed"]);t!==void 0&&c!=null&&p(t,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);t!==void 0&&d!=null&&p(t,["parameters","safetySetting"],d);const y=f(n,["personGeneration"]);t!==void 0&&y!=null&&p(t,["parameters","personGeneration"],y);const m=f(n,["addWatermark"]);t!==void 0&&m!=null&&p(t,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);t!==void 0&&v!=null&&p(t,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&p(t,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);t!==void 0&&A!=null&&p(t,["parameters","enhancePrompt"],A);const I=f(n,["labels"]);return t!==void 0&&I!=null&&p(t,["labels"],I),e}function TN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["source"]);r!=null&&AN(r,e);const a=f(t,["config"]);return a!=null&&vN(a,e),e}function EN(n){const t={},e=f(n,["predictions"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>qc(r))),p(t,["generatedImages"],o)}return t}function AN(n,t){const e={},o=f(n,["prompt"]);t!==void 0&&o!=null&&p(t,["instances[0]","prompt"],o);const r=f(n,["personImage"]);t!==void 0&&r!=null&&p(t,["instances[0]","personImage","image"],ei(r));const a=f(n,["productImages"]);if(t!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>_N(d))),p(t,["instances[0]","productImages"],c)}return e}function SN(n){const t={},e=f(n,["referenceImage"]);e!=null&&p(t,["referenceImage"],ei(e));const o=f(n,["referenceId"]);o!=null&&p(t,["referenceId"],o);const r=f(n,["referenceType"]);r!=null&&p(t,["referenceType"],r);const a=f(n,["maskImageConfig"]);a!=null&&p(t,["maskImageConfig"],gN(a));const c=f(n,["controlImageConfig"]);c!=null&&p(t,["controlImageConfig"],uw(c));const d=f(n,["styleImageConfig"]);d!=null&&p(t,["styleImageConfig"],d);const y=f(n,["subjectImageConfig"]);return y!=null&&p(t,["subjectImageConfig"],y),t}function gE(n){const t={},e=f(n,["safetyAttributes","categories"]);e!=null&&p(t,["categories"],e);const o=f(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const r=f(n,["contentType"]);return r!=null&&p(t,["contentType"],r),t}function yE(n){const t={},e=f(n,["safetyAttributes","categories"]);e!=null&&p(t,["categories"],e);const o=f(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const r=f(n,["contentType"]);return r!=null&&p(t,["contentType"],r),t}function CN(n){const t={},e=f(n,["category"]);if(e!=null&&p(t,["category"],e),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&p(t,["threshold"],o),t}function RN(n){const t={},e=f(n,["image"]);return e!=null&&p(t,["image"],ei(e)),t}function IN(n,t){const e={},o=f(n,["mode"]);t!==void 0&&o!=null&&p(t,["parameters","mode"],o);const r=f(n,["maxPredictions"]);t!==void 0&&r!=null&&p(t,["parameters","maxPredictions"],r);const a=f(n,["confidenceThreshold"]);t!==void 0&&a!=null&&p(t,["parameters","confidenceThreshold"],a);const c=f(n,["maskDilation"]);t!==void 0&&c!=null&&p(t,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);t!==void 0&&d!=null&&p(t,["parameters","binaryColorThreshold"],d);const y=f(n,["labels"]);return t!==void 0&&y!=null&&p(t,["labels"],y),e}function wN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["source"]);r!=null&&MN(r,e);const a=f(t,["config"]);return a!=null&&IN(a,e),e}function NN(n){const t={},e=f(n,["predictions"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>jw(r))),p(t,["generatedMasks"],o)}return t}function MN(n,t){const e={},o=f(n,["prompt"]);t!==void 0&&o!=null&&p(t,["instances[0]","prompt"],o);const r=f(n,["image"]);t!==void 0&&r!=null&&p(t,["instances[0]","image"],ei(r));const a=f(n,["scribbleImage"]);return t!==void 0&&a!=null&&p(t,["instances[0]","scribble"],RN(a)),e}function DN(n){const t={},e=f(n,["retrievalConfig"]);e!=null&&p(t,["retrievalConfig"],e);const o=f(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],xw(o)),t}function bN(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],sN(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],rN(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function _E(n){const t={},e=f(n,["retrieval"]);e!=null&&p(t,["retrieval"],e);const o=f(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(t,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(t,["enterpriseWebSearch"],a);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>Vw(A))),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&p(t,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(t,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function xN(n){const t={},e=f(n,["baseModel"]);e!=null&&p(t,["baseModel"],e);const o=f(n,["createTime"]);o!=null&&p(t,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&p(t,["updateTime"],r),t}function VN(n){const t={},e=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);e!=null&&p(t,["baseModel"],e);const o=f(n,["createTime"]);o!=null&&p(t,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&p(t,["updateTime"],r),t}function PN(n,t){const e={},o=f(n,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const r=f(n,["description"]);t!==void 0&&r!=null&&p(t,["description"],r);const a=f(n,["defaultCheckpointId"]);return t!==void 0&&a!=null&&p(t,["defaultCheckpointId"],a),e}function UN(n,t){const e={},o=f(n,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const r=f(n,["description"]);t!==void 0&&r!=null&&p(t,["description"],r);const a=f(n,["defaultCheckpointId"]);return t!==void 0&&a!=null&&p(t,["defaultCheckpointId"],a),e}function LN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","name"],Yt(n,o));const r=f(t,["config"]);return r!=null&&PN(r,e),e}function kN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["config"]);return r!=null&&UN(r,e),e}function ON(n,t){const e={},o=f(n,["outputGcsUri"]);t!==void 0&&o!=null&&p(t,["parameters","storageUri"],o);const r=f(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&p(t,["parameters","safetySetting"],r);const a=f(n,["personGeneration"]);t!==void 0&&a!=null&&p(t,["parameters","personGeneration"],a);const c=f(n,["includeRaiReason"]);t!==void 0&&c!=null&&p(t,["parameters","includeRaiReason"],c);const d=f(n,["outputMimeType"]);t!==void 0&&d!=null&&p(t,["parameters","outputOptions","mimeType"],d);const y=f(n,["outputCompressionQuality"]);t!==void 0&&y!=null&&p(t,["parameters","outputOptions","compressionQuality"],y);const m=f(n,["enhanceInputImage"]);t!==void 0&&m!=null&&p(t,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);t!==void 0&&v!=null&&p(t,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(n,["labels"]);t!==void 0&&E!=null&&p(t,["labels"],E);const A=f(n,["numberOfImages"]);t!==void 0&&A!=null&&p(t,["parameters","sampleCount"],A);const I=f(n,["mode"]);return t!==void 0&&I!=null&&p(t,["parameters","mode"],I),e}function qN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["image"]);r!=null&&p(e,["instances[0]","image"],ei(r));const a=f(t,["upscaleFactor"]);a!=null&&p(e,["parameters","upscaleConfig","upscaleFactor"],a);const c=f(t,["config"]);return c!=null&&ON(c,e),e}function GN(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>qc(a))),p(t,["generatedImages"],r)}return t}function BN(n){const t={},e=f(n,["uri"]);e!=null&&p(t,["uri"],e);const o=f(n,["encodedVideo"]);o!=null&&p(t,["videoBytes"],Xo(o));const r=f(n,["encoding"]);return r!=null&&p(t,["mimeType"],r),t}function FN(n){const t={},e=f(n,["gcsUri"]);e!=null&&p(t,["uri"],e);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["videoBytes"],Xo(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function HN(n){const t={},e=f(n,["image"]);e!=null&&p(t,["_self"],ei(e));const o=f(n,["maskMode"]);return o!=null&&p(t,["maskMode"],o),t}function zN(n){const t={},e=f(n,["image"]);e!=null&&p(t,["image"],Gc(e));const o=f(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function YN(n){const t={},e=f(n,["image"]);e!=null&&p(t,["image"],ei(e));const o=f(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function vE(n){const t={},e=f(n,["uri"]);e!=null&&p(t,["uri"],e);const o=f(n,["videoBytes"]);o!=null&&p(t,["encodedVideo"],Xo(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["encoding"],r),t}function TE(n){const t={},e=f(n,["uri"]);e!=null&&p(t,["gcsUri"],e);const o=f(n,["videoBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Xo(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JN(n,t){const e={},o=f(n,["displayName"]);return t!==void 0&&o!=null&&p(t,["displayName"],o),e}function KN(n){const t={},e=f(n,["config"]);return e!=null&&JN(e,t),t}function QN(n,t){const e={},o=f(n,["force"]);return t!==void 0&&o!=null&&p(t,["_query","force"],o),e}function XN(n){const t={},e=f(n,["name"]);e!=null&&p(t,["_url","name"],e);const o=f(n,["config"]);return o!=null&&QN(o,t),t}function $N(n){const t={},e=f(n,["name"]);return e!=null&&p(t,["_url","name"],e),t}function WN(n,t){const e={},o=f(n,["customMetadata"]);if(t!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),p(t,["customMetadata"],a)}const r=f(n,["chunkingConfig"]);return t!==void 0&&r!=null&&p(t,["chunkingConfig"],r),e}function ZN(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const a=f(n,["error"]);a!=null&&p(t,["error"],a);const c=f(n,["response"]);return c!=null&&p(t,["response"],tM(c)),t}function jN(n){const t={},e=f(n,["fileSearchStoreName"]);e!=null&&p(t,["_url","file_search_store_name"],e);const o=f(n,["fileName"]);o!=null&&p(t,["fileName"],o);const r=f(n,["config"]);return r!=null&&WN(r,t),t}function tM(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["parent"]);o!=null&&p(t,["parent"],o);const r=f(n,["documentName"]);return r!=null&&p(t,["documentName"],r),t}function eM(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function nM(n){const t={},e=f(n,["config"]);return e!=null&&eM(e,t),t}function iM(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),p(t,["fileSearchStores"],a)}return t}function EE(n,t){const e={},o=f(n,["mimeType"]);t!==void 0&&o!=null&&p(t,["mimeType"],o);const r=f(n,["displayName"]);t!==void 0&&r!=null&&p(t,["displayName"],r);const a=f(n,["customMetadata"]);if(t!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(y=>y)),p(t,["customMetadata"],d)}const c=f(n,["chunkingConfig"]);return t!==void 0&&c!=null&&p(t,["chunkingConfig"],c),e}function oM(n){const t={},e=f(n,["fileSearchStoreName"]);e!=null&&p(t,["_url","file_search_store_name"],e);const o=f(n,["config"]);return o!=null&&EE(o,t),t}function sM(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rM="Content-Type",lM="X-Server-Timeout",aM="User-Agent",Nh="x-goog-api-client",uM="1.37.0",cM=`google-genai-sdk/${uM}`,fM="v1beta1",dM="v1beta";class hM{constructor(t){var e,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:fM,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:dM,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,o){const r=[this.getRequestUrlInternal(e)];return o&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,e,o);if(t.queryParams)for(const[c,d]of Object.entries(t.queryParams))r.searchParams.append(c,String(d));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,e,r.toString(),t.abortSignal),this.unaryApiCall(r,a,t.httpMethod)}patchHttpOptions(t,e){const o=JSON.parse(JSON.stringify(t));for(const[r,a]of Object.entries(e))typeof a=="object"?o[r]=Object.assign(Object.assign({},o[r]),a):a!==void 0&&(o[r]=a);return o}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,e,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,e,r.toString(),t.abortSignal),this.streamApiCall(r,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,o,r){if(e&&e.timeout||r){const a=new AbortController,c=a.signal;if(e.timeout&&e?.timeout>0){const d=setTimeout(()=>a.abort(),e.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),t.signal=c}return e&&e.extraBody!==null&&pM(t,e.extraBody),t.headers=await this.getHeadersInternal(e,o),t}async unaryApiCall(t,e,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:o})).then(async r=>(await Bv(r),new Sh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,e,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:o})).then(async r=>(await Bv(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Zn(this,arguments,function*(){var o;const r=(o=t?.body)===null||o===void 0?void 0:o.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const d="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield St(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(v,{stream:!0});try{const x=JSON.parse(E);if("error"in x){const O=JSON.parse(JSON.stringify(x.error)),U=O.status,Q=O.code,nt=`got status: ${U}. ${JSON.stringify(x)}`;if(Q>=400&&Q<600)throw new kc({message:nt,status:Q})}}catch(x){if(x.name==="ApiError")throw x}c+=E;let A=-1,I=0;for(;;){A=-1,I=0;for(const U of y){const Q=c.indexOf(U);Q!==-1&&(A===-1||Q<A)&&(A=Q,I=U.length)}if(A===-1)break;const x=c.substring(0,A);c=c.substring(A+I);const O=x.trim();if(O.startsWith(d)){const U=O.substring(d.length).trim();try{const Q=new Response(U,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield St(new Sh(Q))}catch(Q){throw new Error(`exception parsing stream chunk ${U}. ${Q}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},e=cM+" "+this.clientOptions.userAgentExtra;return t[aM]=e,t[Nh]=e,t[rM]="application/json",t}async getHeadersInternal(t,e){const o=new Headers;if(t&&t.headers){for(const[r,a]of Object.entries(t.headers))o.append(r,a);t.timeout&&t.timeout>0&&o.append(lM,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,e),o}getFileName(t){var e;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(e=o.split(/[/\\]/).pop())!==null&&e!==void 0?e:""),o}async uploadFile(t,e){var o;const r={};e!=null&&(r.mimeType=e.mimeType,r.name=e.name,r.displayName=e.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(t);r.sizeBytes=String(c.size);const d=(o=e?.mimeType)!==null&&o!==void 0?o:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const y={file:r},m=this.getFileName(t),v=ft("upload/v1beta/files",y._url),E=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,y,e?.httpOptions);return a.upload(t,E,this)}async uploadFileToFileSearchStore(t,e,o){var r;const a=this.clientOptions.uploader,c=await a.stat(e),d=String(c.size),y=(r=o?.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,v=this.getFileName(e),E={};o!=null&&EE(o,E);const A=await this.fetchUploadUrl(m,d,y,v,E,o?.httpOptions);return a.uploadToFileSearchStore(e,A,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e,o,r,a,c){var d;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(a),httpMethod:"POST",httpOptions:y});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m?.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Bv(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const e=n.status;let o;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw e>=400&&e<600?new kc({message:r,status:e}):new Error(r)}}function pM(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))e=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,c){const d=Object.assign({},a);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const m=c[y],v=d[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[y]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[y]=m)}return d}const r=o(e,t);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mM="mcp_used/unknown";let gM=!1;function AE(n){for(const t of n)if(yM(t)||typeof t=="object"&&"inputSchema"in t)return!0;return gM}function SE(n){var t;const e=(t=n[Nh])!==null&&t!==void 0?t:"";n[Nh]=(e+` ${mM}`).trimStart()}function yM(n){return n!==null&&typeof n=="object"&&n instanceof cp}function _M(n){return Zn(this,arguments,function*(e,o=100){let r,a=0;for(;a<o;){const c=yield St(e.listTools({cursor:r}));for(const d of c.tools)yield yield St(d),a++;if(!c.nextCursor)break;r=c.nextCursor}})}class cp{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new cp(t,e)}async initialize(){var t,e,o,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var d=!0,y=(e=void 0,jn(_M(v))),m;m=await y.next(),t=m.done,!t;d=!0){r=m.value,d=!1;const E=r;c.push(E);const A=E.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=v}}catch(E){e={error:E}}finally{try{!d&&!t&&(o=y.return)&&await o.call(y)}finally{if(e)throw e.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),XC(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,a);e.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vM(n,t,e){const o=new BC;let r;e.data instanceof Blob?r=JSON.parse(await e.data.text()):r=JSON.parse(e.data),Object.assign(o,r),t(o)}class TM{constructor(t,e,o){this.apiClient=t,this.auth=e,this.webSocketFactory=o}async connect(t){var e,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=SM(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(Z=>{m=Z}),E=t.callbacks,A=function(){m({})},I=this.apiClient,x={onopen:A,onmessage:Z=>{vM(I,E.onmessage,Z)},onerror:(e=E?.onerror)!==null&&e!==void 0?e:function(Z){},onclose:(o=E?.onclose)!==null&&o!==void 0?o:function(Z){}},O=this.webSocketFactory.create(y,AM(c),x);O.connect(),await v;const nt={setup:{model:Yt(this.apiClient,t.model)}};return O.send(JSON.stringify(nt)),new EM(O,this.apiClient)}}class EM{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=JI(t);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=YI(t);this.conn.send(JSON.stringify(e))}sendPlaybackControl(t){const e={playbackControl:t};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(Dr.PLAY)}pause(){this.sendPlaybackControl(Dr.PAUSE)}stop(){this.sendPlaybackControl(Dr.STOP)}resetContext(){this.sendPlaybackControl(Dr.RESET_CONTEXT)}close(){this.conn.close()}}function AM(n){const t={};return n.forEach((e,o)=>{t[o]=e}),t}function SM(n){const t=new Headers;for(const[e,o]of Object.entries(n))t.append(e,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function RM(n,t,e){const o=new GC;let r;e.data instanceof Blob?r=await e.data.text():e.data instanceof ArrayBuffer?r=new TextDecoder().decode(e.data):r=e.data;const a=JSON.parse(r);if(n.isVertexAI()){const c=XI(a);Object.assign(o,c)}else Object.assign(o,a);t(o)}class IM{constructor(t,e,o){this.apiClient=t,this.auth=e,this.webSocketFactory=o,this.music=new TM(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,o,r,a,c,d;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();t.config&&t.config.tools&&AE(t.config.tools)&&SE(E);const A=DM(E);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,v);else{const N=this.apiClient.getApiKey();let P="BidiGenerateContent",L="key";N?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",L="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${L}=${N}`}let I=()=>{};const x=new Promise(N=>{I=N}),O=t.callbacks,U=function(){var N;(N=O?.onopen)===null||N===void 0||N.call(O),I({})},Q=this.apiClient,nt={onopen:U,onmessage:N=>{RM(Q,O.onmessage,N)},onerror:(e=O?.onerror)!==null&&e!==void 0?e:function(N){},onclose:(o=O?.onclose)!==null&&o!==void 0?o:function(N){}},Z=this.webSocketFactory.create(v,MM(A),nt);Z.connect(),await x;let it=Yt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&it.startsWith("publishers/")){const N=this.apiClient.getProject(),P=this.apiClient.getLocation();it=`projects/${N}/locations/${P}/`+it}let ct={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Ec.AUDIO]}:t.config.responseModalities=[Ec.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const rt=(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],D=[];for(const N of rt)if(this.isCallableTool(N)){const P=N;D.push(await P.tool())}else D.push(N);D.length>0&&(t.config.tools=D);const M={model:it,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?ct=zI(this.apiClient,M):ct=HI(this.apiClient,M),delete ct.config,Z.send(JSON.stringify(ct)),new NM(Z,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const wM={turnComplete:!0};class NM{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let o=[];try{o=Fn(e.turns),t.isVertexAI()||(o=o.map(r=>Oc(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:o,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let o=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?o=e.functionResponses:o=[e.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(CM)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},wM),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:QI(t)}:e={realtimeInput:KI(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function MM(n){const t={};return n.forEach((e,o)=>{t[o]=e}),t}function DM(n){const t=new Headers;for(const[e,o]of Object.entries(n))t.append(e,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fv=10;function Hv(n){var t,e,o;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const c of(e=n?.tools)!==null&&e!==void 0?e:[])if(Vr(c)){r=!0;break}if(!r)return!0;const a=(o=n?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Vr(n){return"callTool"in n&&typeof n.callTool=="function"}function bM(n){var t,e,o;return(o=(e=(t=n.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(r=>Vr(r)))!==null&&o!==void 0?o:!1}function zv(n){var t;const e=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((o,r)=>{if(Vr(o))return;const a=o;a.functionDeclarations&&a.functionDeclarations.length>0&&e.push(r)}),e}function Yv(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xM extends $i{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var o,r,a,c,d;const y=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!bM(e)||Hv(e.config))return await this.generateContentInternal(y);const m=zv(e);if(m.length>0){const O=m.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let v,E;const A=Fn(y.contents),I=(a=(r=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:Fv;let x=0;for(;x<I&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const O=v.candidates[0].content,U=[];for(const Q of(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Vr(Q)){const Z=await Q.callTool(v.functionCalls);U.push(...Z)}x++,E={role:"user",parts:U},y.contents=Fn(y.contents),y.contents.push(O),y.contents.push(E),Yv(y.config)&&(A.push(O),A.push(E))}return Yv(y.config)&&(v.automaticFunctionCallingHistory=A),v},this.generateContentStream=async e=>{var o,r,a,c,d;if(this.maybeMoveToResponseJsonSchem(e),Hv(e.config)){const E=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(E)}const y=zv(e);if(y.length>0){const E=y.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(r=(o=e?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(c=e?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(o=>{var r;let a;const c=[];if(o?.generatedImages)for(const y of o.generatedImages)y&&y?.safetyAttributes&&((r=y?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=y?.safetyAttributes:c.push(y);let d;return a?d={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async e=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),e?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Vs(Ji.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async e=>{const o={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(o.referenceImages=e.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async e=>{let o={numberOfImages:1,mode:"upscale"};e.config&&(o=Object.assign(Object.assign({},o),e.config));const r={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async e=>{var o,r,a,c,d,y;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=e.video)===null||o===void 0)&&o.uri&&(!((r=e.video)===null||r===void 0)&&r.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:!((c=(a=e.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((y=(d=e.source)===null||d===void 0?void 0:d.video)===null||y===void 0)&&y.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,o,r;const a=(e=t.config)===null||e===void 0?void 0:e.tools;if(!a)return t;const c=await Promise.all(a.map(async y=>Vr(y)?await y.tool():y)),d={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:c})};if(d.config.tools=c,t.config&&t.config.tools&&AE(t.config.tools)){const y=(r=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),SE(m),d.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(t){var e,o,r;const a=new Map;for(const c of(o=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&o!==void 0?o:[])if(Vr(c)){const d=c,y=await d.tool();for(const m of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(t){var e,o,r;const a=(r=(o=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Fv;let c=!1,d=0;const y=await this.initAfcToolsMap(t);return(function(m,v,E){return Zn(this,arguments,function*(){for(var A,I,x,O,U,Q;d<a;){c&&(d++,c=!1);const ct=yield St(m.processParamsMaybeAddMcpUsage(E)),rt=yield St(m.generateContentStreamInternal(ct)),D=[],M=[];try{for(var nt=!0,Z=(I=void 0,jn(rt)),it;it=yield St(Z.next()),A=it.done,!A;nt=!0){O=it.value,nt=!1;const N=O;if(yield yield St(N),N.candidates&&(!((U=N.candidates[0])===null||U===void 0)&&U.content)){M.push(N.candidates[0].content);for(const P of(Q=N.candidates[0].content.parts)!==null&&Q!==void 0?Q:[])if(d<a&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const L=yield St(v.get(P.functionCall.name).callTool([P.functionCall]));D.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(N){I={error:N}}finally{try{!nt&&!A&&(x=Z.return)&&(yield St(x.call(Z)))}finally{if(I)throw I.error}}if(D.length>0){c=!0;const N=new na;N.candidates=[{content:{role:"user",parts:D}}],yield yield St(N);const P=[];P.push(...M),P.push({role:"user",parts:D});const L=Fn(E.contents).concat(P);E.contents=L}else break}})})(this,y,t)}async generateContentInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Ov(this.apiClient,t);return d=ft("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Gv(v),A=new na;return Object.assign(A,E),A})}else{const m=kv(this.apiClient,t);return d=ft("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=qv(v),A=new na;return Object.assign(A,E),A})}}async generateContentStreamInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Ov(this.apiClient,t);return d=ft("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(E){return Zn(this,arguments,function*(){var A,I,x,O;try{for(var U=!0,Q=jn(E),nt;nt=yield St(Q.next()),A=nt.done,!A;U=!0){O=nt.value,U=!1;const Z=O,it=Gv(yield St(Z.json()));it.sdkHttpResponse={headers:Z.headers};const ct=new na;Object.assign(ct,it),yield yield St(ct)}}catch(Z){I={error:Z}}finally{try{!U&&!A&&(x=Q.return)&&(yield St(x.call(Q)))}finally{if(I)throw I.error}}})})}else{const m=kv(this.apiClient,t);return d=ft("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return Zn(this,arguments,function*(){var A,I,x,O;try{for(var U=!0,Q=jn(E),nt;nt=yield St(Q.next()),A=nt.done,!A;U=!0){O=nt.value,U=!1;const Z=O,it=qv(yield St(Z.json()));it.sdkHttpResponse={headers:Z.headers};const ct=new na;Object.assign(ct,it),yield yield St(ct)}}catch(Z){I={error:Z}}finally{try{!U&&!A&&(x=Q.return)&&(yield St(x.call(Q)))}finally{if(I)throw I.error}}})})}}async embedContent(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Iw(this.apiClient,t);return d=ft("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Nw(v),A=new Tv;return Object.assign(A,E),A})}else{const m=Rw(this.apiClient,t);return d=ft("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=ww(v),A=new Tv;return Object.assign(A,E),A})}}async generateImagesInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=qw(this.apiClient,t);return d=ft("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Bw(v),A=new Ev;return Object.assign(A,E),A})}else{const m=Ow(this.apiClient,t);return d=ft("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Gw(v),A=new Ev;return Object.assign(A,E),A})}}async editImageInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=Ew(this.apiClient,t);return a=ft("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=Aw(y),v=new MC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=qN(this.apiClient,t);return a=ft("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=GN(y),v=new DC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=TN(this.apiClient,t);return a=ft("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=EN(y),v=new bC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=wN(this.apiClient,t);return a=ft("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=NN(y),v=new xC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=oN(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>wh(v))}else{const m=iN(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Ih(v))}}async listInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=hN(this.apiClient,t);return d=ft("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=mN(v),A=new Av;return Object.assign(A,E),A})}else{const m=dN(this.apiClient,t);return d=ft("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=pN(v),A=new Av;return Object.assign(A,E),A})}}async update(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=kN(this.apiClient,t);return d=ft("{model}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>wh(v))}else{const m=LN(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>Ih(v))}}async delete(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=yw(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=vw(v),A=new Sv;return Object.assign(A,E),A})}else{const m=gw(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=_w(v),A=new Sv;return Object.assign(A,E),A})}}async countTokens(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=hw(this.apiClient,t);return d=ft("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=mw(v),A=new Cv;return Object.assign(A,E),A})}else{const m=dw(this.apiClient,t);return d=ft("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=pw(v),A=new Cv;return Object.assign(A,E),A})}}async computeTokens(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=sw(this.apiClient,t);return a=ft("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=rw(y),v=new VC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Kw(this.apiClient,t);return d=ft("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const E=Yw(v),A=new Ac;return Object.assign(A,E),A})}else{const m=Jw(this.apiClient,t);return d=ft("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const E=zw(v),A=new Ac;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VM extends $i{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,o=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=e.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:a}});return e._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:e.name,config:o});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const e=t.operation,o=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=e.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:a}});return e._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:e.name,config:o});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=SC(t);return d=ft("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const m=AC(t);return d=ft("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=mC(t);return a=ft("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PM(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function UM(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(a=>zM(a))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function LM(n,t,e){const o={},r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=f(t,["newSessionExpireTime"]);e!==void 0&&a!=null&&p(e,["newSessionExpireTime"],a);const c=f(t,["uses"]);e!==void 0&&c!=null&&p(e,["uses"],c);const d=f(t,["liveConnectConstraints"]);e!==void 0&&d!=null&&p(e,["bidiGenerateContentSetup"],HM(n,d));const y=f(t,["lockAdditionalFields"]);return e!==void 0&&y!=null&&p(e,["fieldMask"],y),o}function kM(n,t){const e={},o=f(t,["config"]);return o!=null&&p(e,["config"],LM(n,o,e)),e}function OM(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function qM(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function GM(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function BM(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function FM(n,t){const e={},o=f(n,["generationConfig"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);t!==void 0&&a!=null&&p(t,["setup","generationConfig","temperature"],a);const c=f(n,["topP"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);t!==void 0&&E!=null&&p(t,["setup","generationConfig","speechConfig"],up(E));const A=f(n,["thinkingConfig"]);t!==void 0&&A!=null&&p(t,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);t!==void 0&&I!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],I);const x=f(n,["systemInstruction"]);t!==void 0&&x!=null&&p(t,["setup","systemInstruction"],UM(en(x)));const O=f(n,["tools"]);if(t!==void 0&&O!=null){let rt=Yr(O);Array.isArray(rt)&&(rt=rt.map(D=>JM(zr(D)))),p(t,["setup","tools"],rt)}const U=f(n,["sessionResumption"]);t!==void 0&&U!=null&&p(t,["setup","sessionResumption"],YM(U));const Q=f(n,["inputAudioTranscription"]);t!==void 0&&Q!=null&&p(t,["setup","inputAudioTranscription"],Q);const nt=f(n,["outputAudioTranscription"]);t!==void 0&&nt!=null&&p(t,["setup","outputAudioTranscription"],nt);const Z=f(n,["realtimeInputConfig"]);t!==void 0&&Z!=null&&p(t,["setup","realtimeInputConfig"],Z);const it=f(n,["contextWindowCompression"]);t!==void 0&&it!=null&&p(t,["setup","contextWindowCompression"],it);const ct=f(n,["proactivity"]);if(t!==void 0&&ct!=null&&p(t,["setup","proactivity"],ct),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function HM(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["setup","model"],Yt(n,o));const r=f(t,["config"]);return r!=null&&p(e,["config"],FM(r,e)),e}function zM(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&p(t,["fileData"],OM(a));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],qM(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],PM(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function YM(n){const t={},e=f(n,["handle"]);if(e!=null&&p(t,["handle"],e),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function JM(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],GM(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],BM(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KM(n){const t=[];for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const o=n[e];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(a=>`${e}.${a}`);t.push(...r)}else t.push(e)}return t.join(",")}function QM(n,t){let e=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,e=a):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(e){const a=KM(e);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)a?n.fieldMask=a:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const y=[];a&&y.push(a),d.length>0&&y.push(...d),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class XM extends $i{constructor(t){super(),this.apiClient=t}async create(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=kM(this.apiClient,t);a=ft("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const y=QM(d,t.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $M(n,t){const e={},o=f(n,["force"]);return t!==void 0&&o!=null&&p(t,["_query","force"],o),e}function WM(n){const t={},e=f(n,["name"]);e!=null&&p(t,["_url","name"],e);const o=f(n,["config"]);return o!=null&&$M(o,t),t}function ZM(n){const t={},e=f(n,["name"]);return e!=null&&p(t,["_url","name"],e),t}function jM(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function tD(n){const t={},e=f(n,["parent"]);e!=null&&p(t,["_url","parent"],e);const o=f(n,["config"]);return o!=null&&jM(o,t),t}function eD(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),p(t,["documents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nD extends $i{constructor(t){super(),this.apiClient=t,this.list=async e=>new Vs(Ji.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:e.parent,config:o.config}),await this.listInternal(e),e)}async get(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZM(t);return a=ft("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var e,o;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WM(t);r=ft("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tD(t);return a=ft("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=eD(y),v=new PC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iD extends $i{constructor(t,e=new nD(t)){super(),this.apiClient=t,this.documents=e,this.list=async(o={})=>new Vs(Ji.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KN(t);return a=ft("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$N(t);return a=ft("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var e,o;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XN(t);r=ft("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=nM(t);return a=ft("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=iM(y),v=new UC;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oM(t);return a=ft("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=sM(y),v=new LC;return Object.assign(v,m),v})}}async importFile(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jN(t);return a=ft("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=ZN(y),v=new op;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let CE=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return CE=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),e=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^e()&15>>+o/4).toString(16))};const oD=()=>CE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mh(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Dh=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn extends Error{}class fn extends Hn{constructor(t,e,o,r){super(`${fn.makeMessage(t,e,o)}`),this.status=t,this.headers=r,this.error=e}static makeMessage(t,e,o){const r=e?.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):o;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,e,o,r){if(!t||!r)return new Bc({message:o,cause:Dh(e)});const a=e;return t===400?new IE(t,a,o,r):t===401?new wE(t,a,o,r):t===403?new NE(t,a,o,r):t===404?new ME(t,a,o,r):t===409?new DE(t,a,o,r):t===422?new bE(t,a,o,r):t===429?new xE(t,a,o,r):t>=500?new VE(t,a,o,r):new fn(t,a,o,r)}}class bh extends fn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Bc extends fn{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class RE extends Bc{constructor({message:t}={}){super({message:t??"Request timed out."})}}class IE extends fn{}class wE extends fn{}class NE extends fn{}class ME extends fn{}class DE extends fn{}class bE extends fn{}class xE extends fn{}class VE extends fn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sD=/^[a-z][a-z0-9+.-]*:/i,rD=n=>sD.test(n);let xh=n=>(xh=Array.isArray,xh(n));const lD=xh;let aD=lD;const Jv=aD;function uD(n){if(!n)return!0;for(const t in n)return!1;return!0}function cD(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const fD=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Hn(`${n} must be an integer`);if(t<0)throw new Hn(`${n} must be a positive integer`);return t},dD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hD=n=>new Promise(t=>setTimeout(t,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ir="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const mD=()=>{var n,t,e,o,r;const a=pD();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":Qv(Deno.build.os),"X-Stainless-Arch":Kv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":Qv((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":Kv((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=gD();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function gD(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of n){const o=e.exec(navigator.userAgent);if(o){const r=o[1]||0,a=o[2]||0,c=o[3]||0;return{browser:t,version:`${r}.${a}.${c}`}}}return null}const Kv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Qv=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let oc;const yD=()=>oc??(oc=mD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _D(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function PE(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function vD(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return PE({start(){},async pull(e){const{done:o,value:r}=await t.next();o?e.close():e.enqueue(r)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function UE(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function TD(n){var t,e;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((e=(t=n[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ED=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LE=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function fh(n,t,e){return LE(),new File(n,t??"unknown_file",e)}function AD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const SD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kE=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",CD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&kE(n),RD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function ID(n,t,e){if(LE(),n=await n,CD(n))return n instanceof File?n:fh([await n.arrayBuffer()],n.name);if(RD(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),fh(await Vh(r),t,e)}const o=await Vh(n);if(t||(t=AD(n)),!e?.type){const r=o.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(e=Object.assign(Object.assign({},e),{type:r}))}return fh(o,t,e)}async function Vh(n){var t,e,o,r,a;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(kE(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(SD(n))try{for(var d=!0,y=jn(n),m;m=await y.next(),t=m.done,!t;d=!0){r=m.value,d=!1;const v=r;c.push(...await Vh(v))}}catch(v){e={error:v}}finally{try{!d&&!t&&(o=y.return)&&await o.call(y)}finally{if(e)throw e.error}}else{const v=(a=n?.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${wD(n)}`)}return c}function wD(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OE{constructor(t){this._client=t}}OE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qE(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Xv=Object.freeze(Object.create(null)),ND=(n=qE)=>(function(e,...o){if(e.length===1)return e[0];let r=!1;const a=[],c=e.reduce((v,E,A)=>{var I,x,O;/[?#]/.test(E)&&(r=!0);const U=o[A];let Q=(r?encodeURIComponent:n)(""+U);return A!==o.length&&(U==null||typeof U=="object"&&U.toString===((O=Object.getPrototypeOf((x=Object.getPrototypeOf((I=U.hasOwnProperty)!==null&&I!==void 0?I:Xv))!==null&&x!==void 0?x:Xv))===null||O===void 0?void 0:O.toString))&&(Q=U+"",a.push({start:v.length+E.length,length:Q.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),v+E+(A===o.length?"":Q)},""),d=c.split(/[?#]/,1)[0],y=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let m;for(;(m=y.exec(d))!==null;)a.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(a.sort((v,E)=>v.start-E.start),a.length>0){let v=0;const E=a.reduce((A,I)=>{const x=" ".repeat(I.start-v),O="^".repeat(I.length);return v=I.start+I.length,A+x+O},"");throw new Hn(`Path parameters result in path with invalid segments:
${a.map(A=>A.error).join(`
`)}
${c}
${E}`)}return c}),sc=ND(qE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GE extends OE{create(t,e){var o;const{api_version:r=this._client.apiVersion}=t,a=Cc(t,["api_version"]);if("model"in a&&"agent_config"in a)throw new Hn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Hn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(sc`/${r}/interactions`,Object.assign(Object.assign({body:a},e),{stream:(o=t.stream)!==null&&o!==void 0?o:!1}))}delete(t,e={},o){const{api_version:r=this._client.apiVersion}=e??{};return this._client.delete(sc`/${r}/interactions/${t}`,o)}cancel(t,e={},o){const{api_version:r=this._client.apiVersion}=e??{};return this._client.post(sc`/${r}/interactions/${t}/cancel`,o)}get(t,e={},o){var r;const a=e??{},{api_version:c=this._client.apiVersion}=a,d=Cc(a,["api_version"]);return this._client.get(sc`/${c}/interactions/${t}`,Object.assign(Object.assign({query:d},o),{stream:(r=e?.stream)!==null&&r!==void 0?r:!1}))}}GE._key=Object.freeze(["interactions"]);class BE extends GE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MD(n){let t=0;for(const r of n)t+=r.length;const e=new Uint8Array(t);let o=0;for(const r of n)e.set(r,o),o+=r.length;return e}let rc;function fp(n){let t;return(rc??(t=new globalThis.TextEncoder,rc=t.encode.bind(t)))(n)}let lc;function $v(n){let t;return(lc??(t=new globalThis.TextDecoder,lc=t.decode.bind(t)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?fp(t):t;this.buffer=MD([this.buffer,e]);const o=[];let r;for(;(r=DD(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push($v(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=$v(this.buffer.subarray(0,a));o.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Fc.NEWLINE_CHARS=new Set([`
`,"\r"]);Fc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function DD(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function bD(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rc={off:0,error:200,warn:300,info:400,debug:500},Wv=(n,t,e)=>{if(n){if(cD(Rc,n))return n;un(e).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Rc))}`)}};function sa(){}function ac(n,t,e){return!t||Rc[n]>Rc[e]?sa:t[n].bind(t)}const xD={error:sa,warn:sa,info:sa,debug:sa};let Zv=new WeakMap;function un(n){var t;const e=n.logger,o=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!e)return xD;const r=Zv.get(e);if(r&&r[0]===o)return r[1];const a={error:ac("error",e,o),warn:ac("warn",e,o),info:ac("info",e,o),debug:ac("debug",e,o)};return Zv.set(e,[o,a]),a}const Is=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class br{constructor(t,e,o){this.iterator=t,this.controller=e,this.client=o}static fromSSEResponse(t,e,o){let r=!1;const a=o?un(o):console;function c(){return Zn(this,arguments,function*(){var y,m,v,E;if(r)throw new Hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let A=!1;try{try{for(var I=!0,x=jn(VD(t,e)),O;O=yield St(x.next()),y=O.done,!y;I=!0){E=O.value,I=!1;const U=E;if(!A)if(U.data.startsWith("[DONE]")){A=!0;continue}else try{yield yield St(JSON.parse(U.data))}catch(Q){throw a.error("Could not parse message into JSON:",U.data),a.error("From chunk:",U.raw),Q}}}catch(U){m={error:U}}finally{try{!I&&!y&&(v=x.return)&&(yield St(v.call(x)))}finally{if(m)throw m.error}}A=!0}catch(U){if(Mh(U))return yield St(void 0);throw U}finally{A||e.abort()}})}return new br(c,e,o)}static fromReadableStream(t,e,o){let r=!1;function a(){return Zn(this,arguments,function*(){var y,m,v,E;const A=new Fc,I=UE(t);try{for(var x=!0,O=jn(I),U;U=yield St(O.next()),y=U.done,!y;x=!0){E=U.value,x=!1;const Q=E;for(const nt of A.decode(Q))yield yield St(nt)}}catch(Q){m={error:Q}}finally{try{!x&&!y&&(v=O.return)&&(yield St(v.call(O)))}finally{if(m)throw m.error}}for(const Q of A.flush())yield yield St(Q)})}function c(){return Zn(this,arguments,function*(){var y,m,v,E;if(r)throw new Hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let A=!1;try{try{for(var I=!0,x=jn(a()),O;O=yield St(x.next()),y=O.done,!y;I=!0){E=O.value,I=!1;const U=E;A||U&&(yield yield St(JSON.parse(U)))}}catch(U){m={error:U}}finally{try{!I&&!y&&(v=x.return)&&(yield St(v.call(x)))}finally{if(m)throw m.error}}A=!0}catch(U){if(Mh(U))return yield St(void 0);throw U}finally{A||e.abort()}})}return new br(c,e,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],o=this.iterator(),r=a=>({next:()=>{if(a.length===0){const c=o.next();t.push(c),e.push(c)}return a.shift()}});return[new br(()=>r(t),this.controller,this.client),new br(()=>r(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return PE({async start(){e=t[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:a}=await e.next();if(a)return o.close();const c=fp(JSON.stringify(r)+`
`);o.enqueue(c)}catch(r){o.error(r)}},async cancel(){var o;await((o=e.return)===null||o===void 0?void 0:o.call(e))}})}}function VD(n,t){return Zn(this,arguments,function*(){var o,r,a,c;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Hn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Hn("Attempted to iterate over a response with no body");const d=new UD,y=new Fc,m=UE(n.body);try{for(var v=!0,E=jn(PD(m)),A;A=yield St(E.next()),o=A.done,!o;v=!0){c=A.value,v=!1;const I=c;for(const x of y.decode(I)){const O=d.decode(x);O&&(yield yield St(O))}}}catch(I){r={error:I}}finally{try{!v&&!o&&(a=E.return)&&(yield St(a.call(E)))}finally{if(r)throw r.error}}for(const I of y.flush()){const x=d.decode(I);x&&(yield yield St(x))}})}function PD(n){return Zn(this,arguments,function*(){var e,o,r,a;let c=new Uint8Array;try{for(var d=!0,y=jn(n),m;m=yield St(y.next()),e=m.done,!e;d=!0){a=m.value,d=!1;const v=a;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?fp(v):v;let A=new Uint8Array(c.length+E.length);A.set(c),A.set(E,c.length),c=A;let I;for(;(I=bD(c))!==-1;)yield yield St(c.slice(0,I)),c=c.slice(I)}}catch(v){o={error:v}}finally{try{!d&&!e&&(r=y.return)&&(yield St(r.call(y)))}finally{if(o)throw o.error}}c.length>0&&(yield yield St(c))})}class UD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,o,r]=LD(t,":");return r.startsWith(" ")&&(r=r.substring(1)),e==="event"?this.event=r:e==="data"&&this.data.push(r),null}}function LD(n,t){const e=n.indexOf(t);return e!==-1?[n.substring(0,e),t,n.substring(e+t.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kD(n,t){const{response:e,requestLogID:o,retryOfRequestLogID:r,startTime:a}=t,c=await(async()=>{var d;if(t.options.stream)return un(n).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,n):br.fromSSEResponse(e,t.controller,n);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const y=e.headers.get("content-type"),m=(d=y?.split(";")[0])===null||d===void 0?void 0:d.trim();return m?.includes("application/json")||m?.endsWith("+json")?await e.json():await e.text()})();return un(n).debug(`[${o}] response parsed`,Is({retryOfRequestLogID:r,url:e.url,status:e.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dp extends Promise{constructor(t,e,o=kD){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=o,this.client=t}_thenUnwrap(t){return new dp(this.client,this.responsePromise,async(e,o)=>t(await this.parseResponse(e,o),o))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FE=Symbol("brand.privateNullableHeaders");function*OD(n){if(!n)return;if(FE in n){const{values:o,nulls:r}=n;yield*o.entries();for(const a of r)yield[a,null];return}let t=!1,e;n instanceof Headers?e=n.entries():Jv(n)?e=n:(t=!0,e=Object.entries(n??{}));for(let o of e){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=Jv(o[1])?o[1]:[o[1]];let c=!1;for(const d of a)d!==void 0&&(t&&!c&&(c=!0,yield[r,null]),yield[r,d])}}const ia=n=>{const t=new Headers,e=new Set;for(const o of n){const r=new Set;for(const[a,c]of OD(o)){const d=a.toLowerCase();r.has(d)||(t.delete(a),r.add(d)),c===null?(t.delete(a),e.add(d)):(t.append(a,c),e.delete(d))}}return{[FE]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dh=n=>{var t,e,o,r,a,c;if(typeof globalThis.process<"u")return(o=(e=(t=uC)===null||t===void 0?void 0:t[n])===null||e===void 0?void 0:e.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var HE;class Hc{constructor(t){var e,o,r,a,c,d,y,{baseURL:m=dh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(e=dh("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:E="v1beta"}=t,A=Cc(t,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:v,apiVersion:E},A),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(o=I.timeout)!==null&&o!==void 0?o:Hc.DEFAULT_TIMEOUT,this.logger=(r=I.logger)!==null&&r!==void 0?r:console;const x="warn";this.logLevel=x,this.logLevel=(c=(a=Wv(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:Wv(dh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:x,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(y=I.fetch)!==null&&y!==void 0?y:_D(),this.encoder=ED,this._options=I,this.apiKey=v,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=ia([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return ia([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ia([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,o])=>typeof o<"u").map(([e,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(e)}=`;throw new Hn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ir}`}defaultIdempotencyKey(){return`stainless-node-retry-${oD()}`}makeStatusError(t,e,o,r){return fn.generate(t,e,o,r)}buildURL(t,e,o){const r=!this.baseURLOverridden()&&o||this.baseURL,a=rD(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),c=this.defaultQuery();return uD(c)||(e=Object.assign(Object.assign({},c),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(a.search=this.stringifyQuery(e)),a.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:o}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:t,path:e},r)))}request(t,e=null){return new dp(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,o){var r,a,c;const d=await t,y=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;e==null&&(e=y),await this.prepareOptions(d);const{req:m,url:v,timeout:E}=await this.buildRequest(d,{retryCount:y-e});await this.prepareRequest(m,{url:v,options:d});const A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(un(this).debug(`[${A}] sending request`,Is({retryOfRequestLogID:o,method:d.method,url:v,options:d,headers:m.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new bh;const O=new AbortController,U=await this.fetchWithTimeout(v,m,E,O).catch(Dh),Q=Date.now();if(U instanceof globalThis.Error){const Z=`retrying, ${e} attempts remaining`;if(!((c=d.signal)===null||c===void 0)&&c.aborted)throw new bh;const it=Mh(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(e)return un(this).info(`[${A}] connection ${it?"timed out":"failed"} - ${Z}`),un(this).debug(`[${A}] connection ${it?"timed out":"failed"} (${Z})`,Is({retryOfRequestLogID:o,url:v,durationMs:Q-x,message:U.message})),this.retryRequest(d,e,o??A);throw un(this).info(`[${A}] connection ${it?"timed out":"failed"} - error; no more retries left`),un(this).debug(`[${A}] connection ${it?"timed out":"failed"} (error; no more retries left)`,Is({retryOfRequestLogID:o,url:v,durationMs:Q-x,message:U.message})),it?new RE:new Bc({cause:U})}const nt=`[${A}${I}] ${m.method} ${v} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${Q-x}ms`;if(!U.ok){const Z=await this.shouldRetry(U);if(e&&Z){const N=`retrying, ${e} attempts remaining`;return await TD(U.body),un(this).info(`${nt} - ${N}`),un(this).debug(`[${A}] response error (${N})`,Is({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,durationMs:Q-x})),this.retryRequest(d,e,o??A,U.headers)}const it=Z?"error; no more retries left":"error; not retryable";un(this).info(`${nt} - ${it}`);const ct=await U.text().catch(N=>Dh(N).message),rt=dD(ct),D=rt?void 0:ct;throw un(this).debug(`[${A}] response error (${it})`,Is({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,message:D,durationMs:Date.now()-x})),this.makeStatusError(U.status,rt,D,U.headers)}return un(this).info(nt),un(this).debug(`[${A}] response start`,Is({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,durationMs:Q-x})),{response:U,options:d,controller:O,requestLogID:A,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(t,e,o,r){const a=e||{},{signal:c,method:d}=a,y=Cc(a,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),o),v=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),y);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,t,E)}finally{clearTimeout(m)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,o,r){var a;let c;const d=r?.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(c=m)}const y=r?.get("retry-after");if(y&&!c){const m=parseFloat(y);Number.isNaN(m)?c=Date.parse(y)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(a=t.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(e,m)}return await hD(c),this.makeRequest(t,e-1,o)}calculateDefaultRetryTimeoutMillis(t,e){const a=e-t,c=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(t,{retryCount:e=0}={}){var o,r,a;const c=Object.assign({},t),{method:d,path:y,query:m,defaultBaseURL:v}=c,E=this.buildURL(y,m,v);"timeout"in c&&fD("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:A,body:I}=this.buildBody({options:c}),x=await this.buildHeaders({options:t,method:d,bodyHeaders:A,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:x},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:c.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:o,retryCount:r}){let a={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const c=await this.authHeaders(t);let d=ia([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),yD()),this._options.defaultHeaders,o,t.headers,c]);return this.validateHeaders(d),d.values}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const o=ia([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&o.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:vD(t)}:this.encoder({body:t,headers:o})}}Hc.DEFAULT_TIMEOUT=6e4;class Le extends Hc{constructor(){super(...arguments),this.interactions=new BE(this)}}HE=Le;Le.GeminiNextGenAPIClient=HE;Le.GeminiNextGenAPIClientError=Hn;Le.APIError=fn;Le.APIConnectionError=Bc;Le.APIConnectionTimeoutError=RE;Le.APIUserAbortError=bh;Le.NotFoundError=ME;Le.ConflictError=DE;Le.RateLimitError=xE;Le.BadRequestError=IE;Le.AuthenticationError=wE;Le.InternalServerError=VE;Le.PermissionDeniedError=NE;Le.UnprocessableEntityError=bE;Le.toFile=ID;Le.Interactions=BE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qD(n,t){const e={},o=f(n,["name"]);return o!=null&&p(e,["_url","name"],o),e}function GD(n,t){const e={},o=f(n,["name"]);return o!=null&&p(e,["_url","name"],o),e}function BD(n,t){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(e,["sdkHttpResponse"],o),e}function FD(n,t){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(e,["sdkHttpResponse"],o),e}function HD(n,t,e){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&p(t,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);t!==void 0&&a!=null&&p(t,["tuningTask","hyperparameters","epochCount"],a);const c=f(n,["learningRateMultiplier"]);if(c!=null&&p(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);t!==void 0&&d!=null&&p(t,["tuningTask","hyperparameters","batchSize"],d);const y=f(n,["learningRate"]);if(t!==void 0&&y!=null&&p(t,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function zD(n,t,e){const o={};let r=f(e,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec"],jv(I))}else if(r==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec"],jv(I))}const a=f(n,["tunedModelDisplayName"]);t!==void 0&&a!=null&&p(t,["tunedModelDisplayName"],a);const c=f(n,["description"]);t!==void 0&&c!=null&&p(t,["description"],c);let d=f(e,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let y=f(e,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(y==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let m=f(e,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(m==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let v=f(e,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(v==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);t!==void 0&&E!=null&&p(t,["labels"],E);const A=f(n,["beta"]);return t!==void 0&&A!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","beta"],A),o}function YD(n,t){const e={},o=f(n,["baseModel"]);o!=null&&p(e,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&p(e,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&nb(a);const c=f(n,["config"]);return c!=null&&HD(c,e),e}function JD(n,t){const e={},o=f(n,["baseModel"]);o!=null&&p(e,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&p(e,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&ib(a,e,t);const c=f(n,["config"]);return c!=null&&zD(c,e,t),e}function KD(n,t){const e={},o=f(n,["name"]);return o!=null&&p(e,["_url","name"],o),e}function QD(n,t){const e={},o=f(n,["name"]);return o!=null&&p(e,["_url","name"],o),e}function XD(n,t,e){const o={},r=f(n,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const a=f(n,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const c=f(n,["filter"]);return t!==void 0&&c!=null&&p(t,["_query","filter"],c),o}function $D(n,t,e){const o={},r=f(n,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const a=f(n,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const c=f(n,["filter"]);return t!==void 0&&c!=null&&p(t,["_query","filter"],c),o}function WD(n,t){const e={},o=f(n,["config"]);return o!=null&&XD(o,e),e}function ZD(n,t){const e={},o=f(n,["config"]);return o!=null&&$D(o,e),e}function jD(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const a=f(n,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>zE(d))),p(e,["tuningJobs"],c)}return e}function tb(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const a=f(n,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>Ph(d))),p(e,["tuningJobs"],c)}return e}function eb(n,t){const e={},o=f(n,["name"]);o!=null&&p(e,["model"],o);const r=f(n,["name"]);return r!=null&&p(e,["endpoint"],r),e}function nb(n,t){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),p(e,["examples","examples"],r)}return e}function ib(n,t,e){const o={};let r=f(e,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);t!==void 0&&c!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);t!==void 0&&c!=null&&p(t,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=f(e,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);t!==void 0&&c!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);t!==void 0&&c!=null&&p(t,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function zE(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&p(e,["name"],r);const a=f(n,["state"]);a!=null&&p(e,["state"],rE(a));const c=f(n,["createTime"]);c!=null&&p(e,["createTime"],c);const d=f(n,["tuningTask","startTime"]);d!=null&&p(e,["startTime"],d);const y=f(n,["tuningTask","completeTime"]);y!=null&&p(e,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&p(e,["updateTime"],m);const v=f(n,["description"]);v!=null&&p(e,["description"],v);const E=f(n,["baseModel"]);E!=null&&p(e,["baseModel"],E);const A=f(n,["_self"]);return A!=null&&p(e,["tunedModel"],eb(A)),e}function Ph(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&p(e,["name"],r);const a=f(n,["state"]);a!=null&&p(e,["state"],rE(a));const c=f(n,["createTime"]);c!=null&&p(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const y=f(n,["endTime"]);y!=null&&p(e,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&p(e,["updateTime"],m);const v=f(n,["error"]);v!=null&&p(e,["error"],v);const E=f(n,["description"]);E!=null&&p(e,["description"],E);const A=f(n,["baseModel"]);A!=null&&p(e,["baseModel"],A);const I=f(n,["tunedModel"]);I!=null&&p(e,["tunedModel"],I);const x=f(n,["preTunedModel"]);x!=null&&p(e,["preTunedModel"],x);const O=f(n,["supervisedTuningSpec"]);O!=null&&p(e,["supervisedTuningSpec"],O);const U=f(n,["preferenceOptimizationSpec"]);U!=null&&p(e,["preferenceOptimizationSpec"],U);const Q=f(n,["tuningDataStats"]);Q!=null&&p(e,["tuningDataStats"],Q);const nt=f(n,["encryptionSpec"]);nt!=null&&p(e,["encryptionSpec"],nt);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&p(e,["partnerModelTuningSpec"],Z);const it=f(n,["customBaseModel"]);it!=null&&p(e,["customBaseModel"],it);const ct=f(n,["experiment"]);ct!=null&&p(e,["experiment"],ct);const rt=f(n,["labels"]);rt!=null&&p(e,["labels"],rt);const D=f(n,["outputUri"]);D!=null&&p(e,["outputUri"],D);const M=f(n,["pipelineJob"]);M!=null&&p(e,["pipelineJob"],M);const N=f(n,["serviceAccount"]);N!=null&&p(e,["serviceAccount"],N);const P=f(n,["tunedModelDisplayName"]);P!=null&&p(e,["tunedModelDisplayName"],P);const L=f(n,["veoTuningSpec"]);return L!=null&&p(e,["veoTuningSpec"],L),e}function ob(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&p(e,["name"],r);const a=f(n,["metadata"]);a!=null&&p(e,["metadata"],a);const c=f(n,["done"]);c!=null&&p(e,["done"],c);const d=f(n,["error"]);return d!=null&&p(e,["error"],d),e}function jv(n,t){const e={},o=f(n,["gcsUri"]);o!=null&&p(e,["validationDatasetUri"],o);const r=f(n,["vertexDatasetResource"]);return r!=null&&p(e,["validationDatasetUri"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sb extends $i{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Vs(Ji.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var o;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){const r={tunedModelName:e.baseModel};!((o=e.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=e.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},e),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},e);return await this.tuneInternal(r)}else{const r=Object.assign({},e),a=await this.tuneMldevInternal(r);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:Ah.JOB_STATE_QUEUED}}}}async getInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=QD(t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Ph(v))}else{const m=KD(t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>zE(v))}}async listInternal(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=ZD(t);return d=ft("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=tb(v),A=new Rv;return Object.assign(A,E),A})}else{const m=WD(t);return d=ft("tunedModels",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=jD(v),A=new Rv;return Object.assign(A,E),A})}}async cancel(t){var e,o,r,a;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=GD(t);return d=ft("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=FD(v),A=new Iv;return Object.assign(A,E),A})}else{const m=qD(t);return d=ft("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=BD(v),A=new Iv;return Object.assign(A,E),A})}}async tuneInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const d=JD(t,t);return a=ft("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>Ph(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=YD(t);return a=ft("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>ob(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rb{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lb=1024*1024*8,ab=3,ub=1e3,cb=2,Ic="x-goog-upload-status";async function fb(n,t,e){var o;const r=await YE(n,t,e),a=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ic])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function db(n,t,e){var o;const r=await YE(n,t,e),a=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ic])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=tE(a),d=new sp;return Object.assign(d,c),d}async function YE(n,t,e){var o,r;let a=0,c=0,d=new Sh(new Response),y="upload";for(a=n.size;c<a;){const m=Math.min(lb,a-c),v=n.slice(c,c+m);c+m>=a&&(y+=", finalize");let E=0,A=ub;for(;E<ab&&(d=await e.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=d?.headers)===null||o===void 0)&&o[Ic]));)E++,await pb(A),A=A*cb;if(c+=m,((r=d?.headers)===null||r===void 0?void 0:r[Ic])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function hb(n){return{size:n.size,type:n.type}}function pb(n){return new Promise(t=>setTimeout(t,n))}class mb{async upload(t,e,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await fb(t,e,o)}async uploadToFileSearchStore(t,e,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await db(t,e,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await hb(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gb{create(t,e,o){return new yb(t,e,o)}}class yb{constructor(t,e,o){this.url=t,this.headers=e,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tT="x-goog-api-key";class _b{constructor(t){this.apiKey=t}async addAuthHeaders(t,e){if(t.get(tT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(tT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vb="gl-node/";class JE{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const e=new Le({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=e.interactions,this._interactions}constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const o=hC(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new _b(this.apiKey);this.apiClient=new hM({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:vb+"web",uploader:new mb,downloader:new rb}),this.models=new xM(this.apiClient),this.live=new IM(this.apiClient,r,new gb),this.batches=new FR(this.apiClient),this.chats=new SI(this.models,this.apiClient),this.caches=new TI(this.apiClient),this.files=new VI(this.apiClient),this.operations=new VM(this.apiClient),this.authTokens=new XM(this.apiClient),this.tunings=new sb(this.apiClient),this.fileSearchStores=new iD(this.apiClient)}}var eT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=function(n){const t=[];let e=0;for(let o=0;o<n.length;o++){let r=n.charCodeAt(o);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++o)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Tb=function(n){const t=[];let e=0,o=0;for(;e<n.length;){const r=n[e++];if(r<128)t[o++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[e++];t[o++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[e++],c=n[e++],d=n[e++],y=((r&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;t[o++]=String.fromCharCode(55296+(y>>10)),t[o++]=String.fromCharCode(56320+(y&1023))}else{const a=n[e++],c=n[e++];t[o++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return t.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<n.length;r+=3){const a=n[r],c=r+1<n.length,d=c?n[r+1]:0,y=r+2<n.length,m=y?n[r+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let A=(d&15)<<2|m>>6,I=m&63;y||(I=64,c||(A=64)),o.push(e[v],e[E],e[A],e[I])}return o.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(KE(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Tb(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<n.length;){const a=e[n.charAt(r++)],d=r<n.length?e[n.charAt(r)]:0;++r;const m=r<n.length?e[n.charAt(r)]:64;++r;const E=r<n.length?e[n.charAt(r)]:64;if(++r,a==null||d==null||m==null||E==null)throw new Eb;const A=a<<2|d>>4;if(o.push(A),m!==64){const I=d<<4&240|m>>2;if(o.push(I),E!==64){const x=m<<6&192|E;o.push(x)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Eb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ab=function(n){const t=KE(n);return QE.encodeByteArray(t,!0)},wc=function(n){return Ab(n).replace(/\./g,"")},Sb=function(n){try{return QE.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=()=>Cb().__FIREBASE_DEFAULTS__,Ib=()=>{if(typeof process>"u"||typeof eT>"u")return;const n=eT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Sb(n[1]);return t&&JSON.parse(t)},hp=()=>{try{return Rb()||Ib()||wb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Nb=n=>{var t,e;return(e=(t=hp())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},Mb=n=>{const t=Nb(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),o]:[t.substring(0,e),o]},XE=()=>{var n;return(n=hp())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,o)=>{e?this.reject(e):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},o=t||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[wc(JSON.stringify(e)),wc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vb(){var n;const t=(n=hp())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Pb(){return!Vb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ub(){try{return typeof indexedDB=="object"}catch{return!1}}function Lb(){return new Promise((n,t)=>{try{let e=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(o),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var a;t(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="FirebaseError";class Kr extends Error{constructor(t,e,o){super(e),this.code=t,this.customData=o,this.name=kb,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$E.prototype.create)}}class $E{constructor(t,e,o){this.service=t,this.serviceName=e,this.errors=o}create(t,...e){const o=e[0]||{},r=`${this.service}/${t}`,a=this.errors[t],c=a?Ob(a,o):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new Kr(r,d,o)}}function Ob(n,t){return n.replace(qb,(e,o)=>{const r=t[o];return r!=null?String(r):`<${o}?>`})}const qb=/\{\$([^}]+)}/g;function Uh(n,t){if(n===t)return!0;const e=Object.keys(n),o=Object.keys(t);for(const r of e){if(!o.includes(r))return!1;const a=n[r],c=t[r];if(nT(a)&&nT(c)){if(!Uh(a,c))return!1}else if(a!==c)return!1}for(const r of o)if(!e.includes(r))return!1;return!0}function nT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(n){return n&&n._delegate?n._delegate:n}class ha{constructor(t,e,o){this.name=t,this.instanceFactory=e,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const o=new Db;if(this.instancesDeferred.set(e,o),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const o=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Fb(t))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[e,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:r});o.resolve(a)}catch{}}}}clearInstance(t=ws){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ws){return this.instances.has(t)}getOptions(t=ws){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:e});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);o===d&&c.resolve(r)}return r}onInit(t,e){var o;const r=this.normalizeInstanceIdentifier(e),a=(o=this.onInitCallbacks.get(r))!==null&&o!==void 0?o:new Set;a.add(t),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&t(c,r),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const o=this.onInitCallbacks.get(e);if(o)for(const r of o)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Bb(t),options:e}),this.instances.set(t,o),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=ws){return this.component?this.component.multipleInstances?t:ws:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bb(n){return n===ws?void 0:n}function Fb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Gb(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qt||(qt={}));const zb={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},Yb=qt.INFO,Jb={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},Kb=(n,t,...e)=>{if(t<n.logLevel)return;const o=new Date().toISOString(),r=Jb[t];if(r)console[r](`[${o}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class WE{constructor(t){this.name=t,this._logLevel=Yb,this._logHandler=Kb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?zb[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...t),this._logHandler(this,qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...t),this._logHandler(this,qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...t),this._logHandler(this,qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...t),this._logHandler(this,qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...t),this._logHandler(this,qt.ERROR,...t)}}const Qb=(n,t)=>t.some(e=>n instanceof e);let iT,oT;function Xb(){return iT||(iT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $b(){return oT||(oT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZE=new WeakMap,Lh=new WeakMap,jE=new WeakMap,hh=new WeakMap,pp=new WeakMap;function Wb(n){const t=new Promise((e,o)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{e(Fo(n.result)),r()},c=()=>{o(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&ZE.set(e,n)}).catch(()=>{}),pp.set(t,n),t}function Zb(n){if(Lh.has(n))return;const t=new Promise((e,o)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{e(),r()},c=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Lh.set(n,t)}let kh={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Lh.get(n);if(t==="objectStoreNames")return n.objectStoreNames||jE.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Fo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function jb(n){kh=n(kh)}function tx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const o=n.call(ph(this),t,...e);return jE.set(o,t.sort?t.sort():[t]),Fo(o)}:$b().includes(n)?function(...t){return n.apply(ph(this),t),Fo(ZE.get(this))}:function(...t){return Fo(n.apply(ph(this),t))}}function ex(n){return typeof n=="function"?tx(n):(n instanceof IDBTransaction&&Zb(n),Qb(n,Xb())?new Proxy(n,kh):n)}function Fo(n){if(n instanceof IDBRequest)return Wb(n);if(hh.has(n))return hh.get(n);const t=ex(n);return t!==n&&(hh.set(n,t),pp.set(t,n)),t}const ph=n=>pp.get(n);function nx(n,t,{blocked:e,upgrade:o,blocking:r,terminated:a}={}){const c=indexedDB.open(n,t),d=Fo(c);return o&&c.addEventListener("upgradeneeded",y=>{o(Fo(c.result),y.oldVersion,y.newVersion,Fo(c.transaction),y)}),e&&c.addEventListener("blocked",y=>e(y.oldVersion,y.newVersion,y)),d.then(y=>{a&&y.addEventListener("close",()=>a()),r&&y.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const ix=["get","getKey","getAll","getAllKeys","count"],ox=["put","add","delete","clear"],mh=new Map;function sT(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(mh.get(t))return mh.get(t);const e=t.replace(/FromIndex$/,""),o=t!==e,r=ox.includes(e);if(!(e in(o?IDBIndex:IDBObjectStore).prototype)||!(r||ix.includes(e)))return;const a=async function(c,...d){const y=this.transaction(c,r?"readwrite":"readonly");let m=y.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[e](...d),r&&y.done]))[0]};return mh.set(t,a),a}jb(n=>({...n,get:(t,e,o)=>sT(t,e)||n.get(t,e,o),has:(t,e)=>!!sT(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(rx(e)){const o=e.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(e=>e).join(" ")}}function rx(n){const t=n.getComponent();return t?.type==="VERSION"}const Oh="@firebase/app",rT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new WE("@firebase/app"),lx="@firebase/app-compat",ax="@firebase/analytics-compat",ux="@firebase/analytics",cx="@firebase/app-check-compat",fx="@firebase/app-check",dx="@firebase/auth",hx="@firebase/auth-compat",px="@firebase/database",mx="@firebase/data-connect",gx="@firebase/database-compat",yx="@firebase/functions",_x="@firebase/functions-compat",vx="@firebase/installations",Tx="@firebase/installations-compat",Ex="@firebase/messaging",Ax="@firebase/messaging-compat",Sx="@firebase/performance",Cx="@firebase/performance-compat",Rx="@firebase/remote-config",Ix="@firebase/remote-config-compat",wx="@firebase/storage",Nx="@firebase/storage-compat",Mx="@firebase/firestore",Dx="@firebase/vertexai-preview",bx="@firebase/firestore-compat",xx="firebase",Vx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="[DEFAULT]",Px={[Oh]:"fire-core",[lx]:"fire-core-compat",[ux]:"fire-analytics",[ax]:"fire-analytics-compat",[fx]:"fire-app-check",[cx]:"fire-app-check-compat",[dx]:"fire-auth",[hx]:"fire-auth-compat",[px]:"fire-rtdb",[mx]:"fire-data-connect",[gx]:"fire-rtdb-compat",[yx]:"fire-fn",[_x]:"fire-fn-compat",[vx]:"fire-iid",[Tx]:"fire-iid-compat",[Ex]:"fire-fcm",[Ax]:"fire-fcm-compat",[Sx]:"fire-perf",[Cx]:"fire-perf-compat",[Rx]:"fire-rc",[Ix]:"fire-rc-compat",[wx]:"fire-gcs",[Nx]:"fire-gcs-compat",[Mx]:"fire-fst",[bx]:"fire-fst-compat",[Dx]:"fire-vertex","fire-js":"fire-js",[xx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Map,Ux=new Map,Gh=new Map;function lT(n,t){try{n.container.addComponent(t)}catch(e){Ki.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Nc(n){const t=n.name;if(Gh.has(t))return Ki.debug(`There were multiple attempts to register component ${t}.`),!1;Gh.set(t,n);for(const e of pa.values())lT(e,n);for(const e of Ux.values())lT(e,n);return!0}function Lx(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ho=new $E("app","Firebase",kx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(t,e,o){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=Vx;function t0(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const o=Object.assign({name:qh,automaticDataCollectionEnabled:!1},t),r=o.name;if(typeof r!="string"||!r)throw Ho.create("bad-app-name",{appName:String(r)});if(e||(e=XE()),!e)throw Ho.create("no-options");const a=pa.get(r);if(a){if(Uh(e,a.options)&&Uh(o,a.config))return a;throw Ho.create("duplicate-app",{appName:r})}const c=new Hb(r);for(const y of Gh.values())c.addComponent(y);const d=new Ox(e,o,c);return pa.set(r,d),d}function e0(n=qh){const t=pa.get(n);if(!t&&n===qh&&XE())return t0();if(!t)throw Ho.create("no-app",{appName:n});return t}function Gx(){return Array.from(pa.values())}function Pr(n,t,e){var o;let r=(o=Px[n])!==null&&o!==void 0?o:n;e&&(r+=`-${e}`);const a=r.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const d=[`Unable to register library "${r}" with version "${t}":`];a&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ki.warn(d.join(" "));return}Nc(new ha(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="firebase-heartbeat-database",Fx=1,ma="firebase-heartbeat-store";let gh=null;function n0(){return gh||(gh=nx(Bx,Fx,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(ma)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ho.create("idb-open",{originalErrorMessage:n.message})})),gh}async function Hx(n){try{const e=(await n0()).transaction(ma),o=await e.objectStore(ma).get(i0(n));return await e.done,o}catch(t){if(t instanceof Kr)Ki.warn(t.message);else{const e=Ho.create("idb-get",{originalErrorMessage:t?.message});Ki.warn(e.message)}}}async function aT(n,t){try{const o=(await n0()).transaction(ma,"readwrite");await o.objectStore(ma).put(t,i0(n)),await o.done}catch(e){if(e instanceof Kr)Ki.warn(e.message);else{const o=Ho.create("idb-set",{originalErrorMessage:e?.message});Ki.warn(o.message)}}}function i0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=1024,Yx=720*60*60*1e3;class Jx{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Qx(e),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=uT();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=Yx}),this._storage.overwrite(this._heartbeatsCache))}catch(o){Ki.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=uT(),{heartbeatsToSend:o,unsentEntries:r}=Kx(this._heartbeatsCache.heartbeats),a=wc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ki.warn(e),""}}}function uT(){return new Date().toISOString().substring(0,10)}function Kx(n,t=zx){const e=[];let o=n.slice();for(const r of n){const a=e.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),cT(e)>t){a.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),cT(e)>t){e.pop();break}o=o.slice(1)}return{heartbeatsToSend:e,unsentEntries:o}}class Qx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ub()?Lb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Hx(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return aT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return aT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function cT(n){return wc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n){Nc(new ha("platform-logger",t=>new sx(t),"PRIVATE")),Nc(new ha("heartbeat",t=>new Jx(t),"PRIVATE")),Pr(Oh,rT,n),Pr(Oh,rT,"esm2017"),Pr("fire-js","")}Xx("");var $x="firebase",Wx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr($x,Wx,"app");var fT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,o0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,M){function N(){}N.prototype=M.prototype,D.D=M.prototype,D.prototype=new N,D.prototype.constructor=D,D.C=function(P,L,G){for(var b=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)b[Kt-2]=arguments[Kt];return M.prototype[L].apply(P,b)}}function e(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,e),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,M,N){N||(N=0);var P=Array(16);if(typeof M=="string")for(var L=0;16>L;++L)P[L]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(L=0;16>L;++L)P[L]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=D.g[0],N=D.g[1],L=D.g[2];var G=D.g[3],b=M+(G^N&(L^G))+P[0]+3614090360&4294967295;M=N+(b<<7&4294967295|b>>>25),b=G+(L^M&(N^L))+P[1]+3905402710&4294967295,G=M+(b<<12&4294967295|b>>>20),b=L+(N^G&(M^N))+P[2]+606105819&4294967295,L=G+(b<<17&4294967295|b>>>15),b=N+(M^L&(G^M))+P[3]+3250441966&4294967295,N=L+(b<<22&4294967295|b>>>10),b=M+(G^N&(L^G))+P[4]+4118548399&4294967295,M=N+(b<<7&4294967295|b>>>25),b=G+(L^M&(N^L))+P[5]+1200080426&4294967295,G=M+(b<<12&4294967295|b>>>20),b=L+(N^G&(M^N))+P[6]+2821735955&4294967295,L=G+(b<<17&4294967295|b>>>15),b=N+(M^L&(G^M))+P[7]+4249261313&4294967295,N=L+(b<<22&4294967295|b>>>10),b=M+(G^N&(L^G))+P[8]+1770035416&4294967295,M=N+(b<<7&4294967295|b>>>25),b=G+(L^M&(N^L))+P[9]+2336552879&4294967295,G=M+(b<<12&4294967295|b>>>20),b=L+(N^G&(M^N))+P[10]+4294925233&4294967295,L=G+(b<<17&4294967295|b>>>15),b=N+(M^L&(G^M))+P[11]+2304563134&4294967295,N=L+(b<<22&4294967295|b>>>10),b=M+(G^N&(L^G))+P[12]+1804603682&4294967295,M=N+(b<<7&4294967295|b>>>25),b=G+(L^M&(N^L))+P[13]+4254626195&4294967295,G=M+(b<<12&4294967295|b>>>20),b=L+(N^G&(M^N))+P[14]+2792965006&4294967295,L=G+(b<<17&4294967295|b>>>15),b=N+(M^L&(G^M))+P[15]+1236535329&4294967295,N=L+(b<<22&4294967295|b>>>10),b=M+(L^G&(N^L))+P[1]+4129170786&4294967295,M=N+(b<<5&4294967295|b>>>27),b=G+(N^L&(M^N))+P[6]+3225465664&4294967295,G=M+(b<<9&4294967295|b>>>23),b=L+(M^N&(G^M))+P[11]+643717713&4294967295,L=G+(b<<14&4294967295|b>>>18),b=N+(G^M&(L^G))+P[0]+3921069994&4294967295,N=L+(b<<20&4294967295|b>>>12),b=M+(L^G&(N^L))+P[5]+3593408605&4294967295,M=N+(b<<5&4294967295|b>>>27),b=G+(N^L&(M^N))+P[10]+38016083&4294967295,G=M+(b<<9&4294967295|b>>>23),b=L+(M^N&(G^M))+P[15]+3634488961&4294967295,L=G+(b<<14&4294967295|b>>>18),b=N+(G^M&(L^G))+P[4]+3889429448&4294967295,N=L+(b<<20&4294967295|b>>>12),b=M+(L^G&(N^L))+P[9]+568446438&4294967295,M=N+(b<<5&4294967295|b>>>27),b=G+(N^L&(M^N))+P[14]+3275163606&4294967295,G=M+(b<<9&4294967295|b>>>23),b=L+(M^N&(G^M))+P[3]+4107603335&4294967295,L=G+(b<<14&4294967295|b>>>18),b=N+(G^M&(L^G))+P[8]+1163531501&4294967295,N=L+(b<<20&4294967295|b>>>12),b=M+(L^G&(N^L))+P[13]+2850285829&4294967295,M=N+(b<<5&4294967295|b>>>27),b=G+(N^L&(M^N))+P[2]+4243563512&4294967295,G=M+(b<<9&4294967295|b>>>23),b=L+(M^N&(G^M))+P[7]+1735328473&4294967295,L=G+(b<<14&4294967295|b>>>18),b=N+(G^M&(L^G))+P[12]+2368359562&4294967295,N=L+(b<<20&4294967295|b>>>12),b=M+(N^L^G)+P[5]+4294588738&4294967295,M=N+(b<<4&4294967295|b>>>28),b=G+(M^N^L)+P[8]+2272392833&4294967295,G=M+(b<<11&4294967295|b>>>21),b=L+(G^M^N)+P[11]+1839030562&4294967295,L=G+(b<<16&4294967295|b>>>16),b=N+(L^G^M)+P[14]+4259657740&4294967295,N=L+(b<<23&4294967295|b>>>9),b=M+(N^L^G)+P[1]+2763975236&4294967295,M=N+(b<<4&4294967295|b>>>28),b=G+(M^N^L)+P[4]+1272893353&4294967295,G=M+(b<<11&4294967295|b>>>21),b=L+(G^M^N)+P[7]+4139469664&4294967295,L=G+(b<<16&4294967295|b>>>16),b=N+(L^G^M)+P[10]+3200236656&4294967295,N=L+(b<<23&4294967295|b>>>9),b=M+(N^L^G)+P[13]+681279174&4294967295,M=N+(b<<4&4294967295|b>>>28),b=G+(M^N^L)+P[0]+3936430074&4294967295,G=M+(b<<11&4294967295|b>>>21),b=L+(G^M^N)+P[3]+3572445317&4294967295,L=G+(b<<16&4294967295|b>>>16),b=N+(L^G^M)+P[6]+76029189&4294967295,N=L+(b<<23&4294967295|b>>>9),b=M+(N^L^G)+P[9]+3654602809&4294967295,M=N+(b<<4&4294967295|b>>>28),b=G+(M^N^L)+P[12]+3873151461&4294967295,G=M+(b<<11&4294967295|b>>>21),b=L+(G^M^N)+P[15]+530742520&4294967295,L=G+(b<<16&4294967295|b>>>16),b=N+(L^G^M)+P[2]+3299628645&4294967295,N=L+(b<<23&4294967295|b>>>9),b=M+(L^(N|~G))+P[0]+4096336452&4294967295,M=N+(b<<6&4294967295|b>>>26),b=G+(N^(M|~L))+P[7]+1126891415&4294967295,G=M+(b<<10&4294967295|b>>>22),b=L+(M^(G|~N))+P[14]+2878612391&4294967295,L=G+(b<<15&4294967295|b>>>17),b=N+(G^(L|~M))+P[5]+4237533241&4294967295,N=L+(b<<21&4294967295|b>>>11),b=M+(L^(N|~G))+P[12]+1700485571&4294967295,M=N+(b<<6&4294967295|b>>>26),b=G+(N^(M|~L))+P[3]+2399980690&4294967295,G=M+(b<<10&4294967295|b>>>22),b=L+(M^(G|~N))+P[10]+4293915773&4294967295,L=G+(b<<15&4294967295|b>>>17),b=N+(G^(L|~M))+P[1]+2240044497&4294967295,N=L+(b<<21&4294967295|b>>>11),b=M+(L^(N|~G))+P[8]+1873313359&4294967295,M=N+(b<<6&4294967295|b>>>26),b=G+(N^(M|~L))+P[15]+4264355552&4294967295,G=M+(b<<10&4294967295|b>>>22),b=L+(M^(G|~N))+P[6]+2734768916&4294967295,L=G+(b<<15&4294967295|b>>>17),b=N+(G^(L|~M))+P[13]+1309151649&4294967295,N=L+(b<<21&4294967295|b>>>11),b=M+(L^(N|~G))+P[4]+4149444226&4294967295,M=N+(b<<6&4294967295|b>>>26),b=G+(N^(M|~L))+P[11]+3174756917&4294967295,G=M+(b<<10&4294967295|b>>>22),b=L+(M^(G|~N))+P[2]+718787259&4294967295,L=G+(b<<15&4294967295|b>>>17),b=N+(G^(L|~M))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(L+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+G&4294967295}o.prototype.u=function(D,M){M===void 0&&(M=D.length);for(var N=M-this.blockSize,P=this.B,L=this.h,G=0;G<M;){if(L==0)for(;G<=N;)r(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<M;)if(P[L++]=D.charCodeAt(G++),L==this.blockSize){r(this,P),L=0;break}}else for(;G<M;)if(P[L++]=D[G++],L==this.blockSize){r(this,P),L=0;break}}this.h=L,this.o+=M},o.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;var N=8*this.o;for(M=D.length-8;M<D.length;++M)D[M]=N&255,N/=256;for(this.u(D),D=Array(16),M=N=0;4>M;++M)for(var P=0;32>P;P+=8)D[N++]=this.g[M]>>>P&255;return D};function a(D,M){var N=d;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=M(D)}function c(D,M){this.h=M;for(var N=[],P=!0,L=D.length-1;0<=L;L--){var G=D[L]|0;P&&G==M||(N[L]=G,P=!1)}this.g=N}var d={};function y(D){return-128<=D&&128>D?a(D,function(M){return new c([M|0],0>M?-1:0)}):new c([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return U(m(-D));for(var M=[],N=1,P=0;D>=N;P++)M[P]=D/N|0,N*=4294967296;return new c(M,0)}function v(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return U(v(D.substring(1),M));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(M,8)),P=E,L=0;L<D.length;L+=8){var G=Math.min(8,D.length-L),b=parseInt(D.substring(L,L+G),M);8>G?(G=m(Math.pow(M,G)),P=P.j(G).add(m(b))):(P=P.j(N),P=P.add(m(b)))}return P}var E=y(0),A=y(1),I=y(16777216);n=c.prototype,n.m=function(){if(O(this))return-U(this).m();for(var D=0,M=1,N=0;N<this.g.length;N++){var P=this.i(N);D+=(0<=P?P:4294967296+P)*M,M*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(x(this))return"0";if(O(this))return"-"+U(this).toString(D);for(var M=m(Math.pow(D,6)),N=this,P="";;){var L=it(N,M).g;N=Q(N,L.j(M));var G=((0<N.g.length?N.g[0]:N.h)>>>0).toString(D);if(N=L,x(N))return G+P;for(;6>G.length;)G="0"+G;P=G+P}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function x(D){if(D.h!=0)return!1;for(var M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function O(D){return D.h==-1}n.l=function(D){return D=Q(this,D),O(D)?-1:x(D)?0:1};function U(D){for(var M=D.g.length,N=[],P=0;P<M;P++)N[P]=~D.g[P];return new c(N,~D.h).add(A)}n.abs=function(){return O(this)?U(this):this},n.add=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],P=0,L=0;L<=M;L++){var G=P+(this.i(L)&65535)+(D.i(L)&65535),b=(G>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);P=b>>>16,G&=65535,b&=65535,N[L]=b<<16|G}return new c(N,N[N.length-1]&-2147483648?-1:0)};function Q(D,M){return D.add(U(M))}n.j=function(D){if(x(this)||x(D))return E;if(O(this))return O(D)?U(this).j(U(D)):U(U(this).j(D));if(O(D))return U(this.j(U(D)));if(0>this.l(I)&&0>D.l(I))return m(this.m()*D.m());for(var M=this.g.length+D.g.length,N=[],P=0;P<2*M;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var L=0;L<D.g.length;L++){var G=this.i(P)>>>16,b=this.i(P)&65535,Kt=D.i(L)>>>16,_e=D.i(L)&65535;N[2*P+2*L]+=b*_e,nt(N,2*P+2*L),N[2*P+2*L+1]+=G*_e,nt(N,2*P+2*L+1),N[2*P+2*L+1]+=b*Kt,nt(N,2*P+2*L+1),N[2*P+2*L+2]+=G*Kt,nt(N,2*P+2*L+2)}for(P=0;P<M;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=M;P<2*M;P++)N[P]=0;return new c(N,0)};function nt(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function Z(D,M){this.g=D,this.h=M}function it(D,M){if(x(M))throw Error("division by zero");if(x(D))return new Z(E,E);if(O(D))return M=it(U(D),M),new Z(U(M.g),U(M.h));if(O(M))return M=it(D,U(M)),new Z(U(M.g),M.h);if(30<D.g.length){if(O(D)||O(M))throw Error("slowDivide_ only works with positive integers.");for(var N=A,P=M;0>=P.l(D);)N=ct(N),P=ct(P);var L=rt(N,1),G=rt(P,1);for(P=rt(P,2),N=rt(N,2);!x(P);){var b=G.add(P);0>=b.l(D)&&(L=L.add(N),G=b),P=rt(P,1),N=rt(N,1)}return M=Q(D,L.j(M)),new Z(L,M)}for(L=E;0<=D.l(M);){for(N=Math.max(1,Math.floor(D.m()/M.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),G=m(N),b=G.j(M);O(b)||0<b.l(D);)N-=P,G=m(N),b=G.j(M);x(G)&&(G=A),L=L.add(G),D=Q(D,b)}return new Z(L,D)}n.A=function(D){return it(this,D).h},n.and=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],P=0;P<M;P++)N[P]=this.i(P)&D.i(P);return new c(N,this.h&D.h)},n.or=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],P=0;P<M;P++)N[P]=this.i(P)|D.i(P);return new c(N,this.h|D.h)},n.xor=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],P=0;P<M;P++)N[P]=this.i(P)^D.i(P);return new c(N,this.h^D.h)};function ct(D){for(var M=D.g.length+1,N=[],P=0;P<M;P++)N[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(N,D.h)}function rt(D,M){var N=M>>5;M%=32;for(var P=D.g.length-N,L=[],G=0;G<P;G++)L[G]=0<M?D.i(G+N)>>>M|D.i(G+N+1)<<32-M:D.i(G+N);return new c(L,D.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,o0=o,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Ms=c}).apply(typeof fT<"u"?fT:typeof self<"u"?self:typeof window<"u"?window:{});var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s0,ra,r0,gc,Bh,l0,a0,u0;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,C){return h==Array.prototype||h==Object.prototype||(h[T]=C.value),h};function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uc=="object"&&uc];for(var T=0;T<h.length;++T){var C=h[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=e(this);function r(h,T){if(T)t:{var C=o;h=h.split(".");for(var w=0;w<h.length-1;w++){var F=h[w];if(!(F in C))break t;C=C[F]}h=h[h.length-1],w=C[h],T=T(w),T!=w&&T!=null&&t(C,h,{configurable:!0,writable:!0,value:T})}}function a(h,T){h instanceof String&&(h+="");var C=0,w=!1,F={next:function(){if(!w&&C<h.length){var K=C++;return{value:T(K,h[K]),done:!1}}return w=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}r("Array.prototype.values",function(h){return h||function(){return a(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function y(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function m(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function v(h,T,C){return h.call.apply(h.bind,arguments)}function E(h,T,C){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,w),h.apply(T,F)}}return function(){return h.apply(T,arguments)}}function A(h,T,C){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,A.apply(null,arguments)}function I(h,T){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function x(h,T){function C(){}C.prototype=T.prototype,h.aa=T.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(w,F,K){for(var at=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)at[Xt-2]=arguments[Xt];return T.prototype[F].apply(w,at)}}function O(h){const T=h.length;if(0<T){const C=Array(T);for(let w=0;w<T;w++)C[w]=h[w];return C}return[]}function U(h,T){for(let C=1;C<arguments.length;C++){const w=arguments[C];if(y(w)){const F=h.length||0,K=w.length||0;h.length=F+K;for(let at=0;at<K;at++)h[F+at]=w[at]}else h.push(w)}}class Q{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function nt(h){return/^[\s\xa0]*$/.test(h)}function Z(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function it(h){return it[" "](h),h}it[" "]=function(){};var ct=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function rt(h,T,C){for(const w in h)T.call(C,h[w],w,h)}function D(h,T){for(const C in h)T.call(void 0,h[C],C,h)}function M(h){const T={};for(const C in h)T[C]=h[C];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,T){let C,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(C in w)h[C]=w[C];for(let K=0;K<N.length;K++)C=N[K],Object.prototype.hasOwnProperty.call(w,C)&&(h[C]=w[C])}}function L(h){var T=1;h=h.split(":");const C=[];for(;0<T&&h.length;)C.push(h.shift()),T--;return h.length&&C.push(h.join(":")),C}function G(h){d.setTimeout(()=>{throw h},0)}function b(){var h=Gt;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class Kt{constructor(){this.h=this.g=null}add(T,C){const w=_e.get();w.set(T,C),this.h?this.h.next=w:this.g=w,this.h=w}}var _e=new Q(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,_t=!1,Gt=new Kt,Qt=()=>{const h=d.Promise.resolve(void 0);lt=()=>{h.then(q)}};var q=()=>{for(var h;h=b();){try{h.h.call(h.g)}catch(C){G(C)}var T=_e;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}_t=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var pt=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return h})();function Et(h,T){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(ct){t:{try{it(T.nodeName);var F=!0;break t}catch{}F=!1}F||(T=null)}}else C=="mouseover"?T=h.fromElement:C=="mouseout"&&(T=h.toElement);this.relatedTarget=T,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Mt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Et.aa.h.call(this)}}x(Et,st);var Mt={2:"touch",3:"pen",4:"mouse"};Et.prototype.h=function(){Et.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),ke=0;function ae(h,T,C,w,F){this.listener=h,this.proxy=null,this.src=T,this.type=C,this.capture=!!w,this.ha=F,this.key=++ke,this.da=this.fa=!1}function ni(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _i(h){this.src=h,this.g={},this.h=0}_i.prototype.add=function(h,T,C,w,F){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var at=ks(h,T,w,F);return-1<at?(T=h[at],C||(T.fa=!1)):(T=new ae(T,this.src,K,!!w,F),T.fa=C,h.push(T)),T};function $o(h,T){var C=T.type;if(C in h.g){var w=h.g[C],F=Array.prototype.indexOf.call(w,T,void 0),K;(K=0<=F)&&Array.prototype.splice.call(w,F,1),K&&(ni(T),h.g[C].length==0&&(delete h.g[C],h.h--))}}function ks(h,T,C,w){for(var F=0;F<h.length;++F){var K=h[F];if(!K.da&&K.listener==T&&K.capture==!!C&&K.ha==w)return F}return-1}var zn="closure_lm_"+(1e6*Math.random()|0),Wo={};function Os(h,T,C,w,F){if(Array.isArray(T)){for(var K=0;K<T.length;K++)Os(h,T[K],C,w,F);return null}return C=ba(C),h&&h[Lt]?h.K(T,C,m(w)?!!w.capture:!1,F):ef(h,T,C,!1,w,F)}function ef(h,T,C,w,F,K){if(!T)throw Error("Invalid event type");var at=m(F)?!!F.capture:!!F,Xt=jr(h);if(Xt||(h[zn]=Xt=new _i(h)),C=Xt.add(T,C,w,at,K),C.proxy)return C;if(w=Da(),C.proxy=w,w.src=h,w.listener=C,h.addEventListener)pt||(F=at),F===void 0&&(F=!1),h.addEventListener(T.toString(),w,F);else if(h.attachEvent)h.attachEvent(Gs(T.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Da(){function h(C){return T.call(h.src,h.listener,C)}const T=nf;return h}function qs(h,T,C,w,F){if(Array.isArray(T))for(var K=0;K<T.length;K++)qs(h,T[K],C,w,F);else w=m(w)?!!w.capture:!!w,C=ba(C),h&&h[Lt]?(h=h.i,T=String(T).toString(),T in h.g&&(K=h.g[T],C=ks(K,C,w,F),-1<C&&(ni(K[C]),Array.prototype.splice.call(K,C,1),K.length==0&&(delete h.g[T],h.h--)))):h&&(h=jr(h))&&(T=h.g[T.toString()],h=-1,T&&(h=ks(T,C,w,F)),(C=-1<h?T[h]:null)&&Zo(C))}function Zo(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[Lt])$o(T.i,h);else{var C=h.type,w=h.proxy;T.removeEventListener?T.removeEventListener(C,w,h.capture):T.detachEvent?T.detachEvent(Gs(C),w):T.addListener&&T.removeListener&&T.removeListener(w),(C=jr(T))?($o(C,h),C.h==0&&(C.src=null,T[zn]=null)):ni(h)}}}function Gs(h){return h in Wo?Wo[h]:Wo[h]="on"+h}function nf(h,T){if(h.da)h=!0;else{T=new Et(T,this);var C=h.listener,w=h.ha||h.src;h.fa&&Zo(h),h=C.call(w,T)}return h}function jr(h){return h=h[zn],h instanceof _i?h:null}var Oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ba(h){return typeof h=="function"?h:(h[Oe]||(h[Oe]=function(T){return h.handleEvent(T)}),h[Oe])}function Ie(){W.call(this),this.i=new _i(this),this.M=this,this.F=null}x(Ie,W),Ie.prototype[Lt]=!0,Ie.prototype.removeEventListener=function(h,T,C,w){qs(this,h,T,C,w)};function De(h,T){var C,w=h.F;if(w)for(C=[];w;w=w.F)C.push(w);if(h=h.M,w=T.type||T,typeof T=="string")T=new st(T,h);else if(T instanceof st)T.target=T.target||h;else{var F=T;T=new st(w,h),P(T,F)}if(F=!0,C)for(var K=C.length-1;0<=K;K--){var at=T.g=C[K];F=vi(at,w,!0,T)&&F}if(at=T.g=h,F=vi(at,w,!0,T)&&F,F=vi(at,w,!1,T)&&F,C)for(K=0;K<C.length;K++)at=T.g=C[K],F=vi(at,w,!1,T)&&F}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var C=h.g[T],w=0;w<C.length;w++)ni(C[w]);delete h.g[T],h.h--}}this.F=null},Ie.prototype.K=function(h,T,C,w){return this.i.add(String(h),T,!1,C,w)},Ie.prototype.L=function(h,T,C,w){return this.i.add(String(h),T,!0,C,w)};function vi(h,T,C,w){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var F=!0,K=0;K<T.length;++K){var at=T[K];if(at&&!at.da&&at.capture==C){var Xt=at.listener,ve=at.ha||at.src;at.fa&&$o(h.i,at),F=Xt.call(ve,w)!==!1&&F}}return F&&!w.defaultPrevented}function xa(h,T,C){if(typeof h=="function")C&&(h=A(h,C));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(h,T||0)}function tl(h){h.g=xa(()=>{h.g=null,h.i&&(h.i=!1,tl(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class of extends W{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:tl(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jo(h){W.call(this),this.h=h,this.g={}}x(jo,W);var Zi=[];function Xe(h){rt(h.g,function(T,C){this.g.hasOwnProperty(C)&&Zo(T)},h),h.g={}}jo.prototype.N=function(){jo.aa.N.call(this),Xe(this)},jo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=d.JSON.stringify,nn=d.JSON.parse,sf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function el(){}el.prototype.h=null;function Va(h){return h.h||(h.h=h.i())}function ts(){}var ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ji(){st.call(this,"d")}x(ji,st);function Yn(){st.call(this,"c")}x(Yn,st);var Dn={},to=null;function Bs(){return to=to||new Ie}Dn.La="serverreachability";function nl(h){st.call(this,Dn.La,h)}x(nl,st);function Ti(h){const T=Bs();De(T,new nl(T))}Dn.STAT_EVENT="statevent";function eo(h,T){st.call(this,Dn.STAT_EVENT,h),this.stat=T}x(eo,st);function qe(h){const T=Bs();De(T,new eo(T,h))}Dn.Ma="timingevent";function il(h,T){st.call(this,Dn.Ma,h),this.size=T}x(il,st);function no(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},T)}function io(){this.g=!0}io.prototype.xa=function(){this.g=!1};function ol(h,T,C,w,F,K){h.info(function(){if(h.g)if(K)for(var at="",Xt=K.split("&"),ve=0;ve<Xt.length;ve++){var Dt=Xt[ve].split("=");if(1<Dt.length){var xe=Dt[0];Dt=Dt[1];var Ve=xe.split("_");at=2<=Ve.length&&Ve[1]=="type"?at+(xe+"="+Dt+"&"):at+(xe+"=redacted&")}}else at=null;else at=K;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+T+`
`+C+`
`+at})}function sl(h,T,C,w,F,K,at){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+T+`
`+C+`
`+K+" "+at})}function Ei(h,T,C,w){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+oi(h,C)+(w?" "+w:"")})}function Pa(h,T){h.info(function(){return"TIMEOUT: "+T})}io.prototype.info=function(){};function oi(h,T){if(!h.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var w=C[h];if(!(2>w.length)){var F=w[1];if(Array.isArray(F)&&!(1>F.length)){var K=F[0];if(K!="noop"&&K!="stop"&&K!="close")for(var at=1;at<F.length;at++)F[at]=""}}}}return Mn(C)}catch{return T}}var ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ge={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function oo(){}x(oo,el),oo.prototype.g=function(){return new XMLHttpRequest},oo.prototype.i=function(){return{}},si=new oo;function ri(h,T,C,w){this.j=h,this.i=T,this.l=C,this.R=w||1,this.U=new jo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ua}function Ua(){this.i=null,this.g="",this.h=!1}var rl={},Ai={};function es(h,T,C){h.L=1,h.v=os(fe(T)),h.m=C,h.P=!0,Si(h,null)}function Si(h,T){h.F=Date.now(),Jn(h),h.A=fe(h.v);var C=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Ii(C.i,"t",w),h.C=0,C=h.j.J,h.h=new Ua,h.g=Wa(h.j,C?T:null,!h.m),0<h.O&&(h.M=new of(A(h.Y,h,h.g),h.O)),T=h.U,C=h.g,w=h.ca;var F="readystatechange";Array.isArray(F)||(F&&(Zi[0]=F.toString()),F=Zi);for(var K=0;K<F.length;K++){var at=Os(C,F[K],w||T.handleEvent,!1,T.h||T);if(!at)break;T.g[at.key]=at}T=h.H?M(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Ti(),ol(h.i,h.u,h.A,h.l,h.R,h.m)}ri.prototype.ca=function(h){h=h.target;const T=this.M;T&&rn(h)==3?T.j():this.Y(h)},ri.prototype.Y=function(h){try{if(h==this.g)t:{const Ve=rn(this.g);var T=this.g.Ba();const _o=this.g.Z();if(!(3>Ve)&&(Ve!=3||this.g&&(this.h.h||this.g.oa()||ls(this.g)))){this.J||Ve!=4||T==7||(T==8||0>=_o?Ti(3):Ti(2)),Fs(this);var C=this.g.Z();this.X=C;e:if(Ci(this)){var w=ls(this.g);h="";var F=w.length,K=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),so(this);var at="";break e}this.h.i=new d.TextDecoder}for(T=0;T<F;T++)this.h.h=!0,h+=this.h.i.decode(w[T],{stream:!(K&&T==F-1)});w.length=0,this.h.g+=h,this.C=0,at=this.h.g}else at=this.g.oa();if(this.o=C==200,sl(this.i,this.u,this.A,this.l,this.R,Ve,C),this.o){if(this.T&&!this.K){e:{if(this.g){var Xt,ve=this.g;if((Xt=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nt(Xt)){var Dt=Xt;break e}}Dt=null}if(C=Dt)Ei(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,li(this,C);else{this.o=!1,this.s=3,qe(12),on(this),so(this);break t}}if(this.P){C=!0;let hn;for(;!this.J&&this.C<at.length;)if(hn=ns(this,at),hn==Ai){Ve==4&&(this.s=4,qe(14),C=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==rl){this.s=4,qe(15),Ei(this.i,this.l,at,"[Invalid Chunk]"),C=!1;break}else Ei(this.i,this.l,hn,null),li(this,hn);if(Ci(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||at.length!=0||this.h.h||(this.s=1,qe(16),C=!1),this.o=this.o&&C,!C)Ei(this.i,this.l,at,"[Invalid Chunked Response]"),on(this),so(this);else if(0<at.length&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.ba&&!xe.M&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+at.length),yl(xe),xe.M=!0,qe(11))}}else Ei(this.i,this.l,at,null),li(this,at);Ve==4&&on(this),this.o&&!this.J&&(Ve==4?Qa(this.j,this):(this.o=!1,Jn(this)))}else Fa(this.g),C==400&&0<at.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),on(this),so(this)}}}catch{}finally{}};function Ci(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ns(h,T){var C=h.C,w=T.indexOf(`
`,C);return w==-1?Ai:(C=Number(T.substring(C,w)),isNaN(C)?rl:(w+=1,w+C>T.length?Ai:(T=T.slice(w,w+C),h.C=w+C,T)))}ri.prototype.cancel=function(){this.J=!0,on(this)};function Jn(h){h.S=Date.now()+h.I,pe(h,h.I)}function pe(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=no(A(h.ba,h),T)}function Fs(h){h.B&&(d.clearTimeout(h.B),h.B=null)}ri.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Pa(this.i,this.A),this.L!=2&&(Ti(),qe(17)),on(this),this.s=2,so(this)):pe(this,this.S-h)};function so(h){h.j.G==0||h.J||Qa(h.j,h)}function on(h){Fs(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,Xe(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function li(h,T){try{var C=h.j;if(C.G!=0&&(C.g==h||ro(C.h,h))){if(!h.K&&ro(C.h,h)&&C.G==3){try{var w=C.Da.g.parse(T)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){t:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)go(C),mo(C);else break t;gl(C),qe(18)}}else C.za=F[1],0<C.za-C.T&&37500>F[2]&&C.F&&C.v==0&&!C.C&&(C.C=no(A(C.Za,C),6e3));if(1>=La(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ni(C,11)}else if((h.K||C.g==h)&&go(C),!nt(T))for(F=C.Da.g.parse(T),T=0;T<F.length;T++){let Dt=F[T];if(C.T=Dt[0],Dt=Dt[1],C.G==2)if(Dt[0]=="c"){C.K=Dt[1],C.ia=Dt[2];const xe=Dt[3];xe!=null&&(C.la=xe,C.j.info("VER="+C.la));const Ve=Dt[4];Ve!=null&&(C.Aa=Ve,C.j.info("SVER="+C.Aa));const _o=Dt[5];_o!=null&&typeof _o=="number"&&0<_o&&(w=1.5*_o,C.L=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const hn=h.g;if(hn){const cs=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cs){var K=w.h;K.g||cs.indexOf("spdy")==-1&&cs.indexOf("quic")==-1&&cs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(lo(K,K.h),K.h=null))}if(w.D){const Mi=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mi&&(w.ya=Mi,Bt(w.I,w.D,Mi))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),w=C;var at=h;if(w.qa=$a(w,w.J?w.ia:null,w.W),at.K){bn(w.h,at);var Xt=at,ve=w.L;ve&&(Xt.I=ve),Xt.B&&(Fs(Xt),Jn(Xt)),w.g=at}else Ja(w);0<C.i.length&&$s(C)}else Dt[0]!="stop"&&Dt[0]!="close"||Ni(C,7);else C.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Ni(C,7):pl(C):Dt[0]!="noop"&&C.l&&C.l.ta(Dt),C.v=0)}}Ti(4)}catch{}}var rf=class{constructor(h,T){this.g=h,this.map=T}};function ll(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function al(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function La(h){return h.h?1:h.g?h.g.size:0}function ro(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function lo(h,T){h.g?h.g.add(T):h.h=T}function bn(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}ll.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function sn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const C of h.g.values())T=T.concat(C.D);return T}return O(h.i)}function ka(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var T=[],C=h.length,w=0;w<C;w++)T.push(h[w]);return T}T=[],C=0;for(w in h)T[C++]=h[w];return T}function lf(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var T=[];h=h.length;for(var C=0;C<h;C++)T.push(C);return T}T=[],C=0;for(const w in h)T[C++]=w;return T}}}function Hs(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var C=lf(h),w=ka(h),F=w.length,K=0;K<F;K++)T.call(void 0,w[K],C&&C[K],h)}var ul=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zs(h,T){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var w=h[C].indexOf("="),F=null;if(0<=w){var K=h[C].substring(0,w);F=h[C].substring(w+1)}else K=h[C];T(K,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ri(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ri){this.h=h.h,ao(this,h.j),this.o=h.o,this.g=h.g,is(this,h.s),this.l=h.l;var T=h.i,C=new ai;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Ys(this,C),this.m=h.m}else h&&(T=String(h).match(ul))?(this.h=!1,ao(this,T[1]||"",!0),this.o=uo(T[2]||""),this.g=uo(T[3]||"",!0),is(this,T[4]),this.l=uo(T[5]||"",!0),Ys(this,T[6]||"",!0),this.m=uo(T[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}Ri.prototype.toString=function(){var h=[],T=this.j;T&&h.push(xn(T,cl,!0),":");var C=this.g;return(C||T=="file")&&(h.push("//"),(T=this.o)&&h.push(xn(T,cl,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(xn(C,C.charAt(0)=="/"?fl:Oa,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",xn(C,cf)),h.join("")};function fe(h){return new Ri(h)}function ao(h,T,C){h.j=C?uo(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function is(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Ys(h,T,C){T instanceof ai?(h.i=T,qa(h.i,h.h)):(C||(T=xn(T,uf)),h.i=new ai(T,h.h))}function Bt(h,T,C){h.i.set(T,C)}function os(h){return Bt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function uo(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function xn(h,T,C){return typeof h=="string"?(h=encodeURI(h).replace(T,af),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function af(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var cl=/[#\/\?@]/g,Oa=/[#\?:]/g,fl=/[#\?]/g,uf=/[#\?@]/g,cf=/#/g;function ai(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function be(h){h.g||(h.g=new Map,h.h=0,h.i&&zs(h.i,function(T,C){h.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=ai.prototype,n.add=function(h,T){be(this),this.i=null,h=vn(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(T),this.h+=1,this};function Js(h,T){be(h),T=vn(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function Ks(h,T){return be(h),T=vn(h,T),h.g.has(T)}n.forEach=function(h,T){be(this),this.g.forEach(function(C,w){C.forEach(function(F){h.call(T,F,w,this)},this)},this)},n.na=function(){be(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let w=0;w<T.length;w++){const F=h[w];for(let K=0;K<F.length;K++)C.push(T[w])}return C},n.V=function(h){be(this);let T=[];if(typeof h=="string")Ks(this,h)&&(T=T.concat(this.g.get(vn(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)T=T.concat(h[C])}return T},n.set=function(h,T){return be(this),this.i=null,h=vn(this,h),Ks(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},n.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function Ii(h,T,C){Js(h,T),0<C.length&&(h.i=null,h.g.set(vn(h,T),O(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var w=T[C];const K=encodeURIComponent(String(w)),at=this.V(w);for(w=0;w<at.length;w++){var F=K;at[w]!==""&&(F+="="+encodeURIComponent(String(at[w]))),h.push(F)}}return this.i=h.join("&")};function vn(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function qa(h,T){T&&!h.j&&(be(h),h.i=null,h.g.forEach(function(C,w){var F=w.toLowerCase();w!=F&&(Js(this,w),Ii(this,F,C))},h)),h.j=T}function dl(h,T){const C=new io;if(d.Image){const w=new Image;w.onload=I(dn,C,"TestLoadImage: loaded",!0,T,w),w.onerror=I(dn,C,"TestLoadImage: error",!1,T,w),w.onabort=I(dn,C,"TestLoadImage: abort",!1,T,w),w.ontimeout=I(dn,C,"TestLoadImage: timeout",!1,T,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else T(!1)}function Ga(h,T){const C=new io,w=new AbortController,F=setTimeout(()=>{w.abort(),dn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:w.signal}).then(K=>{clearTimeout(F),K.ok?dn(C,"TestPingServer: ok",!0,T):dn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(F),dn(C,"TestPingServer: error",!1,T)})}function dn(h,T,C,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(C)}catch{}}function Kn(){this.g=new sf}function hl(h,T,C){const w=C||"";try{Hs(h,function(F,K){let at=F;m(F)&&(at=Mn(F)),T.push(w+K+"="+encodeURIComponent(at))})}catch(F){throw T.push(w+"type="+encodeURIComponent("_badmap")),F}}function ui(h){this.l=h.Ub||null,this.j=h.eb||!1}x(ui,el),ui.prototype.g=function(){return new Tn(this.l,this.j)},ui.prototype.i=(function(h){return function(){return h}})({});function Tn(h,T){Ie.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Tn,Ie),n=Tn.prototype,n.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,co(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qs(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qs(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?ci(this):co(this),this.readyState==3&&Qs(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,ci(this))},n.Qa=function(h){this.g&&(this.response=h,ci(this))},n.ga=function(){this.g&&ci(this)};function ci(h){h.readyState=4,h.l=null,h.j=null,h.v=null,co(h)}n.setRequestHeader=function(h,T){this.u.append(h,T)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=T.next();return h.join(`\r
`)};function co(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ss(h){let T="";return rt(h,function(C,w){T+=w,T+=":",T+=C,T+=`\r
`}),T}function fo(h,T,C){t:{for(w in C){var w=!1;break t}w=!0}w||(C=ss(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):Bt(h,T,C))}function ie(h){Ie.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ie,Ie);var $e=/^https?$/i,wi=["POST","PUT"];n=ie.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,T,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?Va(this.o):Va(si),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(K){rs(this,K);return}if(h=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)C.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())C.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(K=>K.toLowerCase()=="content-type"),F=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(wi,T,void 0))||w||F||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,at]of C)this.g.setRequestHeader(K,at);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xs(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){rs(this,K)}};function rs(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,ho(h),po(h)}function ho(h){h.A||(h.A=!0,De(h,"complete"),De(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,De(this,"complete"),De(this,"abort"),po(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),po(this,!0)),ie.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ba(this):this.bb())},n.bb=function(){Ba(this)};function Ba(h){if(h.h&&typeof c<"u"&&(!h.v[1]||rn(h)!=4||h.Z()!=2)){if(h.u&&rn(h)==4)xa(h.Ea,0,h);else if(De(h,"readystatechange"),rn(h)==4){h.h=!1;try{const at=h.Z();t:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break t;default:T=!1}var C;if(!(C=T)){var w;if(w=at===0){var F=String(h.D).match(ul)[1]||null;!F&&d.self&&d.self.location&&(F=d.self.location.protocol.slice(0,-1)),w=!$e.test(F?F.toLowerCase():"")}C=w}if(C)De(h,"complete"),De(h,"success");else{h.m=6;try{var K=2<rn(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",ho(h)}}finally{po(h)}}}}function po(h,T){if(h.g){Xs(h);const C=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||De(h,"ready");try{C.onreadystatechange=w}catch{}}}function Xs(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function rn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),nn(T)}};function ls(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fa(h){const T={};h=(h.g&&2<=rn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(nt(h[w]))continue;var C=L(h[w]);const F=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const K=T[F]||[];T[F]=K,K.push(C)}D(T,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(h,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||T}function Ha(h){this.Aa=0,this.i=[],this.j=new io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=as("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=as("baseRetryDelayMs",5e3,h),this.cb=as("retryDelaySeedMs",1e4,h),this.Wa=as("forwardChannelMaxRetries",2,h),this.wa=as("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ll(h&&h.concurrentRequestLimit),this.Da=new Kn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ha.prototype,n.la=8,n.G=1,n.connect=function(h,T,C,w){qe(0),this.W=h,this.H=T||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.I=$a(this,null,this.W),$s(this)};function pl(h){if(za(h),h.G==3){var T=h.U++,C=fe(h.I);if(Bt(C,"SID",h.K),Bt(C,"RID",T),Bt(C,"TYPE","terminate"),us(h,C),T=new ri(h,h.j,T),T.L=2,T.v=os(fe(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=Wa(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Jn(T)}_l(h)}function mo(h){h.g&&(yl(h),h.g.cancel(),h.g=null)}function za(h){mo(h),h.u&&(d.clearTimeout(h.u),h.u=null),go(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function $s(h){if(!al(h.h)&&!h.s){h.s=!0;var T=h.Ga;lt||Qt(),_t||(lt(),_t=!0),Gt.add(T,h),h.B=0}}function ff(h,T){return La(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=no(A(h.Ga,h,T),Xa(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const F=new ri(this,this.j,h);let K=this.o;if(this.S&&(K?(K=M(K),P(K,this.S)):K=this.S),this.m!==null||this.O||(F.H=K,K=null),this.P)t:{for(var T=0,C=0;C<this.i.length;C++){e:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(T+=w,4096<T){T=C;break t}if(T===4096||C===this.i.length-1){T=C+1;break t}}T=1e3}else T=1e3;T=ml(this,F,T),C=fe(this.I),Bt(C,"RID",h),Bt(C,"CVER",22),this.D&&Bt(C,"X-HTTP-Session-Id",this.D),us(this,C),K&&(this.O?T="headers="+encodeURIComponent(String(ss(K)))+"&"+T:this.m&&fo(C,this.m,K)),lo(this.h,F),this.Ua&&Bt(C,"TYPE","init"),this.P?(Bt(C,"$req",T),Bt(C,"SID","null"),F.T=!0,es(F,C,null)):es(F,C,T),this.G=2}}else this.G==3&&(h?Ya(this,h):this.i.length==0||al(this.h)||Ya(this))};function Ya(h,T){var C;T?C=T.l:C=h.U++;const w=fe(h.I);Bt(w,"SID",h.K),Bt(w,"RID",C),Bt(w,"AID",h.T),us(h,w),h.m&&h.o&&fo(w,h.m,h.o),C=new ri(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),T&&(h.i=T.D.concat(h.i)),T=ml(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),lo(h.h,C),es(C,w,T)}function us(h,T){h.H&&rt(h.H,function(C,w){Bt(T,w,C)}),h.l&&Hs({},function(C,w){Bt(T,w,C)})}function ml(h,T,C){C=Math.min(h.i.length,C);var w=h.l?A(h.l.Na,h.l,h):null;t:{var F=h.i;let K=-1;for(;;){const at=["count="+C];K==-1?0<C?(K=F[0].g,at.push("ofs="+K)):K=0:at.push("ofs="+K);let Xt=!0;for(let ve=0;ve<C;ve++){let Dt=F[ve].g;const xe=F[ve].map;if(Dt-=K,0>Dt)K=Math.max(0,F[ve].g-100),Xt=!1;else try{hl(xe,at,"req"+Dt+"_")}catch{w&&w(xe)}}if(Xt){w=at.join("&");break t}}}return h=h.i.splice(0,C),T.D=h,w}function Ja(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;lt||Qt(),_t||(lt(),_t=!0),Gt.add(T,h),h.v=0}}function gl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=no(A(h.Fa,h),Xa(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Ka(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=no(A(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),mo(this),Ka(this))};function yl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Ka(h){h.g=new ri(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=fe(h.qa);Bt(T,"RID","rpc"),Bt(T,"SID",h.K),Bt(T,"AID",h.T),Bt(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&Bt(T,"TO",h.ja),Bt(T,"TYPE","xmlhttp"),us(h,T),h.m&&h.o&&fo(T,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=os(fe(T)),C.m=null,C.P=!0,Si(C,h)}n.Za=function(){this.C!=null&&(this.C=null,mo(this),gl(this),qe(19))};function go(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Qa(h,T){var C=null;if(h.g==T){go(h),yl(h),h.g=null;var w=2}else if(ro(h.h,T))C=T.D,bn(h.h,T),w=1;else return;if(h.G!=0){if(T.o)if(w==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var F=h.B;w=Bs(),De(w,new il(w,C)),$s(h)}else Ja(h);else if(F=T.s,F==3||F==0&&0<T.X||!(w==1&&ff(h,T)||w==2&&gl(h)))switch(C&&0<C.length&&(T=h.h,T.i=T.i.concat(C)),F){case 1:Ni(h,5);break;case 4:Ni(h,10);break;case 3:Ni(h,6);break;default:Ni(h,2)}}}function Xa(h,T){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*T}function Ni(h,T){if(h.j.info("Error code "+T),T==2){var C=A(h.fb,h),w=h.Xa;const F=!w;w=new Ri(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ao(w,"https"),os(w),F?dl(w.toString(),C):Ga(w.toString(),C)}else qe(2);h.G=0,h.l&&h.l.sa(T),_l(h),za(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function _l(h){if(h.G=0,h.ka=[],h.l){const T=sn(h.h);(T.length!=0||h.i.length!=0)&&(U(h.ka,T),U(h.ka,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.ra()}}function $a(h,T,C){var w=C instanceof Ri?fe(C):new Ri(C);if(w.g!="")T&&(w.g=T+"."+w.g),is(w,w.s);else{var F=d.location;w=F.protocol,T=T?T+"."+F.hostname:F.hostname,F=+F.port;var K=new Ri(null);w&&ao(K,w),T&&(K.g=T),F&&is(K,F),C&&(K.l=C),w=K}return C=h.D,T=h.ya,C&&T&&Bt(w,C,T),Bt(w,"VER",h.la),us(h,w),w}function Wa(h,T,C){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new ie(new ui({eb:C})):new ie(h.pa),T.Ha(h.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Za(){}n=Za.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ws(){}Ws.prototype.g=function(h,T){return new ln(h,T)};function ln(h,T){Ie.call(this),this.g=new Ha(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!nt(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!nt(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new yo(this)}x(ln,Ie),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){pl(this.g)},ln.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Mn(h),h=C);T.i.push(new rf(T.Ya++,h)),T.G==3&&$s(T)},ln.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,ln.aa.N.call(this)};function ja(h){ji.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){t:{for(const C in T){h=C;break t}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}x(ja,ji);function tu(){Yn.call(this),this.status=1}x(tu,Yn);function yo(h){this.g=h}x(yo,Za),yo.prototype.ua=function(){De(this.g,"a")},yo.prototype.ta=function(h){De(this.g,new ja(h))},yo.prototype.sa=function(h){De(this.g,new tu)},yo.prototype.ra=function(){De(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,u0=function(){return new Ws},a0=function(){return Bs()},l0=Dn,Bh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,gc=ce,Ge.COMPLETE="complete",r0=Ge,ts.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,ra=ts,ie.prototype.listenOnce=ie.prototype.L,ie.prototype.getLastError=ie.prototype.Ka,ie.prototype.getLastErrorCode=ie.prototype.Ba,ie.prototype.getStatus=ie.prototype.Z,ie.prototype.getResponseJson=ie.prototype.Oa,ie.prototype.getResponseText=ie.prototype.oa,ie.prototype.send=ie.prototype.ea,ie.prototype.setWithCredentials=ie.prototype.Ha,s0=ie}).apply(typeof uc<"u"?uc:typeof self<"u"?self:typeof window<"u"?window:{});const dT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid"),je.MOCK_USER=new je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qr="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new WE("@firebase/firestore");function oa(){return Ds.logLevel}function mt(n,...t){if(Ds.logLevel<=qt.DEBUG){const e=t.map(mp);Ds.debug(`Firestore (${Qr}): ${n}`,...e)}}function Qi(n,...t){if(Ds.logLevel<=qt.ERROR){const e=t.map(mp);Ds.error(`Firestore (${Qr}): ${n}`,...e)}}function kr(n,...t){if(Ds.logLevel<=qt.WARN){const e=t.map(mp);Ds.warn(`Firestore (${Qr}): ${n}`,...e)}}function mp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n="Unexpected state"){const t=`FIRESTORE (${Qr}) INTERNAL ASSERTION FAILED: `+n;throw Qi(t),new Error(t)}function Zt(n,t){n||At()}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Kr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(je.UNAUTHENTICATED)))}shutdown(){}}class jx{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class t1{constructor(t){this.t=t,this.currentUser=je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Zt(this.o===void 0);let o=this.i;const r=y=>this.i!==o?(o=this.i,e(y)):Promise.resolve();let a=new zo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new zo,t.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=a;t.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},d=y=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>d(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?d(y):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zo)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((o=>this.i!==t?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Zt(typeof o.accessToken=="string"),new c0(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string"),new je(t)}}class e1{constructor(t,e,o){this.l=t,this.h=e,this.P=o,this.type="FirstParty",this.user=je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class n1{constructor(t,e,o){this.l=t,this.h=e,this.P=o}getToken(){return Promise.resolve(new e1(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(je.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class i1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o1{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){Zt(this.o===void 0);const o=a=>{a.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,mt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable((()=>o(a)))};const r=a=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Zt(typeof e.token=="string"),this.R=e.token,new i1(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let o=0;o<n;o++)e[o]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let o="";for(;o.length<20;){const r=s1(40);for(let a=0;a<r.length;++a)o.length<20&&r[a]<e&&(o+=t.charAt(r[a]%t.length))}return o}}function zt(n,t){return n<t?-1:n>t?1:0}function Or(n,t,e){return n.length===t.length&&n.every(((o,r)=>e(o,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ht(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ht(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ht(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Me.fromMillis(Date.now())}static fromDate(t){return Me.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*e));return new Me(e,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Rt(t)}static min(){return new Rt(new Me(0,0))}static max(){return new Rt(new Me(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,e,o){e===void 0?e=0:e>t.length&&At(),o===void 0?o=t.length-e:o>t.length-e&&At(),this.segments=t,this.offset=e,this.len=o}get length(){return this.len}isEqual(t){return ga.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ga?t.forEach((o=>{e.push(o)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,o=this.limit();e<o;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const o=Math.min(t.length,e.length);for(let r=0;r<o;r++){const a=t.get(r),c=e.get(r);if(a<c)return-1;if(a>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class re extends ga{construct(t,e,o){return new re(t,e,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const o of t){if(o.indexOf("//")>=0)throw new ht(et.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);e.push(...o.split("/").filter((r=>r.length>0)))}return new re(e)}static emptyPath(){return new re([])}}const r1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends ga{construct(t,e,o){return new Je(t,e,o)}static isValidIdentifier(t){return r1.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Je(["__name__"])}static fromServerFormat(t){const e=[];let o="",r=0;const a=()=>{if(o.length===0)throw new ht(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(o),o=""};let c=!1;for(;r<t.length;){const d=t[r];if(d==="\\"){if(r+1===t.length)throw new ht(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ht(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=y,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(o+=d,r++):(a(),r++)}if(a(),c)throw new ht(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Je(e)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.path=t}static fromPath(t){return new vt(re.fromString(t))}static fromName(t){return new vt(re.fromString(t).popFirst(5))}static empty(){return new vt(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return re.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vt(new re(t.slice()))}}function l1(n,t){const e=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,r=Rt.fromTimestamp(o===1e9?new Me(e+1,0):new Me(e,o));return new Jo(r,vt.empty(),t)}function a1(n){return new Jo(n.readTime,n.key,-1)}class Jo{constructor(t,e,o){this.readTime=t,this.documentKey=e,this.largestBatchId=o}static min(){return new Jo(Rt.min(),vt.empty(),-1)}static max(){return new Jo(Rt.max(),vt.empty(),-1)}}function u1(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=vt.comparator(n.documentKey,t.documentKey),e!==0?e:zt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==c1)throw n;mt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ot(((o,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(o,r)},this.catchCallback=a=>{this.wrapFailure(e,a).next(o,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ot?e:ot.resolve(e)}catch(e){return ot.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ot.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ot.reject(e)}static resolve(t){return new ot(((e,o)=>{e(t)}))}static reject(t){return new ot(((e,o)=>{o(t)}))}static waitFor(t){return new ot(((e,o)=>{let r=0,a=0,c=!1;t.forEach((d=>{++r,d.next((()=>{++a,c&&a===r&&e()}),(y=>o(y)))})),c=!0,a===r&&e()}))}static or(t){let e=ot.resolve(!1);for(const o of t)e=e.next((r=>r?ot.resolve(r):o()));return e}static forEach(t,e){const o=[];return t.forEach(((r,a)=>{o.push(e.call(this,r,a))})),this.waitFor(o)}static mapArray(t,e){return new ot(((o,r)=>{const a=t.length,c=new Array(a);let d=0;for(let y=0;y<a;y++){const m=y;e(t[m]).next((v=>{c[m]=v,++d,d===a&&o(c)}),(v=>r(v)))}}))}static doWhile(t,e){return new ot(((o,r)=>{const a=()=>{t()===!0?e().next((()=>{a()}),r):o()};a()}))}}function d1(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ra(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=o=>this.ie(o),this.se=o=>e.writeSequenceNumber(o))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}gp.oe=-1;function zc(n){return n==null}function Mc(n){return n===0&&1/n==-1/0}function h1(n){return typeof n=="number"&&Number.isInteger(n)&&!Mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Xr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function d0(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,e){this.comparator=t,this.root=e||Ye.EMPTY}insert(t,e){return new ue(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const o=this.comparator(t,e.key);if(o===0)return e.value;o<0?e=e.left:o>0&&(e=e.right)}return null}indexOf(t){let e=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(t,o.key);if(r===0)return e+o.left.size;r<0?o=o.left:(e+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,o)=>(t(e,o),!1)))}toString(){const t=[];return this.inorderTraversal(((e,o)=>(t.push(`${e}:${o}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new cc(this.root,t,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new cc(this.root,t,this.comparator,!0)}}class cc{constructor(t,e,o,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?o(t.key,e):1,e&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ye{constructor(t,e,o,r,a){this.key=t,this.value=e,this.color=o??Ye.RED,this.left=r??Ye.EMPTY,this.right=a??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,o,r,a){return new Ye(t??this.key,e??this.value,o??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,o){let r=this;const a=o(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,e,o),null):a===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let o,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Ye.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const t=this.left.check();if(t!==this.right.check())throw At();return t+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(t,e,o,r,a){return this}insert(t,e,o){return new Ye(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,o)=>(t(e),!1)))}forEachInRange(t,e){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let o;for(o=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pT(this.data.getIterator())}getIteratorFrom(t){return new pT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((o=>{e=e.add(o)})),e}isEqual(t){if(!(t instanceof Ke)||this.size!==t.size)return!1;const e=this.data.getIterator(),o=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,a=o.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ke(this.comparator);return e.data=t,e}}class pT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t){this.fields=t,t.sort(Je.comparator)}static empty(){return new Wn([])}unionWith(t){let e=new Ke(Je.comparator);for(const o of this.fields)e=e.add(o);for(const o of t)e=e.add(o);return new Wn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Or(this.fields,t.fields,((e,o)=>e.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new h0("Invalid base64 string: "+a):a}})(t);return new Qe(e)}static fromUint8Array(t){const e=(function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a})(t);return new Qe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const o=new Uint8Array(e.length);for(let r=0;r<e.length;r++)o[r]=e.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const p1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(n){if(Zt(!!n),typeof n=="string"){let t=0;const e=p1.exec(n);if(Zt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:ye(n.seconds),nanos:ye(n.nanos)}}function ye(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bs(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function _p(n){const t=n.mapValue.fields.__previous_value__;return yp(t)?_p(t):t}function ya(n){const t=Ko(n.mapValue.fields.__local_write_time__.timestampValue);return new Me(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(t,e,o,r,a,c,d,y,m){this.databaseId=t,this.appId=e,this.persistenceKey=o,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=y,this.useFetchStreams=m}}class _a{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof _a&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc={mapValue:{}};function xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yp(n)?4:y1(n)?9007199254740991:g1(n)?10:11:At()}function yi(n,t){if(n===t)return!0;const e=xs(n);if(e!==xs(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ya(n).isEqual(ya(t));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Ko(r.timestampValue),d=Ko(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(r,a){return bs(r.bytesValue).isEqual(bs(a.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(r,a){return ye(r.geoPointValue.latitude)===ye(a.geoPointValue.latitude)&&ye(r.geoPointValue.longitude)===ye(a.geoPointValue.longitude)})(n,t);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return ye(r.integerValue)===ye(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=ye(r.doubleValue),d=ye(a.doubleValue);return c===d?Mc(c)===Mc(d):isNaN(c)&&isNaN(d)}return!1})(n,t);case 9:return Or(n.arrayValue.values||[],t.arrayValue.values||[],yi);case 10:case 11:return(function(r,a){const c=r.mapValue.fields||{},d=a.mapValue.fields||{};if(hT(c)!==hT(d))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(d[y]===void 0||!yi(c[y],d[y])))return!1;return!0})(n,t);default:return At()}}function va(n,t){return(n.values||[]).find((e=>yi(e,t)))!==void 0}function qr(n,t){if(n===t)return 0;const e=xs(n),o=xs(t);if(e!==o)return zt(e,o);switch(e){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,t.booleanValue);case 2:return(function(a,c){const d=ye(a.integerValue||a.doubleValue),y=ye(c.integerValue||c.doubleValue);return d<y?-1:d>y?1:d===y?0:isNaN(d)?isNaN(y)?0:-1:1})(n,t);case 3:return mT(n.timestampValue,t.timestampValue);case 4:return mT(ya(n),ya(t));case 5:return zt(n.stringValue,t.stringValue);case 6:return(function(a,c){const d=bs(a),y=bs(c);return d.compareTo(y)})(n.bytesValue,t.bytesValue);case 7:return(function(a,c){const d=a.split("/"),y=c.split("/");for(let m=0;m<d.length&&m<y.length;m++){const v=zt(d[m],y[m]);if(v!==0)return v}return zt(d.length,y.length)})(n.referenceValue,t.referenceValue);case 8:return(function(a,c){const d=zt(ye(a.latitude),ye(c.latitude));return d!==0?d:zt(ye(a.longitude),ye(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return gT(n.arrayValue,t.arrayValue);case 10:return(function(a,c){var d,y,m,v;const E=a.fields||{},A=c.fields||{},I=(d=E.value)===null||d===void 0?void 0:d.arrayValue,x=(y=A.value)===null||y===void 0?void 0:y.arrayValue,O=zt(((m=I?.values)===null||m===void 0?void 0:m.length)||0,((v=x?.values)===null||v===void 0?void 0:v.length)||0);return O!==0?O:gT(I,x)})(n.mapValue,t.mapValue);case 11:return(function(a,c){if(a===fc.mapValue&&c===fc.mapValue)return 0;if(a===fc.mapValue)return 1;if(c===fc.mapValue)return-1;const d=a.fields||{},y=Object.keys(d),m=c.fields||{},v=Object.keys(m);y.sort(),v.sort();for(let E=0;E<y.length&&E<v.length;++E){const A=zt(y[E],v[E]);if(A!==0)return A;const I=qr(d[y[E]],m[v[E]]);if(I!==0)return I}return zt(y.length,v.length)})(n.mapValue,t.mapValue);default:throw At()}}function mT(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return zt(n,t);const e=Ko(n),o=Ko(t),r=zt(e.seconds,o.seconds);return r!==0?r:zt(e.nanos,o.nanos)}function gT(n,t){const e=n.values||[],o=t.values||[];for(let r=0;r<e.length&&r<o.length;++r){const a=qr(e[r],o[r]);if(a)return a}return zt(e.length,o.length)}function Gr(n){return Fh(n)}function Fh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const o=Ko(e);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return bs(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return vt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let o="[",r=!0;for(const a of e.values||[])r?r=!1:o+=",",o+=Fh(a);return o+"]"})(n.arrayValue):"mapValue"in n?(function(e){const o=Object.keys(e.fields||{}).sort();let r="{",a=!0;for(const c of o)a?a=!1:r+=",",r+=`${c}:${Fh(e.fields[c])}`;return r+"}"})(n.mapValue):At()}function yT(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Hh(n){return!!n&&"integerValue"in n}function vp(n){return!!n&&"arrayValue"in n}function _T(n){return!!n&&"nullValue"in n}function vT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yc(n){return!!n&&"mapValue"in n}function g1(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function ua(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Xr(n.mapValue.fields,((e,o)=>t.mapValue.fields[e]=ua(o))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ua(n.arrayValue.values[e]);return t}return Object.assign({},n)}function y1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.value=t}static empty(){return new Bn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let o=0;o<t.length-1;++o)if(e=(e.mapValue.fields||{})[t.get(o)],!yc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ua(e)}setAll(t){let e=Je.emptyPath(),o={},r=[];t.forEach(((c,d)=>{if(!e.isImmediateParentOf(d)){const y=this.getFieldsMap(e);this.applyChanges(y,o,r),o={},r=[],e=d.popLast()}c?o[d.lastSegment()]=ua(c):r.push(d.lastSegment())}));const a=this.getFieldsMap(e);this.applyChanges(a,o,r)}delete(t){const e=this.field(t.popLast());yc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return yi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let o=0;o<t.length;++o){let r=e.mapValue.fields[t.get(o)];yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(o)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,o){Xr(e,((r,a)=>t[r]=a));for(const r of o)delete t[r]}clone(){return new Bn(ua(this.value))}}function p0(n){const t=[];return Xr(n.fields,((e,o)=>{const r=new Je([e]);if(yc(o)){const a=p0(o.mapValue).fields;if(a.length===0)t.push(r);else for(const c of a)t.push(r.child(c))}else t.push(r)})),new Wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,e,o,r,a,c,d){this.key=t,this.documentType=e,this.version=o,this.readTime=r,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(t){return new tn(t,0,Rt.min(),Rt.min(),Rt.min(),Bn.empty(),0)}static newFoundDocument(t,e,o,r){return new tn(t,1,e,Rt.min(),o,r,0)}static newNoDocument(t,e){return new tn(t,2,e,Rt.min(),Rt.min(),Bn.empty(),0)}static newUnknownDocument(t,e){return new tn(t,3,e,Rt.min(),Rt.min(),Bn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,e){this.position=t,this.inclusive=e}}function TT(n,t,e){let o=0;for(let r=0;r<n.position.length;r++){const a=t[r],c=n.position[r];if(a.field.isKeyField()?o=vt.comparator(vt.fromName(c.referenceValue),e.key):o=qr(c,e.data.field(a.field)),a.dir==="desc"&&(o*=-1),o!==0)break}return o}function ET(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!yi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t,e="asc"){this.field=t,this.dir=e}}function _1(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{}class Re extends m0{constructor(t,e,o){super(),this.field=t,this.op=e,this.value=o}static create(t,e,o){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,o):new T1(t,e,o):e==="array-contains"?new S1(t,o):e==="in"?new C1(t,o):e==="not-in"?new R1(t,o):e==="array-contains-any"?new I1(t,o):new Re(t,e,o)}static createKeyFieldInFilter(t,e,o){return e==="in"?new E1(t,o):new A1(t,o)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(qr(e,this.value)):e!==null&&xs(this.value)===xs(e)&&this.matchesComparison(qr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends m0{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new ti(t,e)}matches(t){return g0(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function g0(n){return n.op==="and"}function y0(n){return v1(n)&&g0(n)}function v1(n){for(const t of n.filters)if(t instanceof ti)return!1;return!0}function zh(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+Gr(n.value);if(y0(n))return n.filters.map((t=>zh(t))).join(",");{const t=n.filters.map((e=>zh(e))).join(",");return`${n.op}(${t})`}}function _0(n,t){return n instanceof Re?(function(o,r){return r instanceof Re&&o.op===r.op&&o.field.isEqual(r.field)&&yi(o.value,r.value)})(n,t):n instanceof ti?(function(o,r){return r instanceof ti&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((a,c,d)=>a&&_0(c,r.filters[d])),!0):!1})(n,t):void At()}function v0(n){return n instanceof Re?(function(e){return`${e.field.canonicalString()} ${e.op} ${Gr(e.value)}`})(n):n instanceof ti?(function(e){return e.op.toString()+" {"+e.getFilters().map(v0).join(" ,")+"}"})(n):"Filter"}class T1 extends Re{constructor(t,e,o){super(t,e,o),this.key=vt.fromName(o.referenceValue)}matches(t){const e=vt.comparator(t.key,this.key);return this.matchesComparison(e)}}class E1 extends Re{constructor(t,e){super(t,"in",e),this.keys=T0("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class A1 extends Re{constructor(t,e){super(t,"not-in",e),this.keys=T0("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function T0(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map((o=>vt.fromName(o.referenceValue)))}class S1 extends Re{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return vp(e)&&va(e.arrayValue,this.value)}}class C1 extends Re{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&va(this.value.arrayValue,e)}}class R1 extends Re{constructor(t,e){super(t,"not-in",e)}matches(t){if(va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!va(this.value.arrayValue,e)}}class I1 extends Re{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!vp(e)||!e.arrayValue.values)&&e.arrayValue.values.some((o=>va(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t,e=null,o=[],r=[],a=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=o,this.filters=r,this.limit=a,this.startAt=c,this.endAt=d,this.ue=null}}function AT(n,t=null,e=[],o=[],r=null,a=null,c=null){return new w1(n,t,e,o,r,a,c)}function Tp(n){const t=It(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((o=>zh(o))).join(","),e+="|ob:",e+=t.orderBy.map((o=>(function(a){return a.field.canonicalString()+a.dir})(o))).join(","),zc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((o=>Gr(o))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((o=>Gr(o))).join(",")),t.ue=e}return t.ue}function Ep(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!_1(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!_0(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!ET(n.startAt,t.startAt)&&ET(n.endAt,t.endAt)}function Yh(n){return vt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t,e=null,o=[],r=[],a=null,c="F",d=null,y=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=o,this.filters=r,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function N1(n,t,e,o,r,a,c,d){return new $r(n,t,e,o,r,a,c,d)}function E0(n){return new $r(n)}function ST(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function A0(n){return n.collectionGroup!==null}function ca(n){const t=It(n);if(t.ce===null){t.ce=[];const e=new Set;for(const a of t.explicitOrderBy)t.ce.push(a),e.add(a.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ke(Je.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(t).forEach((a=>{e.has(a.canonicalString())||a.isKeyField()||t.ce.push(new Ta(a,o))})),e.has(Je.keyField().canonicalString())||t.ce.push(new Ta(Je.keyField(),o))}return t.ce}function mi(n){const t=It(n);return t.le||(t.le=M1(t,ca(n))),t.le}function M1(n,t){if(n.limitType==="F")return AT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Ta(r.field,a)}));const e=n.endAt?new Dc(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Dc(n.startAt.position,n.startAt.inclusive):null;return AT(n.path,n.collectionGroup,t,n.filters,n.limit,e,o)}}function Jh(n,t){const e=n.filters.concat([t]);return new $r(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Kh(n,t,e){return new $r(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Yc(n,t){return Ep(mi(n),mi(t))&&n.limitType===t.limitType}function S0(n){return`${Tp(mi(n))}|lt:${n.limitType}`}function wr(n){return`Query(target=${(function(e){let o=e.path.canonicalString();return e.collectionGroup!==null&&(o+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(o+=`, filters: [${e.filters.map((r=>v0(r))).join(", ")}]`),zc(e.limit)||(o+=", limit: "+e.limit),e.orderBy.length>0&&(o+=`, orderBy: [${e.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),e.startAt&&(o+=", startAt: ",o+=e.startAt.inclusive?"b:":"a:",o+=e.startAt.position.map((r=>Gr(r))).join(",")),e.endAt&&(o+=", endAt: ",o+=e.endAt.inclusive?"a:":"b:",o+=e.endAt.position.map((r=>Gr(r))).join(",")),`Target(${o})`})(mi(n))}; limitType=${n.limitType})`}function Jc(n,t){return t.isFoundDocument()&&(function(o,r){const a=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(a):vt.isDocumentKey(o.path)?o.path.isEqual(a):o.path.isImmediateParentOf(a)})(n,t)&&(function(o,r){for(const a of ca(o))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,t)&&(function(o,r){for(const a of o.filters)if(!a.matches(r))return!1;return!0})(n,t)&&(function(o,r){return!(o.startAt&&!(function(c,d,y){const m=TT(c,d,y);return c.inclusive?m<=0:m<0})(o.startAt,ca(o),r)||o.endAt&&!(function(c,d,y){const m=TT(c,d,y);return c.inclusive?m>=0:m>0})(o.endAt,ca(o),r))})(n,t)}function D1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function C0(n){return(t,e)=>{let o=!1;for(const r of ca(n)){const a=b1(r,t,e);if(a!==0)return a;o=o||r.field.isKeyField()}return 0}}function b1(n,t,e){const o=n.field.isKeyField()?vt.comparator(t.key,e.key):(function(a,c,d){const y=c.data.field(a),m=d.data.field(a);return y!==null&&m!==null?qr(y,m):At()})(n.field,t,e);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return At()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),o=this.inner[e];if(o!==void 0){for(const[r,a]of o)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const o=this.mapKeyFn(t),r=this.inner[o];if(r===void 0)return this.inner[o]=[[t,e]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),o=this.inner[e];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],t))return o.length===1?delete this.inner[e]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Xr(this.inner,((e,o)=>{for(const[r,a]of o)t(r,a)}))}isEmpty(){return d0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new ue(vt.comparator);function Xi(){return x1}const R0=new ue(vt.comparator);function la(...n){let t=R0;for(const e of n)t=t.insert(e.key,e);return t}function I0(n){let t=R0;return n.forEach(((e,o)=>t=t.insert(e,o.overlayedDocument))),t}function Ns(){return fa()}function w0(){return fa()}function fa(){return new Wr((n=>n.toString()),((n,t)=>n.isEqual(t)))}const V1=new ue(vt.comparator),P1=new Ke(vt.comparator);function Ut(...n){let t=P1;for(const e of n)t=t.add(e);return t}const U1=new Ke(zt);function L1(){return U1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(t)?"-0":t}}function N0(n){return{integerValue:""+n}}function k1(n,t){return h1(t)?N0(t):Ap(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this._=void 0}}function O1(n,t,e){return n instanceof bc?(function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&yp(a)&&(a=_p(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}})(e,t):n instanceof Ea?D0(n,t):n instanceof Aa?b0(n,t):(function(r,a){const c=M0(r,a),d=CT(c)+CT(r.Pe);return Hh(c)&&Hh(r.Pe)?N0(d):Ap(r.serializer,d)})(n,t)}function q1(n,t,e){return n instanceof Ea?D0(n,t):n instanceof Aa?b0(n,t):e}function M0(n,t){return n instanceof xc?(function(o){return Hh(o)||(function(a){return!!a&&"doubleValue"in a})(o)})(t)?t:{integerValue:0}:null}class bc extends Kc{}class Ea extends Kc{constructor(t){super(),this.elements=t}}function D0(n,t){const e=x0(t);for(const o of n.elements)e.some((r=>yi(r,o)))||e.push(o);return{arrayValue:{values:e}}}class Aa extends Kc{constructor(t){super(),this.elements=t}}function b0(n,t){let e=x0(t);for(const o of n.elements)e=e.filter((r=>!yi(r,o)));return{arrayValue:{values:e}}}class xc extends Kc{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function CT(n){return ye(n.integerValue||n.doubleValue)}function x0(n){return vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function G1(n,t){return n.field.isEqual(t.field)&&(function(o,r){return o instanceof Ea&&r instanceof Ea||o instanceof Aa&&r instanceof Aa?Or(o.elements,r.elements,yi):o instanceof xc&&r instanceof xc?yi(o.Pe,r.Pe):o instanceof bc&&r instanceof bc})(n.transform,t.transform)}class B1{constructor(t,e){this.version=t,this.transformResults=e}}class Yi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Yi}static exists(t){return new Yi(void 0,t)}static updateTime(t){return new Yi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _c(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Qc{}function V0(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new U0(n.key,Yi.none()):new Ia(n.key,n.data,Yi.none());{const e=n.data,o=Bn.empty();let r=new Ke(Je.comparator);for(let a of t.fields)if(!r.has(a)){let c=e.field(a);c===null&&a.length>1&&(a=a.popLast(),c=e.field(a)),c===null?o.delete(a):o.set(a,c),r=r.add(a)}return new Ps(n.key,o,new Wn(r.toArray()),Yi.none())}}function F1(n,t,e){n instanceof Ia?(function(r,a,c){const d=r.value.clone(),y=IT(r.fieldTransforms,a,c.transformResults);d.setAll(y),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,t,e):n instanceof Ps?(function(r,a,c){if(!_c(r.precondition,a))return void a.convertToUnknownDocument(c.version);const d=IT(r.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(P0(r)),y.setAll(d),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,t,e):(function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function da(n,t,e,o){return n instanceof Ia?(function(a,c,d,y){if(!_c(a.precondition,c))return d;const m=a.value.clone(),v=wT(a.fieldTransforms,y,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,t,e,o):n instanceof Ps?(function(a,c,d,y){if(!_c(a.precondition,c))return d;const m=wT(a.fieldTransforms,y,c),v=c.data;return v.setAll(P0(a)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,t,e,o):(function(a,c,d){return _c(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,t,e)}function H1(n,t){let e=null;for(const o of n.fieldTransforms){const r=t.data.field(o.field),a=M0(o.transform,r||null);a!=null&&(e===null&&(e=Bn.empty()),e.set(o.field,a))}return e||null}function RT(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&Or(o,r,((a,c)=>G1(a,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Ia extends Qc{constructor(t,e,o,r=[]){super(),this.key=t,this.value=e,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ps extends Qc{constructor(t,e,o,r,a=[]){super(),this.key=t,this.data=e,this.fieldMask=o,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function P0(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const o=n.data.field(e);t.set(e,o)}})),t}function IT(n,t,e){const o=new Map;Zt(n.length===e.length);for(let r=0;r<e.length;r++){const a=n[r],c=a.transform,d=t.data.field(a.field);o.set(a.field,q1(c,d,e[r]))}return o}function wT(n,t,e){const o=new Map;for(const r of n){const a=r.transform,c=e.data.field(r.field);o.set(r.field,O1(a,c,t))}return o}class U0 extends Qc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z1 extends Qc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(t,e,o,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(t,e){const o=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&F1(a,t,o[r])}}applyToLocalView(t,e){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(e=da(o,t,e,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(e=da(o,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const o=w0();return this.mutations.forEach((r=>{const a=t.get(r.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=e.has(r.key)?null:d;const y=V0(c,d);y!==null&&o.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Rt.min())})),o}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ut())}isEqual(t){return this.batchId===t.batchId&&Or(this.mutations,t.mutations,((e,o)=>RT(e,o)))&&Or(this.baseMutations,t.baseMutations,((e,o)=>RT(e,o)))}}class Sp{constructor(t,e,o,r){this.batch=t,this.commitVersion=e,this.mutationResults=o,this.docVersions=r}static from(t,e,o){Zt(t.mutations.length===o.length);let r=(function(){return V1})();const a=t.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,o[c].version);return new Sp(t,e,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce,Ot;function Q1(n){switch(n){default:return At();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function L0(n){if(n===void 0)return Qi("GRPC error has no .code"),et.UNKNOWN;switch(n){case Ce.OK:return et.OK;case Ce.CANCELLED:return et.CANCELLED;case Ce.UNKNOWN:return et.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return et.INTERNAL;case Ce.UNAVAILABLE:return et.UNAVAILABLE;case Ce.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Ce.NOT_FOUND:return et.NOT_FOUND;case Ce.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Ce.ABORTED:return et.ABORTED;case Ce.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Ce.DATA_LOSS:return et.DATA_LOSS;default:return At()}}(Ot=Ce||(Ce={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=new Ms([4294967295,4294967295],0);function NT(n){const t=X1().encode(n),e=new o0;return e.update(t),new Uint8Array(e.digest())}function MT(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),o=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Ms([e,o],0),new Ms([r,a],0)]}class Cp{constructor(t,e,o){if(this.bitmap=t,this.padding=e,this.hashCount=o,e<0||e>=8)throw new aa(`Invalid padding: ${e}`);if(o<0)throw new aa(`Invalid hash count: ${o}`);if(t.length>0&&this.hashCount===0)throw new aa(`Invalid hash count: ${o}`);if(t.length===0&&e!==0)throw new aa(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Ms.fromNumber(this.Ie)}Ee(t,e,o){let r=t.add(e.multiply(Ms.fromNumber(o)));return r.compare($1)===1&&(r=new Ms([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=NT(t),[o,r]=MT(e);for(let a=0;a<this.hashCount;a++){const c=this.Ee(o,r,a);if(!this.de(c))return!1}return!0}static create(t,e,o){const r=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),c=new Cp(a,r,e);return o.forEach((d=>c.insert(d))),c}insert(t){if(this.Ie===0)return;const e=NT(t),[o,r]=MT(e);for(let a=0;a<this.hashCount;a++){const c=this.Ee(o,r,a);this.Ae(c)}}Ae(t){const e=Math.floor(t/8),o=t%8;this.bitmap[e]|=1<<o}}class aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,e,o,r,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,o){const r=new Map;return r.set(t,wa.createSynthesizedTargetChangeForCurrentChange(t,e,o)),new Xc(Rt.min(),r,new ue(zt),Xi(),Ut())}}class wa{constructor(t,e,o,r,a){this.resumeToken=t,this.current=e,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,o){return new wa(o,e,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,e,o,r){this.Re=t,this.removedTargetIds=e,this.key=o,this.Ve=r}}class k0{constructor(t,e){this.targetId=t,this.me=e}}class O0{constructor(t,e,o=Qe.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=o,this.cause=r}}class DT{constructor(){this.fe=0,this.ge=xT(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ut(),e=Ut(),o=Ut();return this.ge.forEach(((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:o=o.add(r);break;default:At()}})),new wa(this.pe,this.ye,t,e,o)}Ce(){this.we=!1,this.ge=xT()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Zt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class W1{constructor(t){this.Le=t,this.Be=new Map,this.ke=Xi(),this.qe=bT(),this.Qe=new ue(zt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,(e=>{const o=this.Ge(e);switch(t.state){case 0:this.ze(e)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),o.De(t.resumeToken));break;default:At()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach(((o,r)=>{this.ze(r)&&e(r)}))}He(t){const e=t.targetId,o=t.me.count,r=this.Je(e);if(r){const a=r.target;if(Yh(a))if(o===0){const c=new vt(a.path);this.Ue(e,c,tn.newNoDocument(c,Rt.min()))}else Zt(o===1);else{const c=this.Ye(e);if(c!==o){const d=this.Ze(t),y=d?this.Xe(d,t,c):1;if(y!==0){this.je(e);const m=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,m)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:a=0}=e;let c,d;try{c=bs(o).toUint8Array()}catch(y){if(y instanceof h0)return kr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{d=new Cp(c,r,a)}catch(y){return kr(y instanceof aa?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return d.Ie===0?null:d}Xe(t,e,o){return e.me.count===o-this.nt(t,e.targetId)?0:2}nt(t,e){const o=this.Le.getRemoteKeysForTarget(e);let r=0;return o.forEach((a=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.mightContain(d)||(this.Ue(e,a,null),r++)})),r}rt(t){const e=new Map;this.Be.forEach(((a,c)=>{const d=this.Je(c);if(d){if(a.current&&Yh(d.target)){const y=new vt(d.target.path);this.ke.get(y)!==null||this.it(c,y)||this.Ue(c,y,tn.newNoDocument(y,t))}a.be&&(e.set(c,a.ve()),a.Ce())}}));let o=Ut();this.qe.forEach(((a,c)=>{let d=!0;c.forEachWhile((y=>{const m=this.Je(y);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(a))})),this.ke.forEach(((a,c)=>c.setReadTime(t)));const r=new Xc(t,e,this.Qe,this.ke,o);return this.ke=Xi(),this.qe=bT(),this.Qe=new ue(zt),r}$e(t,e){if(!this.ze(t))return;const o=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,o),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,o){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),o&&(this.ke=this.ke.insert(e,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new DT,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Ke(zt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||mt("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new DT),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.Ue(t,e,null)}))}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function bT(){return new ue(vt.comparator)}function xT(){return new ue(vt.comparator)}const Z1={asc:"ASCENDING",desc:"DESCENDING"},j1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tV={and:"AND",or:"OR"};class eV{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Qh(n,t){return n.useProto3Json||zc(t)?t:{value:t}}function Vc(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function q0(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function nV(n,t){return Vc(n,t.toTimestamp())}function gi(n){return Zt(!!n),Rt.fromTimestamp((function(e){const o=Ko(e);return new Me(o.seconds,o.nanos)})(n))}function Rp(n,t){return Xh(n,t).canonicalString()}function Xh(n,t){const e=(function(r){return new re(["projects",r.projectId,"databases",r.database])})(n).child("documents");return t===void 0?e:e.child(t)}function G0(n){const t=re.fromString(n);return Zt(Y0(t)),t}function $h(n,t){return Rp(n.databaseId,t.path)}function yh(n,t){const e=G0(t);if(e.get(1)!==n.databaseId.projectId)throw new ht(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ht(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new vt(F0(e))}function B0(n,t){return Rp(n.databaseId,t)}function iV(n){const t=G0(n);return t.length===4?re.emptyPath():F0(t)}function Wh(n){return new re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function F0(n){return Zt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function VT(n,t,e){return{name:$h(n,t),fields:e.value.mapValue.fields}}function oV(n,t){let e;if("targetChange"in t){t.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:At()})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(Zt(v===void 0||typeof v=="string"),Qe.fromBase64String(v||"")):(Zt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Qe.fromUint8Array(v||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&(function(m){const v=m.code===void 0?et.UNKNOWN:L0(m.code);return new ht(v,m.message||"")})(c);e=new O0(o,r,a,d||null)}else if("documentChange"in t){t.documentChange;const o=t.documentChange;o.document,o.document.name,o.document.updateTime;const r=yh(n,o.document.name),a=gi(o.document.updateTime),c=o.document.createTime?gi(o.document.createTime):Rt.min(),d=new Bn({mapValue:{fields:o.document.fields}}),y=tn.newFoundDocument(r,a,c,d),m=o.targetIds||[],v=o.removedTargetIds||[];e=new vc(m,v,y.key,y)}else if("documentDelete"in t){t.documentDelete;const o=t.documentDelete;o.document;const r=yh(n,o.document),a=o.readTime?gi(o.readTime):Rt.min(),c=tn.newNoDocument(r,a),d=o.removedTargetIds||[];e=new vc([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const o=t.documentRemove;o.document;const r=yh(n,o.document),a=o.removedTargetIds||[];e=new vc([],a,r,null)}else{if(!("filter"in t))return At();{t.filter;const o=t.filter;o.targetId;const{count:r=0,unchangedNames:a}=o,c=new K1(r,a),d=o.targetId;e=new k0(d,c)}}return e}function sV(n,t){let e;if(t instanceof Ia)e={update:VT(n,t.key,t.value)};else if(t instanceof U0)e={delete:$h(n,t.key)};else if(t instanceof Ps)e={update:VT(n,t.key,t.data),updateMask:pV(t.fieldMask)};else{if(!(t instanceof z1))return At();e={verify:$h(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((o=>(function(a,c){const d=c.transform;if(d instanceof bc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ea)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Aa)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xc)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw At()})(0,o)))),t.precondition.isNone||(e.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:nV(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:At()})(n,t.precondition)),e}function rV(n,t){return n&&n.length>0?(Zt(t!==void 0),n.map((e=>(function(r,a){let c=r.updateTime?gi(r.updateTime):gi(a);return c.isEqual(Rt.min())&&(c=gi(a)),new B1(c,r.transformResults||[])})(e,t)))):[]}function lV(n,t){return{documents:[B0(n,t.path)]}}function aV(n,t){const e={structuredQuery:{}},o=t.path;let r;t.collectionGroup!==null?(r=o,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=o.popLast(),e.structuredQuery.from=[{collectionId:o.lastSegment()}]),e.parent=B0(n,r);const a=(function(m){if(m.length!==0)return z0(ti.create(m,"and"))})(t.filters);a&&(e.structuredQuery.where=a);const c=(function(m){if(m.length!==0)return m.map((v=>(function(A){return{field:Nr(A.field),direction:fV(A.dir)}})(v)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=Qh(n,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(t.endAt)),{_t:e,parent:r}}function uV(n){let t=iV(n.parent);const e=n.structuredQuery,o=e.from?e.from.length:0;let r=null;if(o>0){Zt(o===1);const v=e.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let a=[];e.where&&(a=(function(E){const A=H0(E);return A instanceof ti&&y0(A)?A.getFilters():[A]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((A=>(function(x){return new Ta(Mr(x.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(A)))})(e.orderBy));let d=null;e.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,zc(A)?null:A})(e.limit));let y=null;e.startAt&&(y=(function(E){const A=!!E.before,I=E.values||[];return new Dc(I,A)})(e.startAt));let m=null;return e.endAt&&(m=(function(E){const A=!E.before,I=E.values||[];return new Dc(I,A)})(e.endAt)),N1(t,r,c,a,d,"F",y,m)}function cV(n,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At()}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function H0(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const o=Mr(e.unaryFilter.field);return Re.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Mr(e.unaryFilter.field);return Re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Mr(e.unaryFilter.field);return Re.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Mr(e.unaryFilter.field);return Re.create(c,"!=",{nullValue:"NULL_VALUE"});default:return At()}})(n):n.fieldFilter!==void 0?(function(e){return Re.create(Mr(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return ti.create(e.compositeFilter.filters.map((o=>H0(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return At()}})(e.compositeFilter.op))})(n):At()}function fV(n){return Z1[n]}function dV(n){return j1[n]}function hV(n){return tV[n]}function Nr(n){return{fieldPath:n.canonicalString()}}function Mr(n){return Je.fromServerFormat(n.fieldPath)}function z0(n){return n instanceof Re?(function(e){if(e.op==="=="){if(vT(e.value))return{unaryFilter:{field:Nr(e.field),op:"IS_NAN"}};if(_T(e.value))return{unaryFilter:{field:Nr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(vT(e.value))return{unaryFilter:{field:Nr(e.field),op:"IS_NOT_NAN"}};if(_T(e.value))return{unaryFilter:{field:Nr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nr(e.field),op:dV(e.op),value:e.value}}})(n):n instanceof ti?(function(e){const o=e.getFilters().map((r=>z0(r)));return o.length===1?o[0]:{compositeFilter:{op:hV(e.op),filters:o}}})(n):At()}function pV(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Y0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t,e,o,r,a=Rt.min(),c=Rt.min(),d=Qe.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=e,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=y}withSequenceNumber(t){return new Bo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(t){this.ct=t}}function gV(n){const t=uV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.un=new _V}addToCollectionParentIndex(t,e){return this.un.add(e),ot.resolve()}getCollectionParents(t,e){return ot.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return ot.resolve()}deleteFieldIndex(t,e){return ot.resolve()}deleteAllFieldIndexes(t){return ot.resolve()}createTargetIndexes(t,e){return ot.resolve()}getDocumentsMatchingTarget(t,e){return ot.resolve(null)}getIndexType(t,e){return ot.resolve(0)}getFieldIndexes(t,e){return ot.resolve([])}getNextCollectionGroupToUpdate(t){return ot.resolve(null)}getMinOffset(t,e){return ot.resolve(Jo.min())}getMinOffsetFromCollectionGroup(t,e){return ot.resolve(Jo.min())}updateCollectionGroup(t,e,o){return ot.resolve()}updateIndexEntries(t,e){return ot.resolve()}}class _V{constructor(){this.index={}}add(t){const e=t.lastSegment(),o=t.popLast(),r=this.index[e]||new Ke(re.comparator),a=!r.has(o);return this.index[e]=r.add(o),a}has(t){const e=t.lastSegment(),o=t.popLast(),r=this.index[e];return r&&r.has(o)}getEntries(t){return(this.index[t]||new Ke(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Br(0)}static kn(){return new Br(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.changes=new Wr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,tn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const o=this.changes.get(e);return o!==void 0?ot.resolve(o):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(t,e,o,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=o,this.indexManager=r}getDocument(t,e){let o=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(o=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(o!==null&&da(o.mutation,r,Wn.empty(),Me.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((o=>this.getLocalViewOfDocuments(t,o,Ut()).next((()=>o))))}getLocalViewOfDocuments(t,e,o=Ut()){const r=Ns();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,o).next((a=>{let c=la();return a.forEach(((d,y)=>{c=c.insert(d,y.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const o=Ns();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,Ut())))}populateOverlays(t,e,o){const r=[];return o.forEach((a=>{e.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(t,r).next((a=>{a.forEach(((c,d)=>{e.set(c,d)}))}))}computeViews(t,e,o,r){let a=Xi();const c=fa(),d=(function(){return fa()})();return e.forEach(((y,m)=>{const v=o.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Ps)?a=a.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),da(v.mutation,m,v.mutation.getFieldMask(),Me.now())):c.set(m.key,Wn.empty())})),this.recalculateAndSaveOverlays(t,a).next((y=>(y.forEach(((m,v)=>c.set(m,v))),e.forEach(((m,v)=>{var E;return d.set(m,new TV(v,(E=c.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(t,e){const o=fa();let r=new ue(((c,d)=>c-d)),a=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const d of c)d.keys().forEach((y=>{const m=e.get(y);if(m===null)return;let v=o.get(y)||Wn.empty();v=d.applyToLocalView(m,v),o.set(y,v);const E=(r.get(d.batchId)||Ut()).add(y);r=r.insert(d.batchId,E)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const y=d.getNext(),m=y.key,v=y.value,E=w0();v.forEach((A=>{if(!a.has(A)){const I=V0(e.get(A),o.get(A));I!==null&&E.set(A,I),a=a.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(t,m,E))}return ot.waitFor(c)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((o=>this.recalculateAndSaveOverlays(t,o)))}getDocumentsMatchingQuery(t,e,o,r){return(function(c){return vt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):A0(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,o,r):this.getDocumentsMatchingCollectionQuery(t,e,o,r)}getNextDocuments(t,e,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,o,r).next((a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,o.largestBatchId,r-a.size):ot.resolve(Ns());let d=-1,y=a;return c.next((m=>ot.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?ot.resolve():this.remoteDocumentCache.getEntry(t,v).next((A=>{y=y.insert(v,A)}))))).next((()=>this.populateOverlays(t,m,a))).next((()=>this.computeViews(t,y,m,Ut()))).next((v=>({batchId:d,changes:I0(v)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new vt(e)).next((o=>{let r=la();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,o,r){const a=e.collectionGroup;let c=la();return this.indexManager.getCollectionParents(t,a).next((d=>ot.forEach(d,(y=>{const m=(function(E,A){return new $r(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,y.child(a));return this.getDocumentsMatchingCollectionQuery(t,m,o,r).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,o,r){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,o.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,o,a,r)))).next((c=>{a.forEach(((y,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,tn.newInvalidDocument(v)))}));let d=la();return c.forEach(((y,m)=>{const v=a.get(y);v!==void 0&&da(v.mutation,m,Wn.empty(),Me.now()),Jc(e,m)&&(d=d.insert(y,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return ot.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:gi(r.createTime)}})(e)),ot.resolve()}getNamedQuery(t,e){return ot.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,(function(r){return{name:r.name,query:gV(r.bundledQuery),readTime:gi(r.readTime)}})(e)),ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.overlays=new ue(vt.comparator),this.Ir=new Map}getOverlay(t,e){return ot.resolve(this.overlays.get(e))}getOverlays(t,e){const o=Ns();return ot.forEach(e,(r=>this.getOverlay(t,r).next((a=>{a!==null&&o.set(r,a)})))).next((()=>o))}saveOverlays(t,e,o){return o.forEach(((r,a)=>{this.ht(t,e,a)})),ot.resolve()}removeOverlaysForBatchId(t,e,o){const r=this.Ir.get(o);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(o)),ot.resolve()}getOverlaysForCollection(t,e,o){const r=Ns(),a=e.length+1,c=new vt(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const y=d.getNext().value,m=y.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===a&&y.largestBatchId>o&&r.set(y.getKey(),y)}return ot.resolve(r)}getOverlaysForCollectionGroup(t,e,o,r){let a=new ue(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>o){let v=a.get(m.largestBatchId);v===null&&(v=Ns(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Ns(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=r)););return ot.resolve(d)}ht(t,e,o){const r=this.overlays.get(o.key);if(r!==null){const c=this.Ir.get(r.largestBatchId).delete(o.key);this.Ir.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(o.key,new J1(e,o));let a=this.Ir.get(e);a===void 0&&(a=Ut(),this.Ir.set(e,a)),this.Ir.set(e,a.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(t){return ot.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.Tr=new Ke(Ue.Er),this.dr=new Ke(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const o=new Ue(t,e);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,e){t.forEach((o=>this.addReference(o,e)))}removeReference(t,e){this.Vr(new Ue(t,e))}mr(t,e){t.forEach((o=>this.removeReference(o,e)))}gr(t){const e=new vt(new re([])),o=new Ue(e,t),r=new Ue(e,t+1),a=[];return this.dr.forEachInRange([o,r],(c=>{this.Vr(c),a.push(c.key)})),a}pr(){this.Tr.forEach((t=>this.Vr(t)))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new vt(new re([])),o=new Ue(e,t),r=new Ue(e,t+1);let a=Ut();return this.dr.forEachInRange([o,r],(c=>{a=a.add(c.key)})),a}containsKey(t){const e=new Ue(t,0),o=this.Tr.firstAfterOrEqual(e);return o!==null&&t.isEqual(o.key)}}class Ue{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return vt.comparator(t.key,e.key)||zt(t.wr,e.wr)}static Ar(t,e){return zt(t.wr,e.wr)||vt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Ke(Ue.Er)}checkEmpty(t){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,o,r){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Y1(a,e,o,r);this.mutationQueue.push(c);for(const d of r)this.br=this.br.add(new Ue(d.key,a)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return ot.resolve(c)}lookupMutationBatch(t,e){return ot.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const o=e+1,r=this.vr(o),a=r<0?0:r;return ot.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const o=new Ue(e,0),r=new Ue(e,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([o,r],(c=>{const d=this.Dr(c.wr);a.push(d)})),ot.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let o=new Ke(zt);return e.forEach((r=>{const a=new Ue(r,0),c=new Ue(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],(d=>{o=o.add(d.wr)}))})),ot.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,e){const o=e.path,r=o.length+1;let a=o;vt.isDocumentKey(a)||(a=a.child(""));const c=new Ue(new vt(a),0);let d=new Ke(zt);return this.br.forEachWhile((y=>{const m=y.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(d=d.add(y.wr)),!0)}),c),ot.resolve(this.Cr(d))}Cr(t){const e=[];return t.forEach((o=>{const r=this.Dr(o);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){Zt(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let o=this.br;return ot.forEach(e.mutations,(r=>{const a=new Ue(r.key,e.batchId);return o=o.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.br=o}))}On(t){}containsKey(t,e){const o=new Ue(e,0),r=this.br.firstAfterOrEqual(o);return ot.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,ot.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(t){this.Mr=t,this.docs=(function(){return new ue(vt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const o=e.key,r=this.docs.get(o),a=r?r.size:0,c=this.Mr(e);return this.docs=this.docs.insert(o,{document:e.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const o=this.docs.get(e);return ot.resolve(o?o.document.mutableCopy():tn.newInvalidDocument(e))}getEntries(t,e){let o=Xi();return e.forEach((r=>{const a=this.docs.get(r);o=o.insert(r,a?a.document.mutableCopy():tn.newInvalidDocument(r))})),ot.resolve(o)}getDocumentsMatchingQuery(t,e,o,r){let a=Xi();const c=e.path,d=new vt(c.child("")),y=this.docs.getIteratorFrom(d);for(;y.hasNext();){const{key:m,value:{document:v}}=y.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||u1(a1(v),o)<=0||(r.has(v.key)||Jc(e,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ot.resolve(a)}getAllFromCollectionGroup(t,e,o,r){At()}Or(t,e){return ot.forEach(this.docs,(o=>e(o)))}newChangeBuffer(t){return new wV(this)}getSize(t){return ot.resolve(this.size)}}class wV extends vV{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(o)})),ot.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(t){this.persistence=t,this.Nr=new Wr((e=>Tp(e)),Ep),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ip,this.targetCount=0,this.kr=Br.Bn()}forEachTarget(t,e){return this.Nr.forEach(((o,r)=>e(r))),ot.resolve()}getLastRemoteSnapshotVersion(t){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ot.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(t,e,o){return o&&(this.lastRemoteSnapshotVersion=o),e>this.Lr&&(this.Lr=e),ot.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new Br(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,ot.resolve()}updateTargetData(t,e){return this.Kn(e),ot.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,ot.resolve()}removeTargets(t,e,o){let r=0;const a=[];return this.Nr.forEach(((c,d)=>{d.sequenceNumber<=e&&o.get(d.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)})),ot.waitFor(a).next((()=>r))}getTargetCount(t){return ot.resolve(this.targetCount)}getTargetData(t,e){const o=this.Nr.get(e)||null;return ot.resolve(o)}addMatchingKeys(t,e,o){return this.Br.Rr(e,o),ot.resolve()}removeMatchingKeys(t,e,o){this.Br.mr(e,o);const r=this.persistence.referenceDelegate,a=[];return r&&e.forEach((c=>{a.push(r.markPotentiallyOrphaned(t,c))})),ot.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),ot.resolve()}getMatchingKeysForTargetId(t,e){const o=this.Br.yr(e);return ot.resolve(o)}containsKey(t,e){return ot.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(t,e){this.qr={},this.overlays={},this.Qr=new gp(0),this.Kr=!1,this.Kr=!0,this.$r=new CV,this.referenceDelegate=t(this),this.Ur=new NV(this),this.indexManager=new yV,this.remoteDocumentCache=(function(r){return new IV(r)})((o=>this.referenceDelegate.Wr(o))),this.serializer=new mV(e),this.Gr=new AV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new SV,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let o=this.qr[t.toKey()];return o||(o=new RV(e,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,o){mt("MemoryPersistence","Starting transaction:",t);const r=new DV(this.Qr.next());return this.referenceDelegate.zr(),o(r).next((a=>this.referenceDelegate.jr(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Hr(t,e){return ot.or(Object.values(this.qr).map((o=>()=>o.containsKey(t,e))))}}class DV extends f1{constructor(t){super(),this.currentSequenceNumber=t}}class wp{constructor(t){this.persistence=t,this.Jr=new Ip,this.Yr=null}static Zr(t){return new wp(t)}get Xr(){if(this.Yr)return this.Yr;throw At()}addReference(t,e,o){return this.Jr.addReference(o,e),this.Xr.delete(o.toString()),ot.resolve()}removeReference(t,e,o){return this.Jr.removeReference(o,e),this.Xr.add(o.toString()),ot.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),ot.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach((r=>this.Xr.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((a=>this.Xr.add(a.toString())))})).next((()=>o.removeTargetData(t,e)))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.Xr,(o=>{const r=vt.fromPath(o);return this.ei(t,r).next((a=>{a||e.removeEntry(r,Rt.min())}))})).next((()=>(this.Yr=null,e.apply(t))))}updateLimboDocument(t,e){return this.ei(t,e).next((o=>{o?this.Xr.delete(e.toString()):this.Xr.add(e.toString())}))}Wr(t){return 0}ei(t,e){return ot.or([()=>ot.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t,e,o,r){this.targetId=t,this.fromCache=e,this.$i=o,this.Ui=r}static Wi(t,e){let o=Ut(),r=Ut();for(const a of e.docChanges)switch(a.type){case 0:o=o.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Np(t,e.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Pb()?8:d1(xb())>0?6:4})()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,o,r){const a={result:null};return this.Yi(t,e).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.Zi(t,e,r,o).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new bV;return this.Xi(t,e,c).next((d=>{if(a.result=d,this.zi)return this.es(t,e,c,d.size)}))})).next((()=>a.result))}es(t,e,o,r){return o.documentReadCount<this.ji?(oa()<=qt.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",wr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ot.resolve()):(oa()<=qt.DEBUG&&mt("QueryEngine","Query:",wr(e),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.Hi*r?(oa()<=qt.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",wr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mi(e))):ot.resolve())}Yi(t,e){if(ST(e))return ot.resolve(null);let o=mi(e);return this.indexManager.getIndexType(t,o).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Kh(e,null,"F"),o=mi(e)),this.indexManager.getDocumentsMatchingTarget(t,o).next((a=>{const c=Ut(...a);return this.Ji.getDocuments(t,c).next((d=>this.indexManager.getMinOffset(t,o).next((y=>{const m=this.ts(e,d);return this.ns(e,m,c,y.readTime)?this.Yi(t,Kh(e,null,"F")):this.rs(t,m,e,y)}))))})))))}Zi(t,e,o,r){return ST(e)||r.isEqual(Rt.min())?ot.resolve(null):this.Ji.getDocuments(t,o).next((a=>{const c=this.ts(e,a);return this.ns(e,c,o,r)?ot.resolve(null):(oa()<=qt.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wr(e)),this.rs(t,c,e,l1(r,-1)).next((d=>d)))}))}ts(t,e){let o=new Ke(C0(t));return e.forEach(((r,a)=>{Jc(t,a)&&(o=o.add(a))})),o}ns(t,e,o,r){if(t.limit===null)return!1;if(o.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Xi(t,e,o){return oa()<=qt.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",wr(e)),this.Ji.getDocumentsMatchingQuery(t,e,Jo.min(),o)}rs(t,e,o,r){return this.Ji.getDocumentsMatchingQuery(t,o,r).next((a=>(e.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(t,e,o,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new ue(zt),this._s=new Wr((a=>Tp(a)),Ep),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new EV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.os)))}}function PV(n,t,e,o){return new VV(n,t,e,o)}async function J0(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return e.mutationQueue.getAllMutationBatches(o).next((a=>(r=a,e.ls(t),e.mutationQueue.getAllMutationBatches(o)))).next((a=>{const c=[],d=[];let y=Ut();for(const m of r){c.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}return e.localDocuments.getDocuments(o,y).next((m=>({hs:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function UV(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=t.batch.keys(),a=e.cs.newChangeBuffer({trackRemovals:!0});return(function(d,y,m,v){const E=m.batch,A=E.keys();let I=ot.resolve();return A.forEach((x=>{I=I.next((()=>v.getEntry(y,x))).next((O=>{const U=m.docVersions.get(x);Zt(U!==null),O.version.compareTo(U)<0&&(E.applyToRemoteDocument(O,m),O.isValidDocument()&&(O.setReadTime(m.commitVersion),v.addEntry(O)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(y,E)))})(e,o,t,a).next((()=>a.apply(o))).next((()=>e.mutationQueue.performConsistencyCheck(o))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(o,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let y=Ut();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(y=y.add(d.batch.mutations[m].key));return y})(t)))).next((()=>e.localDocuments.getDocuments(o,r)))}))}function K0(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function LV(n,t){const e=It(n),o=t.snapshotVersion;let r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;const d=[];t.targetChanges.forEach(((v,E)=>{const A=r.get(E);if(!A)return;d.push(e.Ur.removeMatchingKeys(a,v.removedDocuments,E).next((()=>e.Ur.addMatchingKeys(a,v.addedDocuments,E))));let I=A.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(E)!==null?I=I.withResumeToken(Qe.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,o)),r=r.insert(E,I),(function(O,U,Q){return O.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(A,I,v)&&d.push(e.Ur.updateTargetData(a,I))}));let y=Xi(),m=Ut();if(t.documentUpdates.forEach((v=>{t.resolvedLimboDocuments.has(v)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(kV(a,c,t.documentUpdates).next((v=>{y=v.Ps,m=v.Is}))),!o.isEqual(Rt.min())){const v=e.Ur.getLastRemoteSnapshotVersion(a).next((E=>e.Ur.setTargetsMetadata(a,a.currentSequenceNumber,o)));d.push(v)}return ot.waitFor(d).next((()=>c.apply(a))).next((()=>e.localDocuments.getLocalViewOfDocuments(a,y,m))).next((()=>y))})).then((a=>(e.os=r,a)))}function kV(n,t,e){let o=Ut(),r=Ut();return e.forEach((a=>o=o.add(a))),t.getEntries(n,o).next((a=>{let c=Xi();return e.forEach(((d,y)=>{const m=a.get(d);y.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),y.isNoDocument()&&y.version.isEqual(Rt.min())?(t.removeEntry(d,y.readTime),c=c.insert(d,y)):!m.isValidDocument()||y.version.compareTo(m.version)>0||y.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(y),c=c.insert(d,y)):mt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",y.version)})),{Ps:c,Is:r}}))}function OV(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(o=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(o,t))))}function qV(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return e.Ur.getTargetData(o,t).next((a=>a?(r=a,ot.resolve(r)):e.Ur.allocateTargetId(o).next((c=>(r=new Bo(t,c,"TargetPurposeListen",o.currentSequenceNumber),e.Ur.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=e.os.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(o.targetId,o),e._s.set(t,o.targetId)),o}))}async function Zh(n,t,e){const o=It(n),r=o.os.get(t),a=e?"readwrite":"readwrite-primary";try{e||await o.persistence.runTransaction("Release target",a,(c=>o.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Ra(c))throw c;mt("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}o.os=o.os.remove(t),o._s.delete(r.target)}function PT(n,t,e){const o=It(n);let r=Rt.min(),a=Ut();return o.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,m,v){const E=It(y),A=E._s.get(v);return A!==void 0?ot.resolve(E.os.get(A)):E.Ur.getTargetData(m,v)})(o,c,mi(t)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(c,d.targetId).next((y=>{a=y}))})).next((()=>o.ss.getDocumentsMatchingQuery(c,t,e?r:Rt.min(),e?a:Ut()))).next((d=>(GV(o,D1(t),d),{documents:d,Ts:a})))))}function GV(n,t,e){let o=n.us.get(t)||Rt.min();e.forEach(((r,a)=>{a.readTime.compareTo(o)>0&&(o=a.readTime)})),n.us.set(t,o)}class UT{constructor(){this.activeTargetIds=L1()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class BV{constructor(){this.so=new UT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,o){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,o){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new UT,Promise.resolve()}handleUserChange(t,e,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){mt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){mt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function _h(){return dc===null?dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class YV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const o=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+e.host,this.vo=`projects/${r}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${a}`}get Fo(){return!1}Mo(e,o,r,a,c){const d=_h(),y=this.xo(e,o.toUriEncodedString());mt("RestConnection",`Sending RPC '${e}' ${d}:`,y,r);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,c),this.No(e,y,m,r).then((v=>(mt("RestConnection",`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw kr("RestConnection",`RPC '${e}' ${d} failed with error: `,v,"url: ",y,"request:",r),v}))}Lo(e,o,r,a,c,d){return this.Mo(e,o,r,a,c)}Oo(e,o,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach(((a,c)=>e[c]=a)),r&&r.headers.forEach(((a,c)=>e[c]=a))}xo(e,o){const r=HV[e];return`${this.Do}/v1/${o}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,o,r){const a=_h();return new Promise(((c,d)=>{const y=new s0;y.setWithCredentials(!0),y.listenOnce(r0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case gc.NO_ERROR:const v=y.getResponseJson();mt(Ze,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(v)),c(v);break;case gc.TIMEOUT:mt(Ze,`RPC '${t}' ${a} timed out`),d(new ht(et.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:const E=y.getStatus();if(mt(Ze,`RPC '${t}' ${a} failed with status:`,E,"response text:",y.getResponseText()),E>0){let A=y.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A?.error;if(I&&I.status&&I.message){const x=(function(U){const Q=U.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(Q)>=0?Q:et.UNKNOWN})(I.status);d(new ht(x,I.message))}else d(new ht(et.UNKNOWN,"Server responded with status "+y.getStatus()))}else d(new ht(et.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{mt(Ze,`RPC '${t}' ${a} completed.`)}}));const m=JSON.stringify(r);mt(Ze,`RPC '${t}' ${a} sending request:`,r),y.send(e,"POST",m,o,15)}))}Bo(t,e,o){const r=_h(),a=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=u0(),d=a0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(y.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,e,o),y.encodeInitMessageHeaders=!0;const v=a.join("");mt(Ze,`Creating RPC '${t}' stream ${r}: ${v}`,y);const E=c.createWebChannel(v,y);let A=!1,I=!1;const x=new zV({Io:U=>{I?mt(Ze,`Not sending because RPC '${t}' stream ${r} is closed:`,U):(A||(mt(Ze,`Opening RPC '${t}' stream ${r} transport.`),E.open(),A=!0),mt(Ze,`RPC '${t}' stream ${r} sending:`,U),E.send(U))},To:()=>E.close()}),O=(U,Q,nt)=>{U.listen(Q,(Z=>{try{nt(Z)}catch(it){setTimeout((()=>{throw it}),0)}}))};return O(E,ra.EventType.OPEN,(()=>{I||(mt(Ze,`RPC '${t}' stream ${r} transport opened.`),x.yo())})),O(E,ra.EventType.CLOSE,(()=>{I||(I=!0,mt(Ze,`RPC '${t}' stream ${r} transport closed`),x.So())})),O(E,ra.EventType.ERROR,(U=>{I||(I=!0,kr(Ze,`RPC '${t}' stream ${r} transport errored:`,U),x.So(new ht(et.UNAVAILABLE,"The operation could not be completed")))})),O(E,ra.EventType.MESSAGE,(U=>{var Q;if(!I){const nt=U.data[0];Zt(!!nt);const Z=nt,it=Z.error||((Q=Z[0])===null||Q===void 0?void 0:Q.error);if(it){mt(Ze,`RPC '${t}' stream ${r} received error:`,it);const ct=it.status;let rt=(function(N){const P=Ce[N];if(P!==void 0)return L0(P)})(ct),D=it.message;rt===void 0&&(rt=et.INTERNAL,D="Unknown error status: "+ct+" with message "+it.message),I=!0,x.So(new ht(rt,D)),E.close()}else mt(Ze,`RPC '${t}' stream ${r} received:`,nt),x.bo(nt)}})),O(d,l0.STAT_EVENT,(U=>{U.stat===Bh.PROXY?mt(Ze,`RPC '${t}' stream ${r} detected buffering proxy`):U.stat===Bh.NOPROXY&&mt(Ze,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{x.wo()}),0),x}}function vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){return new eV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,e,o=1e3,r=1.5,a=6e4){this.ui=t,this.timerId=e,this.ko=o,this.qo=r,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-o);r>0&&mt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),t()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,e,o,r,a,c,d,y){this.ui=t,this.Ho=o,this.Jo=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Q0(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===et.RESOURCE_EXHAUSTED?(Qi(e.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.Yo===e&&this.P_(o,r)}),(o=>{t((()=>{const r=new ht(et.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(r)}))}))}P_(t,e){const o=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo((()=>{o((()=>this.listener.Eo()))})),this.stream.Ro((()=>{o((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((r=>{o((()=>this.I_(r)))})),this.stream.onMessage((r=>{o((()=>++this.e_==1?this.E_(r):this.onNext(r)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(t){return mt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget((()=>this.Yo===t?e():(mt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JV extends X0{constructor(t,e,o,r,a,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,o,r,c),this.serializer=a}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=oV(this.serializer,t),o=(function(a){if(!("targetChange"in a))return Rt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Rt.min():c.readTime?gi(c.readTime):Rt.min()})(t);return this.listener.d_(e,o)}A_(t){const e={};e.database=Wh(this.serializer),e.addTarget=(function(a,c){let d;const y=c.target;if(d=Yh(y)?{documents:lV(a,y)}:{query:aV(a,y)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=q0(a,c.resumeToken);const m=Qh(a,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Rt.min())>0){d.readTime=Vc(a,c.snapshotVersion.toTimestamp());const m=Qh(a,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,t);const o=cV(this.serializer,t);o&&(e.labels=o),this.a_(e)}R_(t){const e={};e.database=Wh(this.serializer),e.removeTarget=t,this.a_(e)}}class KV extends X0{constructor(t,e,o,r,a,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,o,r,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return Zt(!!t.streamToken),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Zt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=rV(t.writeResults,t.commitTime),o=gi(t.commitTime);return this.listener.g_(o,e)}p_(){const t={};t.database=Wh(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map((o=>sV(this.serializer,o)))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV extends class{}{constructor(t,e,o,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=o,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ht(et.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,o,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Mo(t,Xh(e,o),r,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ht(et.UNKNOWN,a.toString())}))}Lo(t,e,o,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Lo(t,Xh(e,o),r,c,d,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ht(et.UNKNOWN,c.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class XV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qi(e),this.D_=!1):mt("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(t,e,o,r,a){this.localStore=t,this.datastore=e,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((c=>{o.enqueueAndForget((async()=>{Us(this)&&(mt("RemoteStore","Restarting streams for network reachability change."),await(async function(y){const m=It(y);m.L_.add(4),await Na(m),m.q_.set("Unknown"),m.L_.delete(4),await Wc(m)})(this))}))})),this.q_=new XV(o,r)}}async function Wc(n){if(Us(n))for(const t of n.B_)await t(!0)}async function Na(n){for(const t of n.B_)await t(!1)}function $0(n,t){const e=It(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),xp(e)?bp(e):Zr(e).r_()&&Dp(e,t))}function Mp(n,t){const e=It(n),o=Zr(e);e.N_.delete(t),o.r_()&&W0(e,t),e.N_.size===0&&(o.r_()?o.o_():Us(e)&&e.q_.set("Unknown"))}function Dp(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Rt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Zr(n).A_(t)}function W0(n,t){n.Q_.xe(t),Zr(n).R_(t)}function bp(n){n.Q_=new W1({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Zr(n).start(),n.q_.v_()}function xp(n){return Us(n)&&!Zr(n).n_()&&n.N_.size>0}function Us(n){return It(n).L_.size===0}function Z0(n){n.Q_=void 0}async function WV(n){n.q_.set("Online")}async function ZV(n){n.N_.forEach(((t,e)=>{Dp(n,t)}))}async function jV(n,t){Z0(n),xp(n)?(n.q_.M_(t),bp(n)):n.q_.set("Unknown")}async function tP(n,t,e){if(n.q_.set("Online"),t instanceof O0&&t.state===2&&t.cause)try{await(async function(r,a){const c=a.cause;for(const d of a.targetIds)r.N_.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.N_.delete(d),r.Q_.removeTarget(d))})(n,t)}catch(o){mt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),await Pc(n,o)}else if(t instanceof vc?n.Q_.Ke(t):t instanceof k0?n.Q_.He(t):n.Q_.We(t),!e.isEqual(Rt.min()))try{const o=await K0(n.localStore);e.compareTo(o)>=0&&await(function(a,c){const d=a.Q_.rt(c);return d.targetChanges.forEach(((y,m)=>{if(y.resumeToken.approximateByteSize()>0){const v=a.N_.get(m);v&&a.N_.set(m,v.withResumeToken(y.resumeToken,c))}})),d.targetMismatches.forEach(((y,m)=>{const v=a.N_.get(y);if(!v)return;a.N_.set(y,v.withResumeToken(Qe.EMPTY_BYTE_STRING,v.snapshotVersion)),W0(a,y);const E=new Bo(v.target,y,m,v.sequenceNumber);Dp(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,e)}catch(o){mt("RemoteStore","Failed to raise snapshot:",o),await Pc(n,o)}}async function Pc(n,t,e){if(!Ra(t))throw t;n.L_.add(1),await Na(n),n.q_.set("Offline"),e||(e=()=>K0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{mt("RemoteStore","Retrying IndexedDB access"),await e(),n.L_.delete(1),await Wc(n)}))}function j0(n,t){return t().catch((e=>Pc(n,e,t)))}async function Zc(n){const t=It(n),e=Qo(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;eP(t);)try{const r=await OV(t.localStore,o);if(r===null){t.O_.length===0&&e.o_();break}o=r.batchId,nP(t,r)}catch(r){await Pc(t,r)}tA(t)&&eA(t)}function eP(n){return Us(n)&&n.O_.length<10}function nP(n,t){n.O_.push(t);const e=Qo(n);e.r_()&&e.V_&&e.m_(t.mutations)}function tA(n){return Us(n)&&!Qo(n).n_()&&n.O_.length>0}function eA(n){Qo(n).start()}async function iP(n){Qo(n).p_()}async function oP(n){const t=Qo(n);for(const e of n.O_)t.m_(e.mutations)}async function sP(n,t,e){const o=n.O_.shift(),r=Sp.from(o,t,e);await j0(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Zc(n)}async function rP(n,t){t&&Qo(n).V_&&await(async function(o,r){if((function(c){return Q1(c)&&c!==et.ABORTED})(r.code)){const a=o.O_.shift();Qo(o).s_(),await j0(o,(()=>o.remoteSyncer.rejectFailedWrite(a.batchId,r))),await Zc(o)}})(n,t),tA(n)&&eA(n)}async function kT(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),mt("RemoteStore","RemoteStore received new credentials");const o=Us(e);e.L_.add(3),await Na(e),o&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await Wc(e)}async function lP(n,t){const e=It(n);t?(e.L_.delete(2),await Wc(e)):t||(e.L_.add(2),await Na(e),e.q_.set("Unknown"))}function Zr(n){return n.K_||(n.K_=(function(e,o,r){const a=It(e);return a.w_(),new JV(o,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Eo:WV.bind(null,n),Ro:ZV.bind(null,n),mo:jV.bind(null,n),d_:tP.bind(null,n)}),n.B_.push((async t=>{t?(n.K_.s_(),xp(n)?bp(n):n.q_.set("Unknown")):(await n.K_.stop(),Z0(n))}))),n.K_}function Qo(n){return n.U_||(n.U_=(function(e,o,r){const a=It(e);return a.w_(),new KV(o,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iP.bind(null,n),mo:rP.bind(null,n),f_:oP.bind(null,n),g_:sP.bind(null,n)}),n.B_.push((async t=>{t?(n.U_.s_(),await Zc(n)):(await n.U_.stop(),n.O_.length>0&&(mt("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(t,e,o,r,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=o,this.op=r,this.removalCallback=a,this.deferred=new zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,o,r,a){const c=Date.now()+o,d=new Vp(t,e,c,r,a);return d.start(o),d}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(n,t){if(Qi("AsyncQueue",`${t}: ${n}`),Ra(n))return new ht(et.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this.comparator=t?(e,o)=>t(e,o)||vt.comparator(e.key,o.key):(e,o)=>vt.comparator(e.key,o.key),this.keyedMap=la(),this.sortedSet=new ue(this.comparator)}static emptySet(t){return new Ur(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,o)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ur)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,a=o.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const o=new Ur;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=e,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.W_=new ue(vt.comparator)}track(t){const e=t.doc.key,o=this.W_.get(e);o?t.type!==0&&o.type===3?this.W_=this.W_.insert(e,t):t.type===3&&o.type!==1?this.W_=this.W_.insert(e,{type:o.type,doc:t.doc}):t.type===2&&o.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&o.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&o.type===0?this.W_=this.W_.remove(e):t.type===1&&o.type===2?this.W_=this.W_.insert(e,{type:1,doc:o.doc}):t.type===0&&o.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):At():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal(((e,o)=>{t.push(o)})),t}}class Fr{constructor(t,e,o,r,a,c,d,y,m){this.query=t,this.docs=e,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=y,this.hasCachedResults=m}static fromInitialDocuments(t,e,o,r,a){const c=[];return e.forEach((d=>{c.push({type:0,doc:d})})),new Fr(t,e,Ur.emptySet(e),c,o,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,o=t.docChanges;if(e.length!==o.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==o[r].type||!e[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((t=>t.J_()))}}class uP{constructor(){this.queries=qT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,o){const r=It(e),a=r.queries;r.queries=qT(),a.forEach(((c,d)=>{for(const y of d.j_)y.onError(o)}))})(this,new ht(et.ABORTED,"Firestore shutting down"))}}function qT(){return new Wr((n=>S0(n)),Yc)}async function cP(n,t){const e=It(n);let o=3;const r=t.query;let a=e.queries.get(r);a?!a.H_()&&t.J_()&&(o=2):(a=new aP,o=t.J_()?0:1);try{switch(o){case 0:a.z_=await e.onListen(r,!0);break;case 1:a.z_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const d=Pp(c,`Initialization of query '${wr(t.query)}' failed`);return void t.onError(d)}e.queries.set(r,a),a.j_.push(t),t.Z_(e.onlineState),a.z_&&t.X_(a.z_)&&Up(e)}async function fP(n,t){const e=It(n),o=t.query;let r=3;const a=e.queries.get(o);if(a){const c=a.j_.indexOf(t);c>=0&&(a.j_.splice(c,1),a.j_.length===0?r=t.J_()?0:1:!a.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(o),e.onUnlisten(o,!0);case 1:return e.queries.delete(o),e.onUnlisten(o,!1);case 2:return e.onLastRemoteStoreUnlisten(o);default:return}}function dP(n,t){const e=It(n);let o=!1;for(const r of t){const a=r.query,c=e.queries.get(a);if(c){for(const d of c.j_)d.X_(r)&&(o=!0);c.z_=r}}o&&Up(e)}function hP(n,t,e){const o=It(n),r=o.queries.get(t);if(r)for(const a of r.j_)a.onError(e);o.queries.delete(t)}function Up(n){n.Y_.forEach((t=>{t.next()}))}var jh,GT;(GT=jh||(jh={})).ea="default",GT.Cache="cache";class pP{constructor(t,e,o){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const r of t.docChanges)r.type!==3&&o.push(r);t=new Fr(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const o=e!=="Offline";return(!this.options._a||!o)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=Fr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==jh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t){this.key=t}}class iA{constructor(t){this.key=t}}class mP{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ut(),this.mutatedKeys=Ut(),this.Aa=C0(t),this.Ra=new Ur(this.Aa)}get Va(){return this.Ta}ma(t,e){const o=e?e.fa:new OT,r=e?e.Ra:this.Ra;let a=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((v,E)=>{const A=r.get(v),I=Jc(this.query,E)?E:null,x=!!A&&this.mutatedKeys.has(A.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let U=!1;A&&I?A.data.isEqual(I.data)?x!==O&&(o.track({type:3,doc:I}),U=!0):this.ga(A,I)||(o.track({type:2,doc:I}),U=!0,(y&&this.Aa(I,y)>0||m&&this.Aa(I,m)<0)&&(d=!0)):!A&&I?(o.track({type:0,doc:I}),U=!0):A&&!I&&(o.track({type:1,doc:A}),U=!0,(y||m)&&(d=!0)),U&&(I?(c=c.add(I),a=O?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),o.track({type:1,doc:v})}return{Ra:c,fa:o,ns:d,mutatedKeys:a}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,o,r){const a=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const c=t.fa.G_();c.sort(((v,E)=>(function(I,x){const O=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return O(I)-O(x)})(v.type,E.type)||this.Aa(v.doc,E.doc))),this.pa(o),r=r!=null&&r;const d=e&&!r?this.ya():[],y=this.da.size===0&&this.current&&!r?1:0,m=y!==this.Ea;return this.Ea=y,c.length!==0||m?{snapshot:new Fr(this.query,t.Ra,a,c,t.mutatedKeys,y===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new OT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Ut(),this.Ra.forEach((o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))}));const e=[];return t.forEach((o=>{this.da.has(o)||e.push(new iA(o))})),this.da.forEach((o=>{t.has(o)||e.push(new nA(o))})),e}ba(t){this.Ta=t.Ts,this.da=Ut();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Fr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gP{constructor(t,e,o){this.query=t,this.targetId=e,this.view=o}}class yP{constructor(t){this.key=t,this.va=!1}}class _P{constructor(t,e,o,r,a,c){this.localStore=t,this.remoteStore=e,this.eventManager=o,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Wr((d=>S0(d)),Yc),this.Ma=new Map,this.xa=new Set,this.Oa=new ue(vt.comparator),this.Na=new Map,this.La=new Ip,this.Ba={},this.ka=new Map,this.qa=Br.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vP(n,t,e=!0){const o=uA(n);let r;const a=o.Fa.get(t);return a?(o.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Da()):r=await oA(o,t,e,!0),r}async function TP(n,t){const e=uA(n);await oA(e,t,!0,!1)}async function oA(n,t,e,o){const r=await qV(n.localStore,mi(t)),a=r.targetId,c=n.sharedClientState.addLocalQueryTarget(a,e);let d;return o&&(d=await EP(n,t,a,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&$0(n.remoteStore,r),d}async function EP(n,t,e,o,r){n.Ka=(E,A,I)=>(async function(O,U,Q,nt){let Z=U.view.ma(Q);Z.ns&&(Z=await PT(O.localStore,U.query,!1).then((({documents:D})=>U.view.ma(D,Z))));const it=nt&&nt.targetChanges.get(U.targetId),ct=nt&&nt.targetMismatches.get(U.targetId)!=null,rt=U.view.applyChanges(Z,O.isPrimaryClient,it,ct);return FT(O,U.targetId,rt.wa),rt.snapshot})(n,E,A,I);const a=await PT(n.localStore,t,!0),c=new mP(t,a.Ts),d=c.ma(a.documents),y=wa.createSynthesizedTargetChangeForCurrentChange(e,o&&n.onlineState!=="Offline",r),m=c.applyChanges(d,n.isPrimaryClient,y);FT(n,e,m.wa);const v=new gP(t,e,c);return n.Fa.set(t,v),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),m.snapshot}async function AP(n,t,e){const o=It(n),r=o.Fa.get(t),a=o.Ma.get(r.targetId);if(a.length>1)return o.Ma.set(r.targetId,a.filter((c=>!Yc(c,t)))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await Zh(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),e&&Mp(o.remoteStore,r.targetId),tp(o,r.targetId)})).catch(Ca)):(tp(o,r.targetId),await Zh(o.localStore,r.targetId,!0))}async function SP(n,t){const e=It(n),o=e.Fa.get(t),r=e.Ma.get(o.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(o.targetId),Mp(e.remoteStore,o.targetId))}async function CP(n,t,e){const o=bP(n);try{const r=await(function(c,d){const y=It(c),m=Me.now(),v=d.reduce(((I,x)=>I.add(x.key)),Ut());let E,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let x=Xi(),O=Ut();return y.cs.getEntries(I,v).next((U=>{x=U,x.forEach(((Q,nt)=>{nt.isValidDocument()||(O=O.add(Q))}))})).next((()=>y.localDocuments.getOverlayedDocuments(I,x))).next((U=>{E=U;const Q=[];for(const nt of d){const Z=H1(nt,E.get(nt.key).overlayedDocument);Z!=null&&Q.push(new Ps(nt.key,Z,p0(Z.value.mapValue),Yi.exists(!0)))}return y.mutationQueue.addMutationBatch(I,m,Q,d)})).next((U=>{A=U;const Q=U.applyToLocalDocumentSet(E,O);return y.documentOverlayCache.saveOverlays(I,U.batchId,Q)}))})).then((()=>({batchId:A.batchId,changes:I0(E)})))})(o.localStore,t);o.sharedClientState.addPendingMutation(r.batchId),(function(c,d,y){let m=c.Ba[c.currentUser.toKey()];m||(m=new ue(zt)),m=m.insert(d,y),c.Ba[c.currentUser.toKey()]=m})(o,r.batchId,e),await Ma(o,r.changes),await Zc(o.remoteStore)}catch(r){const a=Pp(r,"Failed to persist write");e.reject(a)}}async function sA(n,t){const e=It(n);try{const o=await LV(e.localStore,t);t.targetChanges.forEach(((r,a)=>{const c=e.Na.get(a);c&&(Zt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.va=!0:r.modifiedDocuments.size>0?Zt(c.va):r.removedDocuments.size>0&&(Zt(c.va),c.va=!1))})),await Ma(e,o,t)}catch(o){await Ca(o)}}function BT(n,t,e){const o=It(n);if(o.isPrimaryClient&&e===0||!o.isPrimaryClient&&e===1){const r=[];o.Fa.forEach(((a,c)=>{const d=c.view.Z_(t);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const y=It(c);y.onlineState=d;let m=!1;y.queries.forEach(((v,E)=>{for(const A of E.j_)A.Z_(d)&&(m=!0)})),m&&Up(y)})(o.eventManager,t),r.length&&o.Ca.d_(r),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}async function RP(n,t,e){const o=It(n);o.sharedClientState.updateQueryState(t,"rejected",e);const r=o.Na.get(t),a=r&&r.key;if(a){let c=new ue(vt.comparator);c=c.insert(a,tn.newNoDocument(a,Rt.min()));const d=Ut().add(a),y=new Xc(Rt.min(),new Map,new ue(zt),c,d);await sA(o,y),o.Oa=o.Oa.remove(a),o.Na.delete(t),Lp(o)}else await Zh(o.localStore,t,!1).then((()=>tp(o,t,e))).catch(Ca)}async function IP(n,t){const e=It(n),o=t.batch.batchId;try{const r=await UV(e.localStore,t);lA(e,o,null),rA(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),await Ma(e,r)}catch(r){await Ca(r)}}async function wP(n,t,e){const o=It(n);try{const r=await(function(c,d){const y=It(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return y.mutationQueue.lookupMutationBatch(m,d).next((E=>(Zt(E!==null),v=E.keys(),y.mutationQueue.removeMutationBatch(m,E)))).next((()=>y.mutationQueue.performConsistencyCheck(m))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>y.localDocuments.getDocuments(m,v)))}))})(o.localStore,t);lA(o,t,e),rA(o,t),o.sharedClientState.updateMutationState(t,"rejected",e),await Ma(o,r)}catch(r){await Ca(r)}}function rA(n,t){(n.ka.get(t)||[]).forEach((e=>{e.resolve()})),n.ka.delete(t)}function lA(n,t,e){const o=It(n);let r=o.Ba[o.currentUser.toKey()];if(r){const a=r.get(t);a&&(e?a.reject(e):a.resolve(),r=r.remove(t)),o.Ba[o.currentUser.toKey()]=r}}function tp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const o of n.Ma.get(t))n.Fa.delete(o),e&&n.Ca.$a(o,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach((o=>{n.La.containsKey(o)||aA(n,o)}))}function aA(n,t){n.xa.delete(t.path.canonicalString());const e=n.Oa.get(t);e!==null&&(Mp(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),Lp(n))}function FT(n,t,e){for(const o of e)o instanceof nA?(n.La.addReference(o.key,t),NP(n,o)):o instanceof iA?(mt("SyncEngine","Document no longer in limbo: "+o.key),n.La.removeReference(o.key,t),n.La.containsKey(o.key)||aA(n,o.key)):At()}function NP(n,t){const e=t.key,o=e.path.canonicalString();n.Oa.get(e)||n.xa.has(o)||(mt("SyncEngine","New document in limbo: "+e),n.xa.add(o),Lp(n))}function Lp(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const t=n.xa.values().next().value;n.xa.delete(t);const e=new vt(re.fromString(t)),o=n.qa.next();n.Na.set(o,new yP(e)),n.Oa=n.Oa.insert(e,o),$0(n.remoteStore,new Bo(mi(E0(e.path)),o,"TargetPurposeLimboResolution",gp.oe))}}async function Ma(n,t,e){const o=It(n),r=[],a=[],c=[];o.Fa.isEmpty()||(o.Fa.forEach(((d,y)=>{c.push(o.Ka(y,t,e).then((m=>{var v;if((m||e)&&o.isPrimaryClient){const E=m?!m.fromCache:(v=e?.targetChanges.get(y.targetId))===null||v===void 0?void 0:v.current;o.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(m){r.push(m);const E=Np.Wi(y.targetId,m);a.push(E)}})))})),await Promise.all(c),o.Ca.d_(r),await(async function(y,m){const v=It(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ot.forEach(m,(A=>ot.forEach(A.$i,(I=>v.persistence.referenceDelegate.addReference(E,A.targetId,I))).next((()=>ot.forEach(A.Ui,(I=>v.persistence.referenceDelegate.removeReference(E,A.targetId,I)))))))))}catch(E){if(!Ra(E))throw E;mt("LocalStore","Failed to update sequence numbers: "+E)}for(const E of m){const A=E.targetId;if(!E.fromCache){const I=v.os.get(A),x=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(x);v.os=v.os.insert(A,O)}}})(o.localStore,a))}async function MP(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){mt("SyncEngine","User change. New user:",t.toKey());const o=await J0(e.localStore,t);e.currentUser=t,(function(a,c){a.ka.forEach((d=>{d.forEach((y=>{y.reject(new ht(et.CANCELLED,c))}))})),a.ka.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),await Ma(e,o.hs)}}function DP(n,t){const e=It(n),o=e.Na.get(t);if(o&&o.va)return Ut().add(o.key);{let r=Ut();const a=e.Ma.get(t);if(!a)return r;for(const c of a){const d=e.Fa.get(c);r=r.unionWith(d.view.Va)}return r}}function uA(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=sA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=RP.bind(null,t),t.Ca.d_=dP.bind(null,t.eventManager),t.Ca.$a=hP.bind(null,t.eventManager),t}function bP(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=IP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wP.bind(null,t),t}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$c(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return PV(this.persistence,new xV,t.initialUser,this.serializer)}Ga(t){return new MV(wp.Zr,this.serializer)}Wa(t){return new BV}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class ep{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>BT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=MP.bind(null,this.syncEngine),await lP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new uP})()}createDatastore(t){const e=$c(t.databaseInfo.databaseId),o=(function(a){return new YV(a)})(t.databaseInfo);return(function(a,c,d,y){return new QV(a,c,d,y)})(t.authCredentials,t.appCheckCredentials,o,e)}createRemoteStore(t){return(function(o,r,a,c,d){return new $V(o,r,a,c,d)})(this.localStore,this.datastore,t.asyncQueue,(e=>BT(this.syncEngine,e,0)),(function(){return LT.D()?new LT:new FV})())}createSyncEngine(t,e){return(function(r,a,c,d,y,m,v){const E=new _P(r,a,c,d,y,m);return v&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(r){const a=It(r);mt("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Na(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):Qi("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(t,e,o,r,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=o,this.databaseInfo=r,this.user=je.UNAUTHENTICATED,this.clientId=f0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(o,(async c=>{mt("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(o,(c=>(mt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const o=Pp(e,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}async function Th(n,t){n.asyncQueue.verifyOperationInProgress(),mt("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let o=e.initialUser;n.setCredentialChangeListener((async r=>{o.isEqual(r)||(await J0(t.localStore,r),o=r)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function HT(n,t){n.asyncQueue.verifyOperationInProgress();const e=await PP(n);mt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((o=>kT(t.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,r)=>kT(t.remoteStore,r))),n._onlineComponents=t}async function PP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){mt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Th(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===et.FAILED_PRECONDITION||r.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;kr("Error using user provided cache. Falling back to memory cache: "+e),await Th(n,new Uc)}}else mt("FirestoreClient","Using default OfflineComponentProvider"),await Th(n,new Uc);return n._offlineComponents}async function cA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(mt("FirestoreClient","Using user provided OnlineComponentProvider"),await HT(n,n._uninitializedComponentsProvider._online)):(mt("FirestoreClient","Using default OnlineComponentProvider"),await HT(n,new ep))),n._onlineComponents}function UP(n){return cA(n).then((t=>t.syncEngine))}async function LP(n){const t=await cA(n),e=t.eventManager;return e.onListen=vP.bind(null,t.syncEngine),e.onUnlisten=AP.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=TP.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=SP.bind(null,t.syncEngine),e}function kP(n,t,e={}){const o=new zo;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,y,m){const v=new xP({next:A=>{v.Za(),c.enqueueAndForget((()=>fP(a,E))),A.fromCache&&y.source==="server"?m.reject(new ht(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new pP(d,v,{includeMetadataChanges:!0,_a:!0});return cP(a,E)})(await LP(n),n.asyncQueue,t,e,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(n,t,e){if(!e)throw new ht(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function OP(n,t,e,o){if(t===!0&&o===!0)throw new ht(et.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function YT(n){if(!vt.isDocumentKey(n))throw new ht(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JT(n){if(vt.isDocumentKey(n))throw new ht(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(o){return o.constructor?o.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":At()}function Sa(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ht(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=jc(n);throw new ht(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t){var e,o;if(t.host===void 0){if(t.ssl!==void 0)throw new ht(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ht(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}OP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fA((o=t.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ht(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ht(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ht(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tf{constructor(t,e,o,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KT(t),t.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new Zx;switch(o.type){case"firstParty":return new n1(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ht(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const o=zT.get(e);o&&(mt("ComponentProvider","Removing Datastore"),zT.delete(e),o.terminate())})(this),Promise.resolve()}}function qP(n,t,e,o={}){var r;const a=(n=Sa(n,tf))._getSettings(),c=`${t}:${e}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),o.mockUserToken){let d,y;if(typeof o.mockUserToken=="string")d=o.mockUserToken,y=je.MOCK_USER;else{d=bb(o.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const m=o.mockUserToken.sub||o.mockUserToken.user_id;if(!m)throw new ht(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new je(m)}n._authCredentials=new jx(new c0(d,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,e,o){this.converter=e,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Ls(this.firestore,t,this._query)}}class Nn{constructor(t,e,o){this.converter=e,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Nn(this.firestore,t,this._key)}}class Yo extends Ls{constructor(t,e,o){super(t,e,E0(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Nn(this.firestore,null,new vt(t))}withConverter(t){return new Yo(this.firestore,t,this._path)}}function GP(n,t,...e){if(n=Lr(n),dA("collection","path",t),n instanceof tf){const o=re.fromString(t,...e);return JT(o),new Yo(n,null,o)}{if(!(n instanceof Nn||n instanceof Yo))throw new ht(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(re.fromString(t,...e));return JT(o),new Yo(n.firestore,null,o)}}function BP(n,t,...e){if(n=Lr(n),arguments.length===1&&(t=f0.newId()),dA("doc","path",t),n instanceof tf){const o=re.fromString(t,...e);return YT(o),new Nn(n,null,new vt(o))}{if(!(n instanceof Nn||n instanceof Yo))throw new ht(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(re.fromString(t,...e));return YT(o),new Nn(n.firestore,n instanceof Yo?n.converter:null,new vt(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Q0(this,"async_queue_retry"),this.Vu=()=>{const o=vh();o&&mt("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=t;const e=vh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=vh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise((()=>{}));const e=new zo;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Pu.push(t),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Ra(t))throw t;mt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(t){const e=this.mu.then((()=>(this.du=!0,t().catch((o=>{this.Eu=o,this.du=!1;const r=(function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d})(o);throw Qi("INTERNAL UNHANDLED ERROR: ",r),o})).then((o=>(this.du=!1,o))))));return this.mu=e,e}enqueueAfterDelay(t,e,o){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const r=Vp.createAndSchedule(this,t,e,o,(a=>this.yu(a)));return this.Tu.push(r),r}fu(){this.Eu&&At()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then((()=>{this.Tu.sort(((e,o)=>e.targetTimeMs-o.targetTimeMs));for(const e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()}))}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class kp extends tf{constructor(t,e,o,r){super(t,e,o,r),this.type="firestore",this._queue=new QT,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new QT(t),this._firestoreClient=void 0,await t}}}function FP(n,t){const e=typeof n=="object"?n:e0(),o=typeof n=="string"?n:"(default)",r=Lx(e,"firestore").getImmediate({identifier:o});if(!r._initialized){const a=Mb("firestore");a&&qP(r,...a)}return r}function hA(n){if(n._terminated)throw new ht(et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HP(n),n._firestoreClient}function HP(n){var t,e,o;const r=n._freezeSettings(),a=(function(d,y,m,v){return new m1(d,y,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,fA(v.experimentalLongPollingOptions),v.useFetchStreams)})(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((o=r.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new VP(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const y=d?._online.build();return{_offline:d?._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hr(Qe.fromBase64String(t))}catch(e){throw new ht(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Hr(Qe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ht(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ht(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ht(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(o,r){if(o.length!==r.length)return!1;for(let a=0;a<o.length;++a)if(o[a]!==r[a])return!1;return!0})(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=/^__.*__$/;class YP{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return this.fieldMask!==null?new Ps(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ia(t,this.data,e,this.fieldTransforms)}}function mA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class Bp{constructor(t,e,o,r,a,c){this.settings=t,this.databaseId=e,this.serializer=o,this.ignoreUndefinedProperties=r,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new Bp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const o=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:o,xu:!1});return r.Ou(t),r}Nu(t){var e;const o=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:o,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Lc(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(mA(this.Cu)&&zP.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class JP{constructor(t,e,o){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=o||$c(t)}Qu(t,e,o,r=!1){return new Bp({Cu:t,methodName:e,qu:o,path:Je.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gA(n){const t=n._freezeSettings(),e=$c(n._databaseId);return new JP(n._databaseId,!!t.ignoreUndefinedProperties,e)}function KP(n,t,e,o,r,a={}){const c=n.Qu(a.merge||a.mergeFields?2:0,t,e,r);vA("Data must be an object, but it was:",c,o);const d=yA(o,c);let y,m;if(a.merge)y=new Wn(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const A=XP(t,E,e);if(!c.contains(A))throw new ht(et.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);WP(v,A)||v.push(A)}y=new Wn(v),m=c.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,m=c.fieldTransforms;return new YP(new Bn(d),y,m)}function QP(n,t,e,o=!1){return Fp(e,n.Qu(o?4:3,t))}function Fp(n,t){if(_A(n=Lr(n)))return vA("Unsupported field value:",t,n),yA(n,t);if(n instanceof pA)return(function(o,r){if(!mA(r.Cu))throw r.Bu(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${o._methodName}() is not currently supported inside arrays`);const a=o._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return(function(o,r){const a=[];let c=0;for(const d of o){let y=Fp(d,r.Lu(c));y==null&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}})(n,t)}return(function(o,r){if((o=Lr(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return k1(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const a=Me.fromDate(o);return{timestampValue:Vc(r.serializer,a)}}if(o instanceof Me){const a=new Me(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Vc(r.serializer,a)}}if(o instanceof qp)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Hr)return{bytesValue:q0(r.serializer,o._byteString)};if(o instanceof Nn){const a=r.databaseId,c=o.firestore._databaseId;if(!c.isEqual(a))throw r.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Rp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof Gp)return(function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw d.Bu("VectorValues must only contain numeric values.");return Ap(d.serializer,y)}))}}}}}})(o,r);throw r.Bu(`Unsupported field value: ${jc(o)}`)})(n,t)}function yA(n,t){const e={};return d0(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(n,((o,r)=>{const a=Fp(r,t.Mu(o));a!=null&&(e[o]=a)})),{mapValue:{fields:e}}}function _A(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Me||n instanceof qp||n instanceof Hr||n instanceof Nn||n instanceof pA||n instanceof Gp)}function vA(n,t,e){if(!_A(e)||!(function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)})(e)){const o=jc(e);throw o==="an object"?t.Bu(n+" a custom object"):t.Bu(n+" "+o)}}function XP(n,t,e){if((t=Lr(t))instanceof Op)return t._internalPath;if(typeof t=="string")return TA(n,t);throw Lc("Field path arguments must be of type string or ",n,!1,void 0,e)}const $P=new RegExp("[~\\*/\\[\\]]");function TA(n,t,e){if(t.search($P)>=0)throw Lc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Op(...t.split("."))._internalPath}catch{throw Lc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Lc(n,t,e,o,r){const a=o&&!o.isEmpty(),c=r!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let y="";return(a||c)&&(y+=" (found",a&&(y+=` in field ${o}`),c&&(y+=` in document ${r}`),y+=")"),new ht(et.INVALID_ARGUMENT,d+n+y)}function WP(n,t){return n.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(t,e,o,r,a){this._firestore=t,this._userDataWriter=e,this._key=o,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ZP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Hp("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class ZP extends EA{data(){return super.data()}}function Hp(n,t){return typeof t=="string"?TA(n,t):t instanceof Op?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ht(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class AA extends zp{}function tU(n,t,...e){let o=[];t instanceof zp&&o.push(t),o=o.concat(e),(function(a){const c=a.filter((y=>y instanceof Jp)).length,d=a.filter((y=>y instanceof Yp)).length;if(c>1||c>0&&d>0)throw new ht(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const r of o)n=r._apply(n);return n}class Yp extends AA{constructor(t,e,o){super(),this._field=t,this._op=e,this._value=o,this.type="where"}static _create(t,e,o){return new Yp(t,e,o)}_apply(t){const e=this._parse(t);return SA(t._query,e),new Ls(t.firestore,t.converter,Jh(t._query,e))}_parse(t){const e=gA(t.firestore);return(function(a,c,d,y,m,v,E){let A;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ht(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){$T(E,v);const I=[];for(const x of E)I.push(XT(y,a,x));A={arrayValue:{values:I}}}else A=XT(y,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||$T(E,v),A=QP(d,c,E,v==="in"||v==="not-in");return Re.create(m,v,A)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class Jp extends zp{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Jp(t,e)}_parse(t){const e=this._queryConstraints.map((o=>o._parse(t))).filter((o=>o.getFilters().length>0));return e.length===1?e[0]:ti.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(r,a){let c=r;const d=a.getFlattenedFilters();for(const y of d)SA(c,y),c=Jh(c,y)})(t._query,e),new Ls(t.firestore,t.converter,Jh(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kp extends AA{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Kp(t,e)}_apply(t){const e=(function(r,a,c){if(r.startAt!==null)throw new ht(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ht(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ta(a,c)})(t._query,this._field,this._direction);return new Ls(t.firestore,t.converter,(function(r,a){const c=r.explicitOrderBy.concat([a]);return new $r(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(t._query,e))}}function eU(n,t="asc"){const e=t,o=Hp("orderBy",n);return Kp._create(o,e)}function XT(n,t,e){if(typeof(e=Lr(e))=="string"){if(e==="")throw new ht(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A0(t)&&e.indexOf("/")!==-1)throw new ht(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const o=t.path.child(re.fromString(e));if(!vt.isDocumentKey(o))throw new ht(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return yT(n,new vt(o))}if(e instanceof Nn)return yT(n,e._key);throw new ht(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jc(e)}.`)}function $T(n,t){if(!Array.isArray(n)||n.length===0)throw new ht(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function SA(n,t){const e=(function(r,a){for(const c of r)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ht(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class nU{convertValue(t,e="none"){switch(xs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ye(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(bs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw At()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const o={};return Xr(t,((r,a)=>{o[r]=this.convertValue(a,e)})),o}convertVectorValue(t){var e,o,r;const a=(r=(o=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||o===void 0?void 0:o.values)===null||r===void 0?void 0:r.map((c=>ye(c.doubleValue)));return new Gp(a)}convertGeoPoint(t){return new qp(ye(t.latitude),ye(t.longitude))}convertArray(t,e){return(t.values||[]).map((o=>this.convertValue(o,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const o=_p(t);return o==null?null:this.convertValue(o,e);case"estimate":return this.convertTimestamp(ya(t));default:return null}}convertTimestamp(t){const e=Ko(t);return new Me(e.seconds,e.nanos)}convertDocumentKey(t,e){const o=re.fromString(t);Zt(Y0(o));const r=new _a(o.get(1),o.get(3)),a=new vt(o.popFirst(5));return r.isEqual(e)||Qi(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(n,t,e){let o;return o=n?n.toFirestore(t):t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class oU extends EA{constructor(t,e,o,r,a,c){super(t,e,o,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const o=this._document.data.field(Hp("DocumentSnapshot.get",t));if(o!==null)return this._userDataWriter.convertValue(o,e.serverTimestamps)}}}class Tc extends oU{data(t={}){return super.data(t)}}class sU{constructor(t,e,o,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new hc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((o=>{t.call(e,new Tc(this._firestore,this._userDataWriter,o.key,o,new hc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ht(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const y=new Tc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new hc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const y=new Tc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new hc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:rU(d.type),doc:y,oldIndex:m,newIndex:v}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function rU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}class lU extends nU{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Nn(this.firestore,null,e)}}function aU(n){n=Sa(n,Ls);const t=Sa(n.firestore,kp),e=hA(t),o=new lU(t);return jP(n._query),kP(e,n._query).then((r=>new sU(t,o,n,r)))}function uU(n,t,e){n=Sa(n,Nn);const o=Sa(n.firestore,kp),r=iU(n.converter,t);return cU(o,[KP(gA(o),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Yi.none())])}function cU(n,t){return(function(o,r){const a=new zo;return o.asyncQueue.enqueueAndForget((async()=>CP(await UP(o),r,a))),a.promise})(hA(n),t)}(function(t,e=!0){(function(r){Qr=r})(qx),Nc(new ha("firestore",((o,{instanceIdentifier:r,options:a})=>{const c=o.getProvider("app").getImmediate(),d=new kp(new t1(o.getProvider("auth-internal")),new o1(o.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ht(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(m.options.projectId,v)})(c,r),c);return a=Object.assign({useFetchStreams:e},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Pr(dT,"4.7.3",t),Pr(dT,"4.7.3","esm2017")})();const WT="az104_master_principles",fU=()=>{const n=localStorage.getItem("vault_firebase_config");return n?JSON.parse(n):{apiKey:"",projectId:""}},ZT=()=>{const n=fU();if(!n.projectId)return null;const t=Gx().length===0?t0(n):e0();return FP(t)},dU=async n=>{const t=new TextEncoder().encode(n.trim().toLowerCase()),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(o=>o.toString(16).padStart(2,"0")).join("")},hU=({onPush:n,isApiKeySet:t,currentCount:e})=>{const[o,r]=cn.useState(""),[a,c]=cn.useState(!1),[d,y]=cn.useState([]),[m,v]=cn.useState(new Set),[E,A]=cn.useState(null),[I,x]=cn.useState(null),O=cn.useRef(null),U=it=>new Promise((ct,rt)=>{const D=new FileReader;D.readAsDataURL(it),D.onload=()=>ct(D.result.split(",")[1]),D.onerror=M=>rt(M)}),Q=async it=>{const ct=it.target.files?.[0];if(ct&&ct.type==="application/pdf")try{c(!0);const rt=await U(ct);A({name:ct.name,data:rt}),r(""),x(null),console.log("PDF successfully read:",ct.name),console.log("Base64 length:",rt.length),console.log("Gemini Key loaded:","".slice(0,6)+"..."),setTimeout(()=>{A(D=>D?{...D}:null)},50)}catch(rt){x("Failed to read PDF file."),console.error(rt)}finally{c(!1)}else ct&&x("Please upload a valid PDF document.")},nt=e>=6,Z=async()=>{if(!t||!o.trim()&&!E)return;c(!0);const it=new JE({apiKey:""});try{const ct=[{text:"Extract ONLY correctly answered questions as JSON array: [{id, text, correctAnswer, explanation}]. Max 6 items."}];E?ct.push({inlineData:{mimeType:"application/pdf",data:E.data}}):ct.push({text:o});const rt=await it.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:ct},config:{responseMimeType:"application/json"}}),D=JSON.parse(rt.text||"[]");y(Array.isArray(D)?D:[]),v(new Set)}catch(ct){console.error(ct),y([])}finally{c(!1)}};return ut.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 flex flex-col h-full shadow-2xl",children:[ut.jsxs("div",{className:"flex justify-between items-center border-b border-slate-800 pb-4 mb-4",children:[ut.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-blue-400",children:"Answer Scraper"}),ut.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${nt?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-slate-800 text-slate-500"}`,children:["STAGED: ",e," / 6"]})]}),E?ut.jsxs("div",{className:"bg-purple-600/10 border border-purple-500/30 p-4 rounded-xl relative text-center mb-4",children:[ut.jsx("button",{onClick:()=>A(null),className:"absolute top-2 right-2 text-slate-500 hover:text-red-400",children:ut.jsx("i",{className:"fa-solid fa-xmark"})}),ut.jsx("i",{className:"fa-solid fa-file-pdf text-2xl text-purple-400 mb-1"}),ut.jsx("p",{className:"text-[10px] font-bold text-white truncate px-4",children:E.name})]}):ut.jsx("textarea",{className:"w-full h-32 bg-slate-950 border border-slate-800 rounded-xl p-3 text-xs text-slate-400 outline-none focus:border-blue-500 mb-4 resize-none",placeholder:"Paste exam text here...",value:o,onChange:it=>r(it.target.value)}),ut.jsx("input",{type:"file",ref:O,onChange:Q,className:"hidden",accept:"application/pdf"}),ut.jsxs("div",{className:"flex flex-col gap-2 mb-6",children:[I&&ut.jsx("p",{className:"text-[10px] text-red-500 font-bold uppercase text-center",children:I}),ut.jsx("button",{onClick:()=>O.current?.click(),className:"py-2 border border-dashed border-slate-800 rounded-xl text-slate-600 hover:text-blue-400 text-[10px] font-bold uppercase transition-colors",children:"Upload PDF"}),ut.jsx("button",{disabled:a,onClick:Z,className:"py-3 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-800 text-white text-[10px] font-black rounded-xl uppercase transition-all shadow-lg",children:a?"SCRIBING...":"EXTRACT VALID ANSWERS"})]}),ut.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:[(d||[]).map((it,ct)=>{const rt=m.has(it.id||it.text),D=rt||nt;return ut.jsxs("div",{className:`p-4 bg-slate-950 border rounded-2xl transition-all ${rt?"border-emerald-500/20 opacity-50":"border-slate-800"}`,children:[ut.jsx("p",{className:"text-[10px] text-slate-400 line-clamp-2 mb-3 leading-relaxed",children:it.text}),ut.jsx("button",{disabled:D,onClick:()=>{n(it),v(M=>new Set(M).add(it.id||it.text))},className:`w-full py-2 rounded-lg text-[9px] font-black uppercase transition-all ${rt?"bg-emerald-500/10 text-emerald-500":nt?"bg-red-500/10 text-red-500 border border-red-500/20 cursor-not-allowed":"bg-blue-500/10 text-blue-400 border border-blue-500/20 hover:bg-blue-600 hover:text-white"}`,children:rt?"PUSHED":nt?"LIMIT REACHED (6)":"PUSH TO ENGINE"})]},ct)}),d.length===0&&!a&&ut.jsx("p",{className:"text-center text-[9px] text-slate-700 uppercase py-8 tracking-widest",children:"No active results"})]})]})},pU=()=>{const[n,t]=cn.useState("gen"),[e,o]=cn.useState([]),[r,a]=cn.useState(null),[c,d]=cn.useState("IDLE"),[y,m]=cn.useState(null),[v,E]=cn.useState([]),A=x=>{o(O=>O.length>=6?O:[...O,x])},I=async()=>{if(e.length===0)return;d("LOADING"),m(null);const x=new JE({apiKey:""});try{const O=await x.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{text:`You are an AZ-104 Master Class tutor. Convert these correctly answered exam items into core logic principles grounded in official MS Learn docs. Use analogies. Questions: ${JSON.stringify(e)}`}]},config:{tools:[{googleSearch:{}}],responseMimeType:"application/json",responseSchema:{type:Ne.OBJECT,properties:{domain:{type:Ne.STRING},blocks:{type:Ne.ARRAY,items:{type:Ne.OBJECT,properties:{foundationalRule:{type:Ne.STRING},whyItWorks:{type:Ne.STRING},analogy:{type:Ne.STRING},analogousFoundationalConcept:{type:Ne.STRING},commonConfusion:{type:Ne.STRING},examEliminationCue:{type:Ne.STRING},memoryHook:{type:Ne.STRING}},required:["foundationalRule","whyItWorks","analogy","memoryHook"]}}},required:["domain","blocks"]}}});if(!O.text)throw new Error("Logic Engine returned an empty response. This usually happens when safety filters are triggered.");const U=JSON.parse(O.text.replace(/```json\n?|\n?```/g,"").trim()||"{}");a(U),d("SUCCESS");const Q=ZT();if(Q)for(const nt of e){const Z=await dU(nt.text),it=U?.blocks?.[0]?.foundationalRule||"AZ-104 Master Principle";await uU(BP(Q,WT,Z),{hash:Z,domain:U.domain||"General AZ-104",foundationalRule:it,masteredAt:new Date().toISOString()})}}catch(O){console.error(O),m(O.message||"An unknown error occurred during mining."),d("ERROR")}};return cn.useEffect(()=>{if(n==="vault"){const x=ZT();if(x){const O=tU(GP(x,WT),eU("masteredAt","desc"));aU(O).then(U=>E(U.docs.map(Q=>Q.data()))).catch(()=>E([]))}}},[n]),ut.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 flex flex-col min-h-screen font-sans bg-slate-950",children:[ut.jsxs("header",{className:"flex justify-between items-center mb-10",children:[ut.jsxs("div",{className:"group cursor-default",children:[ut.jsxs("h1",{className:"text-2xl font-black italic text-white tracking-tighter transition-all group-hover:text-blue-500",children:["ANALOGICAL ",ut.jsx("span",{className:"text-blue-500 group-hover:text-white transition-all",children:"INSIGHT"})]}),ut.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-black tracking-widest",children:"Mastery Engine v2.2 (Flash optimized)"})]}),ut.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-1 rounded-xl flex shadow-lg",children:[ut.jsx("button",{onClick:()=>t("gen"),className:`px-6 py-2 rounded-lg text-xs font-black transition-all ${n==="gen"?"bg-blue-600 text-white shadow-blue-500/20 shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"GEN"}),ut.jsx("button",{onClick:()=>t("vault"),className:`px-6 py-2 rounded-lg text-xs font-black transition-all ${n==="vault"?"bg-blue-600 text-white shadow-blue-500/20 shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"VAULT"})]})]}),ut.jsxs("main",{className:"flex-1",children:[c==="ERROR"&&ut.jsxs("div",{className:"max-w-4xl mx-auto mb-6 bg-red-500/10 border border-red-500/20 p-6 rounded-2xl flex items-center gap-4 animate-in shake duration-500",children:[ut.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-500 text-2xl"}),ut.jsxs("div",{className:"flex-1",children:[ut.jsx("p",{className:"text-red-500 font-black text-xs uppercase tracking-widest mb-1",children:"Mining Failed"}),ut.jsx("p",{className:"text-red-400/70 text-[11px] font-mono leading-tight",children:y})]}),ut.jsx("button",{onClick:()=>d("IDLE"),className:"px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-500 text-[10px] font-black rounded-lg uppercase transition-all",children:"Retry"})]}),n==="gen"?r?ut.jsxs("div",{className:"max-w-4xl mx-auto bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl animate-in zoom-in duration-500",children:[ut.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-slate-800 pb-4",children:[ut.jsx("h2",{className:"text-xl font-black text-blue-500 italic uppercase",children:r.domain||"Extracted Principles"}),ut.jsx("button",{onClick:()=>{a(null),o([]),d("IDLE")},className:"text-[10px] font-black text-slate-500 hover:text-red-400 uppercase tracking-widest transition-colors",children:"Discard & Clear"})]}),ut.jsx("div",{className:"space-y-8",children:(r?.blocks||[]).map((x,O)=>ut.jsxs("div",{className:"border-l-2 border-blue-600/30 pl-6 group",children:[ut.jsx("h3",{className:"text-white font-bold mb-2 group-hover:text-blue-400 transition-colors",children:x.foundationalRule}),ut.jsx("p",{className:"text-xs text-slate-400 leading-relaxed mb-4",children:x.whyItWorks}),ut.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ut.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[ut.jsx("p",{className:"text-[10px] text-emerald-400 font-black mb-1 uppercase tracking-widest",children:"The Analogy"}),ut.jsxs("p",{className:"text-xs text-slate-500 italic leading-relaxed",children:['"',x.analogy,'"']})]}),ut.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[ut.jsx("p",{className:"text-[10px] text-amber-400 font-black mb-1 uppercase tracking-widest",children:"Memory Hook"}),ut.jsxs("p",{className:"text-xs font-bold text-white italic",children:['"',x.memoryHook,'"']})]})]})]},O))})]}):ut.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full",children:[ut.jsx("div",{className:"lg:col-span-4 h-full",children:ut.jsx(hU,{isApiKeySet:!1,currentCount:e.length,onPush:A})}),ut.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-4",children:[ut.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-3xl p-8 flex-1 relative shadow-2xl backdrop-blur-sm",children:[ut.jsxs("div",{className:"flex justify-between items-center mb-6",children:[ut.jsxs("span",{className:`text-[10px] font-black uppercase px-3 py-1.5 rounded border ${e.length>=6?"bg-red-500/10 text-red-500 border-red-500/30 animate-pulse":"bg-blue-500/10 text-blue-500 border-blue-500/30"}`,children:["Staging Area: ",e.length," / 6"]}),ut.jsx("button",{onClick:()=>o([]),className:"text-[10px] font-bold text-slate-600 hover:text-red-400 uppercase tracking-widest transition-colors",children:"Clear Batch"})]}),ut.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[400px] pr-2 custom-scrollbar",children:[(e||[]).map((x,O)=>ut.jsx("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800 group hover:border-blue-500/30 transition-all",children:ut.jsxs("p",{className:"text-[11px] text-slate-300 font-mono leading-relaxed",children:[ut.jsxs("span",{className:"text-blue-500 font-bold mr-2",children:[O+1,"."]}),x.text]})},O)),e.length===0&&ut.jsxs("div",{className:"h-60 flex flex-col items-center justify-center opacity-10 font-black uppercase italic tracking-tighter text-center",children:[ut.jsx("i",{className:"fa-solid fa-cube text-6xl mb-4"}),ut.jsx("p",{className:"text-4xl",children:"Staging Empty"})]})]})]}),ut.jsx("button",{disabled:c==="LOADING"||e.length===0,onClick:I,className:"w-full py-5 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-800 text-white font-black rounded-3xl shadow-xl transition-all uppercase tracking-widest active:scale-[0.98] shadow-blue-500/10",children:c==="LOADING"?ut.jsxs("span",{className:"flex items-center justify-center gap-2",children:[ut.jsx("i",{className:"fa-solid fa-microchip animate-spin"}),"Mining Principles (Flash Mode)..."]}):"Analyze & Store Principles"})]})]}):ut.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[ut.jsxs("h2",{className:"text-xl font-black text-white mb-2 flex items-center gap-3",children:[ut.jsx("i",{className:"fa-solid fa-vault text-blue-500"})," Mastered Principles"]}),ut.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(v||[]).map((x,O)=>ut.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-blue-500/50 transition-all shadow-lg group relative overflow-hidden",children:[ut.jsxs("div",{className:"flex justify-between items-start mb-4",children:[ut.jsx("span",{className:"text-[9px] font-black px-2 py-1 bg-blue-500/10 text-blue-400 rounded uppercase tracking-tighter",children:x.domain}),ut.jsx("span",{className:"text-[8px] text-slate-600 font-mono",children:new Date(x.masteredAt).toLocaleDateString()})]}),ut.jsx("h3",{className:"text-slate-200 font-bold text-sm leading-relaxed mb-4 group-hover:text-white transition-colors",children:x.foundationalRule}),ut.jsxs("button",{onClick:()=>navigator.clipboard.writeText(x.foundationalRule),className:"text-[9px] font-black text-slate-600 hover:text-blue-400 uppercase tracking-widest flex items-center gap-2",children:[ut.jsx("i",{className:"fa-solid fa-copy"})," Copy Rule"]})]},O))})]})]}),ut.jsx("footer",{className:"mt-20 py-10 border-t border-slate-900 text-center opacity-30",children:ut.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.4em]",children:"AZ-104 MASTER CLASS  LOGIC ENGINE v2.2"})})]})},mU=aC.createRoot(document.getElementById("root"));mU.render(ut.jsx(tC.StrictMode,{children:ut.jsx(pU,{})}));
